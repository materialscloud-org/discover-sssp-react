const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-DfA2ILR5.js","assets/index-D6nKi-EL.js","assets/index-yaOUSvUS.css"])))=>i.map(i=>d[i]);
import{r as p,u as b,j as e,a as v,a2 as y,Q as h,U as i,_ as B,D as C,O as S,L as D}from"./index-D6nKi-EL.js";import{F as c,N}from"./NoDataMessage-BQfSGjbm.js";const g=p.forwardRef(({bsPrefix:n,fluid:t=!1,as:r="div",className:o,...a},s)=>{const l=b(n,"container"),d=typeof t=="string"?`-${t}`:"-fluid";return e.jsx(r,{ref:s,...a,className:v(o,t?`${l}${d}`:l)})});g.displayName="Container";const m=({id:n,which:t,pseudos:r,value:o,onSelect:a})=>e.jsxs(c.Group,{id:n,children:[e.jsxs(c.Label,{htmlFor:`${t}-select`,children:[y(t),":"]}),e.jsx(c.Select,{id:`${t}-select`,value:o,onChange:s=>a(s.target.value),children:r.map(s=>e.jsx("option",{value:s,children:s},s))})]}),u={"band-structure-controls":"_band-structure-controls_1qzx4_1","compared-pseudo-selector":"_compared-pseudo-selector_1qzx4_1","reference-pseudo-selector":"_reference-pseudo-selector_1qzx4_1","pseudo-shift-range":"_pseudo-shift-range_1qzx4_1"},w=({pseudos:n,activePseudos:t,onPseudoSelect:r,bandShift:o,onBandShiftChange:a})=>e.jsxs("div",{id:u["band-structure-controls"],children:[e.jsxs(h,{className:"gap-3",children:[e.jsx(i,{sm:"6",lg:"12",children:e.jsx(m,{id:u["reference-pseudo-selector"],which:"reference",pseudos:n,value:t[0],onSelect:s=>{r([s,t[1]]),a(0)}})}),e.jsx(i,{children:e.jsx(m,{id:u["compared-pseudo-selector"],which:"compared",pseudos:n,value:t[1],onSelect:s=>{r([t[0],s]),a(0)}})})]}),e.jsxs(c.Group,{children:[e.jsx(c.Label,{htmlFor:u["pseudo-shift-range"],children:"Compared bands shift (meV):"}),e.jsxs(h,{style:{alignItems:"center"},children:[e.jsx(i,{xs:"8",sm:"9",md:"10",lg:"6",xl:"7",xxl:"8",children:e.jsx(c.Range,{id:u["pseudo-shift-range"],name:"pseudo-shift-range",value:o,min:-5e3,max:5e3,step:1,onChange:s=>a(Number(s.target.value))})}),e.jsx(i,{children:e.jsx(c.Control,{name:"pseudo-shift-number",type:"number",value:o.toFixed(0),min:-5e3,max:5e3,step:1,onChange:s=>a(Number(s.target.value))})})]})]})]}),z={"bands-note":"_bands-note_m1aly_1"},f={"bands-plot-wrapper":"_bands-plot-wrapper_1hzls_1","bands-plot":"_bands-plot_1hzls_1"},F=({pseudosMetadata:n,bandsPseudosMap:t,activePseudos:r,bandShift:o})=>{const a=p.useRef(null);return p.useEffect(()=>{(async()=>{if(!t||!a.current)return;const s=L(r,t,o,n);if(!s.length)return;let l=null;l=(await B(async()=>{const{BandsVisualiser:d}=await import("./main-DfA2ILR5.js");return{BandsVisualiser:d}},__vite__mapDeps([0,1,2]))).BandsVisualiser,l(a.current,{bandsDataArray:s,settings:{showlegend:!1,yaxis:{range:[-20,20]}}})})()},[r,t,n,o]),e.jsx("div",{id:f["bands-plot-wrapper"],children:e.jsx("div",{ref:a,id:f["bands-plot"]})})},L=(n,t,r,o)=>n.flatMap((a,s)=>{var x;const l=t[a];if(!l)return[];let d=-l.fermiLevel||0;return s===1&&(d+=r/1e3),[{bandsData:R(l,d),traceFormat:{line:{color:s===0?"black":((x=o[a])==null?void 0:x.color)||"red"}}}]}),R=(n,t)=>({...n,paths:n.paths.map(r=>({...r,values:r.values.map(o=>o.map(a=>a+t))}))}),P=()=>{const{loadingMetadata:n,pseudosMetadata:t}=p.useContext(C),{loadingBandsData:r,bandsPseudosMap:o,bandsPseudos:a,activeBandsPseudos:s,setActiveBandsPseudos:l,bandShift:d,setBandShift:x}=p.useContext(S),j=r||n,_=Object.keys(o||{}).length>0;return j?e.jsx(D,{}):_?e.jsxs(g,{id:"bands-plots",children:[e.jsxs(h,{children:[e.jsx(i,{lg:"3",children:e.jsx(w,{pseudos:a,activePseudos:s,bandShift:d,onPseudoSelect:l,onBandShiftChange:x})}),e.jsx(i,{lg:"auto",className:"ms-lg-5",children:e.jsx(F,{pseudosMetadata:t,bandsPseudosMap:o,activePseudos:s,bandShift:d})})]}),e.jsx("div",{id:z["bands-note"],children:"Electronic band structure along high-symmetry path. The reference energy (0 eV) corresponds to the Fermi level."})]}):e.jsx(N,{})};export{P as default};
