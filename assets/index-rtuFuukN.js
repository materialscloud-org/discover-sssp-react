const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-DdbY3o2d.js","assets/index-BH0wW1rV.js","assets/index-Cjp2Xj_Y.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as n,_ as C,j as i,D as j,O as w,S as E,L as S,Q as P,U as v}from"./index-BH0wW1rV.js";const L={"chessboard-plots":"_chessboard-plots_sjmsm_1"},M={"chessboard-plot":"_chessboard-plot_14kug_1"},B={responsive:!0,displayModeBar:!1,scrollZoom:!1},z=({title:l,pseudoFilenames:r,values:d,zMax:g,onTileClick:y})=>{const u=n.useRef(null);return n.useEffect(()=>{if(!u.current)return;let c=null,s=null,h=!1,x=null;return(async()=>{if(c=(await C(async()=>{const{default:t}=await import("./PlotlyLoader-DdbY3o2d.js");return{default:t}},__vite__mapDeps([0,1,2,3]))).default,h||!u.current)return;const f=d.map((t,e)=>t.map((o,a)=>e===a?null:o)),b=d.map((t,e)=>t.map((o,a)=>e===a?1:null)),_=[{z:f,x:r,y:r,zmin:0,zmax:g,colorscale:[[0,"#157347"],[.5,"#f0a17c"],[1,"#870000"]],type:"heatmap",hoverongaps:!1,hovertemplate:`<b>x:</b> %{x}<br /><b>y:</b> %{y}<br><b>Max ${l}:</b> %{z:.2f}<extra></extra>`},{z:b,x:r,y:r,zmin:0,zmax:1,colorscale:[[0,"#ffffff"],[1,"#ffffff"]],showscale:!1,type:"heatmap",hoverinfo:"skip"}],m={xaxis:{side:"top",title:{text:l,standoff:10,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45},yaxis:{autorange:"reversed",title:{text:`Max ${l}`,standoff:10,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45},hoverlabel:{namelength:0},annotations:d.map((t,e)=>t.map((o,a)=>({x:r[a],y:r[e],text:o>=100?o.toExponential(0).toString().replace("e+","e"):o.toFixed(1),showarrow:!1,font:{color:"white",size:Math.max(8,24-r.length)}})).filter((o,a)=>a!==e)).flat(),margin:{t:160,r:110,b:40,l:160},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};s=await c.react(u.current,_,m,B),s.on("plotly_click",t=>{const{x:e,y:o,pointIndex:a}=t.points[0],k=l=="v"?0:1;y(k,[o,e],a)});const p=t=>{if(!t)return;const e={width:t.offsetWidth,height:t.offsetWidth};c.relayout(t,e)};return x=()=>p(s),window.addEventListener("resize",x),p(s),()=>{var t;s&&((t=s.removeAllListeners)==null||t.call(s,"plotly_click"))}})(),()=>{var f;if(h=!0,x&&window.removeEventListener("resize",x),c&&s)try{(f=s.removeAllListeners)==null||f.call(s,"plotly_click"),c.purge(s)}catch(b){console.error("Error purging BandsChessboardPlot:",b)}}},[r,d,l,g]),i.jsx("div",{ref:u,className:M["chessboard-plot"]})},D=({element:l,onTileClick:r})=>{const{loadingMetadata:d}=n.useContext(j),{setChessboardPseudos:g,setBandShift:y}=n.useContext(w),[u,c]=n.useState(!0),[s,h]=n.useState([]),[x,f]=n.useState([]),[b,_]=n.useState([]),[m,p]=n.useState([]);n.useEffect(()=>{l&&(c(!0),h([]),f([]),_([]),p([]),E.fetchBandChessboardData(l).then(e=>{h(e.pseudos),f(e.v_distance.eta),_(e.v10_distance.eta);const o=[e.v_distance.shift,e.v10_distance.shift];p(o)}).catch(e=>{console.error("Error fetching band chessboard data:",e),h([]),f([]),_([]),p([])}).finally(()=>{c(!1)}))},[l]);const t=(e,o,a)=>{g(o),y(m[e][a[0]][a[1]]),r()};return d||u?i.jsx(S,{}):i.jsx("div",{id:"chessboard-page",children:i.jsx("div",{id:L["chessboard-plots"],children:i.jsxs(P,{className:"justify-content-center g-0",children:[i.jsx(v,{children:i.jsx(z,{title:"η<sub>v</sub>",pseudoFilenames:s,values:x,zMax:30,onTileClick:t})}),i.jsx(v,{children:i.jsx(z,{title:"η10",pseudoFilenames:s,values:b,zMax:60,onTileClick:t})})]})})})};export{D as default};
