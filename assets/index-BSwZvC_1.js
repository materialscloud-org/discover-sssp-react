const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-pCXAAw7R.js","assets/index-CqLCn_BU.js","assets/index-QUG939OS.css"])))=>i.map(i=>d[i]);
import{j as e,a2 as _,Q as x,U as i,r as m,_ as C,J as v,D as P,O as y,L as B}from"./index-CqLCn_BU.js";import{P as R,N as D}from"./PlotPaneHeader-Cblvrfdu.js";import{F as c}from"./Form-DCP_Exor.js";const S=({id:r,which:n,pseudos:a,value:o,onSelect:s})=>e.jsxs(c.Group,{id:r,children:[e.jsxs(c.Label,{htmlFor:`${n}-select`,children:[_(n),":"]}),e.jsx(c.Select,{id:`${n}-select`,name:`${n}-select`,value:o,onChange:t=>s(t.target.value),children:a.map(t=>e.jsx("option",{value:t,children:t},t))})]}),N="_bandStructureControls_yt5u8_1",E="_comparedPseudoSelector_yt5u8_1",F="_referencePseudoSelector_yt5u8_1",L="_pseudoShiftRange_yt5u8_1",d={bandStructureControls:N,comparedPseudoSelector:E,referencePseudoSelector:F,pseudoShiftRange:L},w=({pseudos:r,activePseudos:n,onPseudoSelect:a,bandShift:o,onBandShiftChange:s})=>e.jsxs("div",{id:d.bandStructureControls,children:[e.jsxs(x,{className:"gap-3",children:[e.jsx(i,{sm:"6",lg:"12",children:e.jsx(S,{id:d.referencePseudoSelector,which:"reference",pseudos:r,value:n[0],onSelect:t=>{a([t,n[1]]),s(0)}})}),e.jsx(i,{children:e.jsx(S,{id:d.comparedPseudoSelector,which:"compared",pseudos:r,value:n[1],onSelect:t=>{a([n[0],t]),s(0)}})})]}),e.jsxs(c.Group,{children:[e.jsx(c.Label,{htmlFor:d.pseudoShiftRange,children:"Compared bands shift (meV):"}),e.jsxs(x,{style:{alignItems:"center"},children:[e.jsx(i,{xs:"8",sm:"9",md:"10",lg:"6",children:e.jsx(c.Range,{id:d.pseudoShiftRange,name:d.pseudoShiftRange,value:o,min:-5e3,max:5e3,step:1,onChange:t=>s(Number(t.target.value))})}),e.jsx(i,{children:e.jsx(c.Control,{id:d.pseudoShiftNumber,name:d.pseudoShiftNumber,type:"number",value:o.toFixed(0),min:-5e3,max:5e3,step:1,onChange:t=>s(Number(t.target.value))})})]})]})]}),V="_bandStructurePane_1v1as_1",$="_bandStructureContent_1v1as_1",p={bandStructurePane:V,bandStructureContent:$},f={"bands-plot-wrapper":"_bands-plot-wrapper_1hzls_1","bands-plot":"_bands-plot_1hzls_1"},z=({pseudosMetadata:r,bandsPseudosMap:n,activePseudos:a,bandShift:o})=>{const s=m.useRef(null);return m.useEffect(()=>{(async()=>{if(!n||!s.current)return;const t=O(a,n,o,r);if(!t.length)return;let l=null;l=(await C(async()=>{const{BandsVisualiser:u}=await import("./main-pCXAAw7R.js");return{BandsVisualiser:u}},__vite__mapDeps([0,1,2]))).BandsVisualiser,l(s.current,{bandsDataArray:t,settings:{showlegend:!1,yaxis:{range:[-20,20]}}})})()},[a,n,r,o]),e.jsx("div",{id:f["bands-plot-wrapper"],children:e.jsx("div",{ref:s,id:f["bands-plot"]})})},O=(r,n,a,o)=>r.flatMap((s,t)=>{var h;const l=n[s];if(!l)return[];let u=-l.fermiLevel||0;return t===1&&(u+=a/1e3),[{bandsData:k(l,u),traceFormat:{line:{color:t===0?"black":((h=o[s])==null?void 0:h.color)||"red"}}}]}),k=(r,n)=>({...r,paths:r.paths.map(a=>({...a,values:a.values.map(o=>o.map(s=>s+n))}))}),M=()=>{const{element:r}=m.useContext(v),{loadingMetadata:n,pseudosMetadata:a}=m.useContext(P),{loadingPlotData:o,bandsPseudosMap:s,bandsPseudos:t,activeBandsPseudos:l,setActiveBandsPseudos:u,bandShift:h,setBandShift:g}=m.useContext(y),j=o||n,b=Object.keys(s||{}).length>0;return j?e.jsx(B,{}):e.jsxs("div",{id:p.bandStructurePane,children:[e.jsx(R,{title:`Band Structure: ${r}`}),b?e.jsxs("div",{id:p.bandStructureContent,children:[e.jsxs(x,{className:"justify-content-center",children:[e.jsx(i,{lg:3,children:e.jsx(w,{pseudos:t,activePseudos:l,bandShift:h,onPseudoSelect:u,onBandShiftChange:g})}),e.jsx(i,{lg:"auto",children:e.jsx(z,{pseudosMetadata:a,bandsPseudosMap:s,activePseudos:l,bandShift:h})})]}),e.jsx("div",{id:p.bandsNote,children:"Electronic band structure along high-symmetry path. The reference energy (0 eV) corresponds to the Fermi level."})]}):e.jsx(D,{})]})};export{M as default};
