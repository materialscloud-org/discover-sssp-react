const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-0ceV8rEZ.js","assets/index-D8fBEtbQ.js","assets/index-QUG939OS.css"])))=>i.map(i=>d[i]);
import{j as e,a2 as v,Q as m,U as u,r as p,_ as C,J as S,D as B,O as y,L as P}from"./index-D8fBEtbQ.js";import{P as D,N}from"./PlotPaneHeader-DdUDI9oy.js";import{F as c}from"./Form-DApV2E6L.js";const g=({id:r,which:s,pseudos:a,value:o,onSelect:n})=>e.jsxs(c.Group,{id:r,children:[e.jsxs(c.Label,{htmlFor:`${s}-select`,children:[v(s),":"]}),e.jsx(c.Select,{id:`${s}-select`,value:o,onChange:t=>n(t.target.value),children:a.map(t=>e.jsx("option",{value:t,children:t},t))})]}),x={"band-structure-controls":"_band-structure-controls_1qzx4_1","compared-pseudo-selector":"_compared-pseudo-selector_1qzx4_1","reference-pseudo-selector":"_reference-pseudo-selector_1qzx4_1","pseudo-shift-range":"_pseudo-shift-range_1qzx4_1"},w=({pseudos:r,activePseudos:s,onPseudoSelect:a,bandShift:o,onBandShiftChange:n})=>e.jsxs("div",{id:x["band-structure-controls"],children:[e.jsxs(m,{className:"gap-3",children:[e.jsx(u,{sm:"6",lg:"12",children:e.jsx(g,{id:x["reference-pseudo-selector"],which:"reference",pseudos:r,value:s[0],onSelect:t=>{a([t,s[1]]),n(0)}})}),e.jsx(u,{children:e.jsx(g,{id:x["compared-pseudo-selector"],which:"compared",pseudos:r,value:s[1],onSelect:t=>{a([s[0],t]),n(0)}})})]}),e.jsxs(c.Group,{children:[e.jsx(c.Label,{htmlFor:x["pseudo-shift-range"],children:"Compared bands shift (meV):"}),e.jsxs(m,{style:{alignItems:"center"},children:[e.jsx(u,{xs:"8",sm:"9",md:"10",lg:"6",xl:"7",xxl:"8",children:e.jsx(c.Range,{id:x["pseudo-shift-range"],name:"pseudo-shift-range",value:o,min:-5e3,max:5e3,step:1,onChange:t=>n(Number(t.target.value))})}),e.jsx(u,{children:e.jsx(c.Control,{name:"pseudo-shift-number",type:"number",value:o.toFixed(0),min:-5e3,max:5e3,step:1,onChange:t=>n(Number(t.target.value))})})]})]})]}),z="_bandStructurePane_1v1as_1",E="_bandStructureContent_1v1as_1",h={bandStructurePane:z,bandStructureContent:E},j={"bands-plot-wrapper":"_bands-plot-wrapper_1hzls_1","bands-plot":"_bands-plot_1hzls_1"},F=({pseudosMetadata:r,bandsPseudosMap:s,activePseudos:a,bandShift:o})=>{const n=p.useRef(null);return p.useEffect(()=>{(async()=>{if(!s||!n.current)return;const t=L(a,s,o,r);if(!t.length)return;let l=null;l=(await C(async()=>{const{BandsVisualiser:d}=await import("./main-0ceV8rEZ.js");return{BandsVisualiser:d}},__vite__mapDeps([0,1,2]))).BandsVisualiser,l(n.current,{bandsDataArray:t,settings:{showlegend:!1,yaxis:{range:[-20,20]}}})})()},[a,s,r,o]),e.jsx("div",{id:j["bands-plot-wrapper"],children:e.jsx("div",{ref:n,id:j["bands-plot"]})})},L=(r,s,a,o)=>r.flatMap((n,t)=>{var i;const l=s[n];if(!l)return[];let d=-l.fermiLevel||0;return t===1&&(d+=a/1e3),[{bandsData:R(l,d),traceFormat:{line:{color:t===0?"black":((i=o[n])==null?void 0:i.color)||"red"}}}]}),R=(r,s)=>({...r,paths:r.paths.map(a=>({...a,values:a.values.map(o=>o.map(n=>n+s))}))}),O=()=>{const{element:r}=p.useContext(S),{loadingMetadata:s,pseudosMetadata:a}=p.useContext(B),{loadingBandsData:o,bandsPseudosMap:n,bandsPseudos:t,activeBandsPseudos:l,setActiveBandsPseudos:d,bandShift:i,setBandShift:_}=p.useContext(y),b=o||s,f=Object.keys(n||{}).length>0;return b?e.jsx(P,{}):e.jsxs("div",{id:h.bandStructurePane,children:[e.jsx(D,{title:`Band Structure: ${r}`}),f?e.jsxs("div",{id:h.bandStructureContent,children:[e.jsxs(m,{className:"justify-content-center",children:[e.jsx(u,{lg:3,children:e.jsx(w,{pseudos:t,activePseudos:l,bandShift:i,onPseudoSelect:d,onBandShiftChange:_})}),e.jsx(u,{lg:"auto",className:"ms-lg-5",children:e.jsx(F,{pseudosMetadata:a,bandsPseudosMap:n,activePseudos:l,bandShift:i})})]}),e.jsx("div",{id:h.bandsNote,children:"Electronic band structure along high-symmetry path. The reference energy (0 eV) corresponds to the Fermi level."})]}):e.jsx(N,{})]})};export{O as default};
