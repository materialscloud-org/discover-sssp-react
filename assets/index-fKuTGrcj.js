const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-B78w27hc.js","assets/index-egpklC-k.js","assets/index-Otg_OkTg.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{l as he,r as i,V as me,n as te,o as xe,W as pe,p as ge,x as I,y as V,X as ve,Y as je,K as be,u as P,j as s,a as M,z as se,Z as ye,F as Z,$ as X,a0 as we,q as Ee,P as _e,D as z,_ as Ce,J as ne,M as ke,N as Oe,O as Re,L as Ne,Q as K,U as D}from"./index-egpklC-k.js";import{P as Te,N as Fe}from"./PlotPaneHeader-Bc5miGoW.js";import{a as Pe,i as Se,u as W,r as $e,h as q,f as Me}from"./utils-C3T_B0KW.js";import{F as Y}from"./Form-QjVHVAiC.js";const A=2**31-1;function oe(e,n,t){const o=t-Date.now();e.current=o<=A?setTimeout(n,o):setTimeout(()=>oe(e,n,t),A)}function Be(){const e=he(),n=i.useRef();return Pe(()=>clearTimeout(n.current)),i.useMemo(()=>{const t=()=>clearTimeout(n.current);function o(a,l=0){e()&&(t(),l<=A?n.current=setTimeout(a,l):oe(n,a,Date.now()+l))}return{set:o,clear:t,handleRef:n}},[])}const Le=()=>{};function De(e,n,{disabled:t,clickTrigger:o}={}){const a=n||Le;me(e,a,{disabled:t,clickTrigger:o});const l=te(r=>{Se(r)&&a(r)});i.useEffect(()=>{if(t||e==null)return;const r=xe(pe(e));let d=(r.defaultView||window).event;const f=ge(r,"keyup",u=>{if(u===d){d=void 0;return}l(u)});return()=>{f()}},[e,t,l])}const re=i.forwardRef((e,n)=>{const{flip:t,offset:o,placement:a,containerPadding:l,popperConfig:r={},transition:d,runTransition:f}=e,[u,h]=I(),[j,g]=I(),v=V(h,n),x=W(e.container),m=W(e.target),[c,b]=i.useState(!e.show),p=ve(m,u,je({placement:a,enableEvents:!!e.show,containerPadding:l||5,flip:t,offset:o,arrowElement:j,popperConfig:r}));e.show&&c&&b(!1);const _=(...B)=>{b(!0),e.onExited&&e.onExited(...B)},k=e.show||!c;if(De(u,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!k)return null;const{onExit:C,onExiting:E,onEnter:y,onEntering:w,onEntered:T}=e;let R=e.children(Object.assign({},p.attributes.popper,{style:p.styles.popper,ref:v}),{popper:p,placement:a,show:!!e.show,arrowProps:Object.assign({},p.attributes.arrow,{style:p.styles.arrow,ref:g})});return R=$e(d,f,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:R,onExit:C,onExiting:E,onExited:_,onEnter:y,onEntering:w,onEntered:T}),x?be.createPortal(R,x):null});re.displayName="Overlay";const ae=i.forwardRef(({className:e,bsPrefix:n,as:t="div",...o},a)=>(n=P(n,"popover-header"),s.jsx(t,{ref:a,className:M(e,n),...o})));ae.displayName="PopoverHeader";const H=i.forwardRef(({className:e,bsPrefix:n,as:t="div",...o},a)=>(n=P(n,"popover-body"),s.jsx(t,{ref:a,className:M(e,n),...o})));H.displayName="PopoverBody";function le(e,n){let t=e;return e==="left"?t=n?"end":"start":e==="right"&&(t=n?"start":"end"),t}function ie(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Ue=i.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:o,children:a,body:l,arrowProps:r,hasDoneInitialMeasure:d,popper:f,show:u,...h},j)=>{const g=P(e,"popover"),v=se(),[x]=(n==null?void 0:n.split("-"))||[],m=le(x,v);let c=o;return u&&!d&&(c={...o,...ie(f==null?void 0:f.strategy)}),s.jsxs("div",{ref:j,role:"tooltip",style:c,"x-placement":x,className:M(t,g,x&&`bs-popover-${m}`),...h,children:[s.jsx("div",{className:"popover-arrow",...r}),l?s.jsx(H,{children:a}):a]})}),Xe=Object.assign(Ue,{Header:ae,Body:H,POPPER_OFFSET:[0,8]}),ce=i.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:o,children:a,arrowProps:l,hasDoneInitialMeasure:r,popper:d,show:f,...u},h)=>{e=P(e,"tooltip");const j=se(),[g]=(n==null?void 0:n.split("-"))||[],v=le(g,j);let x=o;return f&&!r&&(x={...o,...ie(d==null?void 0:d.strategy)}),s.jsxs("div",{ref:h,style:x,role:"tooltip","x-placement":g,className:M(t,e,`bs-tooltip-${v}`),...u,children:[s.jsx("div",{className:"tooltip-arrow",...l}),s.jsx("div",{className:`${e}-inner`,children:a})]})});ce.displayName="Tooltip";const de=Object.assign(ce,{TOOLTIP_OFFSET:[0,6]});function Ae(e){const n=i.useRef(null),t=P(void 0,"popover"),o=P(void 0,"tooltip"),a=i.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(n.current){if(q(n.current,t))return Xe.POPPER_OFFSET;if(q(n.current,o))return de.TOOLTIP_OFFSET}return[0,0]}}}),[e,t,o]);return[n,[a]]}function Ve(e,n){const{ref:t}=e,{ref:o}=n;e.ref=t.__wrapped||(t.__wrapped=a=>t(X(a))),n.ref=o.__wrapped||(o.__wrapped=a=>o(X(a)))}const ue=i.forwardRef(({children:e,transition:n=Z,popperConfig:t={},rootClose:o=!1,placement:a="top",show:l=!1,...r},d)=>{const f=i.useRef({}),[u,h]=i.useState(null),[j,g]=Ae(r.offset),v=V(d,j),x=n===!0?Z:n||void 0,m=te(c=>{h(c),t==null||t.onFirstUpdate==null||t.onFirstUpdate(c)});return ye(()=>{u&&r.target&&(f.current.scheduleUpdate==null||f.current.scheduleUpdate())},[u,r.target]),i.useEffect(()=>{l||h(null)},[l]),s.jsx(re,{...r,ref:v,popperConfig:{...t,modifiers:g.concat(t.modifiers||[]),onFirstUpdate:m},transition:x,rootClose:o,placement:a,show:l,children:(c,{arrowProps:b,popper:p,show:_})=>{var k,C;Ve(c,b);const E=p==null?void 0:p.placement,y=Object.assign(f.current,{state:p==null?void 0:p.state,scheduleUpdate:p==null?void 0:p.update,placement:E,outOfBoundaries:(p==null||(k=p.state)==null||(C=k.modifiersData.hide)==null?void 0:C.isReferenceHidden)||!1,strategy:t.strategy}),w=!!u;return typeof e=="function"?e({...c,placement:E,show:_,...!n&&_&&{className:"show"},popper:y,arrowProps:b,hasDoneInitialMeasure:w}):i.cloneElement(e,{...c,placement:E,arrowProps:b,popper:y,hasDoneInitialMeasure:w,className:M(e.props.className,!n&&_&&"show"),style:{...e.props.style,...c.style}})}})});ue.displayName="Overlay";function ze(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function G(e,n,t){const[o]=n,a=o.currentTarget,l=o.relatedTarget||o.nativeEvent[t];(!l||l!==a)&&!Ee(a,l)&&e(...n)}_e.oneOf(["click","hover","focus"]);const He=({trigger:e=["hover","focus"],overlay:n,children:t,popperConfig:o={},show:a,defaultShow:l=!1,onToggle:r,delay:d,placement:f,flip:u=f&&f.indexOf("auto")!==-1,...h})=>{const j=i.useRef(null),g=V(j,t.ref),v=Be(),x=i.useRef(""),[m,c]=we(a,l,r),b=ze(d),{onFocus:p,onBlur:_,onClick:k}=typeof t!="function"?i.Children.only(t).props:{},C=O=>{g(X(O))},E=i.useCallback(()=>{if(v.clear(),x.current="show",!b.show){c(!0);return}v.set(()=>{x.current==="show"&&c(!0)},b.show)},[b.show,c,v]),y=i.useCallback(()=>{if(v.clear(),x.current="hide",!b.hide){c(!1);return}v.set(()=>{x.current==="hide"&&c(!1)},b.hide)},[b.hide,c,v]),w=i.useCallback((...O)=>{E(),p==null||p(...O)},[E,p]),T=i.useCallback((...O)=>{y(),_==null||_(...O)},[y,_]),R=i.useCallback((...O)=>{c(!m),k==null||k(...O)},[k,c,m]),B=i.useCallback((...O)=>{G(E,O,"fromElement")},[E]),fe=i.useCallback((...O)=>{G(y,O,"toElement")},[y]),L=e==null?[]:[].concat(e),F={ref:C};return L.indexOf("click")!==-1&&(F.onClick=R),L.indexOf("focus")!==-1&&(F.onFocus=w,F.onBlur=T),L.indexOf("hover")!==-1&&(F.onMouseOver=B,F.onMouseOut=fe),s.jsxs(s.Fragment,{children:[typeof t=="function"?t(F):i.cloneElement(t,F),s.jsx(ue,{...h,show:m,onHide:y,flip:u,placement:f,popperConfig:o,target:j.current,children:n})]})},Ie="_sidebar_s1ndk_1",Ze="_eosNote_s1ndk_1",S={sidebar:Ie,eosNote:Ze},Ke={"eos-plot":"_eos-plot_196cr_1"},J=1e3,$=2,We={displaylogo:!1,responsive:!0,modeBarButtonsToRemove:["zoomIn2d","zoomOut2d","autoScale2d","lasso2d","select2d"]},qe=({configuration:e,eosPseudosMap:n,activePseudos:t})=>{const{pseudosMetadata:o}=i.useContext(z),a=i.useRef(null);return i.useEffect(()=>{if(!a.current)return;let l=null,r=null,d=!1,f=null;const u=Object.values(n).flatMap(g=>g.volumes||[]),h=Math.min(...u),j=Math.max(...u);return(async()=>{if(l=(await Ce(async()=>{const{default:m}=await import("./PlotlyLoader-B78w27hc.js");return{default:m}},__vite__mapDeps([0,1,2,3]))).default,d||!a.current)return;const g=Object.entries(n).filter(([m])=>t.includes(m)).map(([m,c])=>{var _,k;const b=m.split("-Z=")[0],p=((_=o[b])==null?void 0:_.color)||"black";if(m!=="REF"&&c.volumes&&c.energies){const C=c.volumes.map((w,T)=>{var R;return{volume:w,energy:(((R=c.energies)==null?void 0:R[T])||0)-((c==null?void 0:c.E0)||0)}}).sort((w,T)=>w.volume-T.volume),E=C.map(w=>w.volume),y=C.map(w=>w.energy);return{x:E,y,mode:"lines+markers",type:"scatter",line:{shape:"spline"},name:m,marker:{color:p},hovertemplate:m+`<br>Volume = %{x:.${$}f} Å³/atom<br>Energy = %{y:.${$}f} eV/atom`+(c.nu?`<br>ν = ${(k=c.nu)==null?void 0:k.toFixed($)}`:"")+"<extra></extra>",hoverlabel:{align:"left"}}}else{const C=Array.from({length:J},(E,y)=>h+y*(j-h)/(J-1));return{x:C,y:Ye(C,c.V0,0,c.B0,c.B1),mode:"lines",type:"scatter",line:{color:p},name:m,hovertemplate:m+`<br>Volume = %{x:.${$}f} Å³/atom<br>Energy = %{y:.${$}f} eV/atom<extra></extra>`,hoverlabel:{align:"left"}}}}),v={title:{text:Me(e),x:.55,y:.9},xaxis:{title:{text:"Volume [Å³/atom]",standoff:10},showgrid:!1},yaxis:{title:{text:"Energy [eV/atom]"},showgrid:!1},showlegend:!1,margin:{l:70,r:20,t:30,b:40},autosize:!0};r=await l.react(a.current,g,v,We);const x=m=>{m&&l&&l.Plots.resize(m)};f=()=>x(r),window.addEventListener("resize",f),f()})(),()=>{d=!0,f&&window.removeEventListener("resize",f)}},[t,e,n,o]),s.jsx("div",{ref:a,className:Ke["eos-plot"]})},Ye=(e,n,t,o,a)=>e.map(l=>{const r=Math.pow(l/n,.6666666666666666);return t+9*o*n/16*(Math.pow(r-1,3)*a+Math.pow(r-1,2)*(6-4*r))}),Ge="_eosTable_lp80u_1",Je="_gap_lp80u_11",Qe="_nuTd_lp80u_21",N={eosTable:Ge,gap:Je,nuTd:Qe},Q=["SC","BCC","FCC","DC","XO","XO2","XO3","X2O","X2O3","X2O5"],et=({eosPseudosMap:e})=>{const{element:n}=i.useContext(ne);return s.jsxs(ke,{id:N.eosTable,borderless:!0,responsive:!0,className:"text-center",children:[s.jsxs("thead",{children:[s.jsxs("tr",{children:[s.jsx("th",{rowSpan:2,children:"Library"}),s.jsxs("th",{rowSpan:2,children:["Z",s.jsx("sub",{children:"val"})]}),s.jsx("td",{rowSpan:2,className:N.gap}),s.jsx("th",{colSpan:2,children:"Wavefunction Cutoff"}),s.jsx("td",{rowSpan:2,className:N.gap}),s.jsxs("th",{colSpan:10,children:["ν (click ",s.jsx(Oe,{to:"/about",children:"here"})," for details)"]}),s.jsx("td",{rowSpan:2,className:N.gap}),s.jsx("th",{colSpan:2,children:"Average ν"})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Efficiency"}),s.jsx("th",{children:"Precision"}),Q.map(t=>{const o=t.includes("X")?t.replace("X",n):`${n}-${t==="DC"?"Diamond":t}`;return s.jsx("th",{children:tt(o)},t)}),s.jsx("th",{className:"text-nowrap",children:"w/ max"}),s.jsx("th",{className:"text-nowrap",children:"w/o max"})]})]}),s.jsx("tbody",{children:e&&Object.entries(e).filter(([t])=>t.includes("-Z=")).map(([t,o])=>{const[a,l]=t.split("-Z=");return s.jsxs("tr",{children:[s.jsx("td",{children:a}),s.jsx("td",{children:l}),s.jsx("td",{className:N.gap}),Object.entries(e[t].ecutrho).map(([r,d])=>s.jsx("td",{children:d?d.toFixed(2):"-"},r)),s.jsx("td",{className:N.gap}),Q.map(r=>{var u,h;const d=(u=o.configurations[r])==null?void 0:u.nu,f=(h=o.configurations[r])==null?void 0:h.uuid;return s.jsx("td",{style:{backgroundColor:ee(d)},className:d!==void 0?N.nuTd:void 0,children:d!==void 0?s.jsx("a",{href:`https://www.materialscloud.org/explore/sssp-v2/${f}`,target:"_blank",className:"link-dark stretched-link sssp-link",children:d.toFixed(2)}):"-"},r)}),s.jsx("td",{className:N.gap}),Object.entries(e[t].avgNu).map(([r,d])=>s.jsx("td",{style:{backgroundColor:ee(d)},children:d!==void 0?d.toFixed(2):"-"},r))]},t)})})]})},tt=e=>e.split(/(\d+)/).map((n,t)=>/\d+/.test(n)?s.jsx("sub",{children:n},t):n),ee=e=>e===void 0?"white":e<=.1?"#B7E1CD":e>=.33?"#EA9999":"#FFE599",U={"pseudos-checkboxes":"_pseudos-checkboxes_cplvb_1","pseudo-checkbox":"_pseudo-checkbox_cplvb_5"},st=({pseudos:e,activePseudos:n,setActivePseudos:t})=>{const{pseudosMetadata:o}=i.useContext(z),[a,l]=i.useState(n.length===e.length);return s.jsxs("div",{className:U["pseudos-checkboxes"],children:[s.jsx(Y.Check,{type:"checkbox",id:"all",label:"Select all",checked:a,className:U["pseudo-checkbox"],style:{color:"black"},onChange:r=>{t(r.target.checked?e:["REF"]),l(r.target.checked)}}),e.map(r=>{var u;const d=r+(r==="REF"?" (AE average)":""),f=r.split("-Z=")[0];return s.jsx(Y.Check,{type:"checkbox",id:r,label:s.jsx(He,{placement:"right",delay:{show:100,hide:100},offset:[0,10],overlay:s.jsx(de,{children:d}),children:s.jsx("span",{children:d})}),checked:n.includes(r),disabled:r==="REF",className:U["pseudo-checkbox"],style:{color:((u=o[f])==null?void 0:u.color)||"black"},onChange:h=>{t(h.target.checked?[...n,r]:n.filter(j=>j!==r)),l(h.target.checked?n.length+1===e.length:!1)}},r)})]})},lt=()=>{const{element:e}=i.useContext(ne),{loadingMetadata:n}=i.useContext(z),{loadingPlotData:t,eosPseudosMap:o,eosPseudos:a,activeEosPseudos:l,setActiveEosPseudos:r}=i.useContext(Re),d=i.useMemo(()=>{const u={};return Object.entries(o).forEach(([h,j])=>{Object.entries(j.configurations).forEach(([g,v])=>{const x=g.includes("X")?g.replace("X",e):`${e}-${g==="DC"?"Diamond":g}`;u[x]||(u[x]={}),u[x][h]=v})}),u},[e,o]);return t||n?s.jsx(Ne,{}):s.jsxs("div",{id:S.eosPane,children:[s.jsx(Te,{title:`Equation of State: ${e}`}),a.length?s.jsxs("div",{id:S.eosContent,children:[s.jsx("div",{id:S.eosPlots,children:s.jsxs(K,{children:[s.jsx(D,{md:4,lg:3,id:S.sidebar,children:s.jsx(st,{pseudos:a,activePseudos:l,setActivePseudos:r})}),s.jsxs(D,{children:[s.jsx(K,{children:Object.entries(d).map(([u,h])=>s.jsx(D,{lg:6,xl:4,children:s.jsx(qe,{configuration:u,eosPseudosMap:h,activePseudos:l})},u))}),s.jsxs("div",{id:S.eosNote,children:["Comparison of equations of state for different pseudopotentials and their Birch-Murnaghan fits.",s.jsx("br",{}),'"REF (AE average)" refers to the all-electron average values from the reference dataset published in'," ",s.jsxs("a",{href:"https://www.nature.com/articles/s42254-023-00655-3",target:"_blank",children:["Bosoni et al., ",s.jsx("em",{children:"Nature Reviews Physics"})," ",s.jsx("b",{children:"6"}),", 45-58 (2024)"]})]})]})]})}),s.jsx("hr",{}),s.jsx(et,{eosPseudosMap:o})]}):s.jsx(Fe,{})]})};export{lt as default};
