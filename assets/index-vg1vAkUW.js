const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-DqmeJNua.js","assets/index-Bg2AJ1xg.js","assets/index-FuAJ-oR5.css"])))=>i.map(i=>d[i]);
import{r,u as V,j as e,a as F,O as M,P as $,S as A,_ as O,i as k,l as D,C as g}from"./index-Bg2AJ1xg.js";import{F as h,N as I}from"./NoDataMessage-DkzOOLDg.js";const B=r.forwardRef(({bsPrefix:a,fluid:t=!1,as:n="div",className:i,...c},l)=>{const x=V(a,"container"),p=typeof t=="string"?`-${t}`:"-fluid";return e.jsx(n,{ref:l,...c,className:F(i,t?`${x}${p}`:x)})});B.displayName="Container";const w=({id:a,which:t,pseudos:n,value:i,onSelect:c})=>e.jsxs("div",{id:a,children:[e.jsxs(h.Label,{htmlFor:`${t}-select`,children:[M(t),":"]}),e.jsx(h.Select,{id:`${t}-select`,value:i,onChange:l=>c(l.target.value),children:n.map(l=>e.jsx("option",{value:l,children:l},l))})]}),u={"pseudo-selectors-form":"_pseudo-selectors-form_1gter_1","pseudo-shift-range":"_pseudo-shift-range_1gter_1","bands-plot-wrapper":"_bands-plot-wrapper_1gter_1","bands-plot":"_bands-plot_1gter_1","bands-note":"_bands-note_1gter_1","compared-pseudo-selector":"_compared-pseudo-selector_1gter_1","reference-pseudo-selector":"_reference-pseudo-selector_1gter_1"},q=({element:a,chessboardPseudos:t,bandShift:n})=>{const{loadingMetadata:i,pseudosMetadata:c}=r.useContext($),[l,x]=r.useState(!0),[p,y]=r.useState({}),[d,S]=r.useState([]),[f,j]=r.useState(t),[_,m]=r.useState(n),P=r.useRef(null);r.useEffect(()=>{a&&(x(!0),y({}),S([]),A.fetchBandsData(a).then(s=>{y(s);const o=s&&Object.keys(s);S(o)}).catch(s=>{console.error("Error fetching bands data:",s),y({}),S([])}).finally(()=>{x(!1)}))},[a]),r.useEffect(()=>{const s=o=>o.length===2&&o.every(v=>d.includes(v));if(!d.length){j([]);return}j(o=>s(t)?t:s(o)?o:[d[0],d[0]])},[d,t,a]),r.useEffect(()=>m(n),[n]),r.useEffect(()=>{if(p&&P.current){let s=0;const o=f.flatMap((b,E)=>{var N;const C=p[b];return C?(E===0?s=-C.fermiLevel||0:s+=_,[{bandsData:T(C,s),traceFormat:{line:{color:E===0?"black":((N=c[b])==null?void 0:N.color)||"red"}}}]):[]});if(!o.length)return;let v=null;(async()=>(v=(await O(async()=>{const{BandsVisualiser:b}=await import("./main-DqmeJNua.js");return{BandsVisualiser:b}},__vite__mapDeps([0,1,2]))).BandsVisualiser,v(P.current,{bandsDataArray:o,settings:{showlegend:!1,yaxis:{range:[-20,20]}}})))()}},[f,p,c,_]);const L=l||i,R=Object.keys(p||{}).length>0;return L?e.jsx(k,{}):R?e.jsxs(B,{id:"bands-plots",children:[e.jsxs(D,{children:[e.jsx(g,{lg:"3",children:e.jsxs("div",{id:u["pseudo-selectors-form"],children:[e.jsxs(D,{className:"gap-3",children:[e.jsx(g,{sm:"6",lg:"12",children:e.jsx(w,{id:u["reference-pseudo-selector"],which:"reference",pseudos:d,value:f[0],onSelect:s=>{j([s,f[1]]),m(0)}})}),e.jsx(g,{children:e.jsx(w,{id:u["compared-pseudo-selector"],which:"compared",pseudos:d,value:f[1],onSelect:s=>{j([f[0],s]),m(0)}})})]}),e.jsxs(h.Group,{children:[e.jsx(h.Label,{htmlFor:"pseudo-shift-range",children:"Avg. band difference (eV):"}),e.jsxs(D,{style:{alignItems:"center"},children:[e.jsx(g,{xs:"8",sm:"9",md:"10",lg:"6",xl:"7",xxl:"8",children:e.jsx(h.Range,{id:u["pseudo-shift-range"],value:_,min:-5,max:5,step:.001,onChange:s=>m(Number(s.target.value))})}),e.jsx(g,{children:e.jsx(h.Control,{type:"number",value:_,min:-5,max:5,step:.001,onChange:s=>m(Number(s.target.value))})})]})]})]})}),e.jsx(g,{lg:"auto",className:"ms-lg-5",children:e.jsx("div",{id:u["bands-plot-wrapper"],children:e.jsx("div",{ref:P,id:u["bands-plot"]})})})]}),e.jsx("div",{id:u["bands-note"],children:"Electronic band structure along high-symmetry path. The reference energy (0 eV) corresponds to the Fermi level."})]}):e.jsx(I,{})},T=(a,t)=>({...a,paths:a.paths.map(n=>({...n,values:n.values.map(i=>i.map(c=>c+t))}))});export{q as default};
