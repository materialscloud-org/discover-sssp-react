const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-C21g4U3z.js","assets/index-BUzRpRUK.js","assets/index-CcxwSnyO.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as l,P as B,_ as V,j as e,S as $,L as A}from"./index-BUzRpRUK.js";import{P as F}from"./PseudosCheckboxes-DYfzg3o-.js";import{R as C,C as E}from"./Row-Rr_GShOR.js";const N={"eos-plot":"_eos-plot_1kkbs_1"},k=1e3,w=2,z=`(%{x:.${w}f}, %{y:.${w}f})`,T={displaylogo:!1,responsive:!0,modeBarButtonsToRemove:["zoomIn2d","zoomOut2d","autoScale2d","lasso2d","select2d"]},I=(u,a,f,p,i)=>u.map(r=>{const t=Math.pow(r/a,.6666666666666666);return f+9*p*a/16*(Math.pow(t-1,3)*i+Math.pow(t-1,2)*(6-4*t))}),q=({configuration:u,eosPseudosMap:a,activePseudos:f})=>{const{pseudosMetadata:p}=l.useContext(B),i=l.useRef(null);return l.useEffect(()=>{if(!i.current)return;let r=null,t=null,g=!1,d=null;const x=Object.values(a).flatMap(n=>n.volumes||[]),h=Math.min(...x),c=Math.max(...x);return(async()=>{if(r=(await V(async()=>{const{default:s}=await import("./PlotlyLoader-C21g4U3z.js");return{default:s}},__vite__mapDeps([0,1,2,3]))).default,g||!i.current)return;const n=Object.entries(a).filter(([s])=>f.includes(s)).map(([s,o])=>{var P,b;const M=((P=p[s])==null?void 0:P.color)||"black";if(s!=="REF"&&o.volumes&&o.energies){const v=o.volumes.map((m,_)=>{var S;return{volume:m,energy:(((S=o.energies)==null?void 0:S[_])||0)-((o==null?void 0:o.E0)||0)}}).sort((m,_)=>m.volume-_.volume),R=v.map(m=>m.volume),j=v.map(m=>m.energy);return{x:R,y:j,mode:"lines+markers",type:"scatter",line:{shape:"spline"},name:s,marker:{color:M},hovertemplate:z+`<br>ν = ${(b=o.nu)==null?void 0:b.toFixed(w)}`,hoverlabel:{align:"left"}}}else{const v=Array.from({length:k},(R,j)=>h+j*(c-h)/(k-1));return{x:v,y:I(v,o.V0,0,o.B0,o.B1),mode:"lines",type:"scatter",line:{color:M},name:s,hovertemplate:z}}}),y={title:{text:u,x:.55,y:.9},xaxis:{title:{text:"Volume [Å³/atom]"},showgrid:!1},yaxis:{title:{text:"Energy [eV/atom]"},showgrid:!1},showlegend:!1,margin:{l:70,r:20,t:30,b:60},autosize:!0};t=await r.react(i.current,n,y,T);const L=s=>{s&&r.Plots.resize(s)};d=()=>L(t),window.addEventListener("resize",d),d()})(),()=>{if(g=!0,d&&window.removeEventListener("resize",d),r&&t)try{r.purge(t)}catch(n){console.error("Error purging EosPlot:",n)}}},[f]),e.jsx("div",{ref:i,className:N["eos-plot"]})},O={"eos-note":"_eos-note_3j6lo_1"},J=({element:u,activeLibrary:a})=>{const[f,p]=l.useState(!0),{loadingMetadata:i}=l.useContext(B),[r,t]=l.useState(),[g,d]=l.useState([]),[x,h]=l.useState([]);return l.useEffect(()=>{u&&$.fetchEosData(a).then(c=>{const n=c[u];t(n);const y=Object.keys(Object.values(n)[0]);d(y),h(y)}).catch(c=>{console.error("Error fetching EOS data:",c),t(void 0)}).finally(()=>p(!1))},[a,u]),f||i?e.jsx(A,{}):r?e.jsxs("div",{id:"eos-plots",children:[e.jsxs(C,{children:[e.jsx(E,{md:4,lg:3,xxl:2,className:O["pseudo-controls"],children:e.jsx(F,{pseudos:g,activePseudos:x,setActivePseudos:h})}),e.jsx(E,{children:e.jsx(C,{children:Object.entries(r).map(([c,n])=>e.jsx(E,{lg:6,xl:4,xxl:3,children:e.jsx(q,{configuration:c,eosPseudosMap:n,activePseudos:x})},c))})})]}),e.jsx("div",{id:O["eos-note"],children:'Comparison of the Birch-Murnaghan fit of the pseudopotential equation of state ("Fit") with the reference all-electron results ("Wien2k").'})]}):e.jsx("span",{children:"No data available"})};export{J as default};
