const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-Cmh1i-Xe.js","assets/index-B4xB9-IS.js","assets/index-CcxwSnyO.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as a,P as O,_ as V,j as e,S as $,L as A}from"./index-B4xB9-IS.js";import{R as S,P as F}from"./PseudosCheckboxes-ZCF_dBxP.js";import{C as _}from"./Col-CRGjvHyF.js";const N={"eos-plot":"_eos-plot_1kkbs_1"},C=1e3,E=2,k=`(%{x:.${E}f}, %{y:.${E}f})`,T={displaylogo:!1,responsive:!0,modeBarButtonsToRemove:["zoomIn2d","zoomOut2d","autoScale2d","lasso2d","select2d"]},I=(u,d,f,x,n)=>u.map(o=>{const r=Math.pow(o/d,.6666666666666666);return f+9*x*d/16*(Math.pow(r-1,3)*n+Math.pow(r-1,2)*(6-4*r))}),q=({configuration:u,eosPseudosMap:d,activePseudos:f})=>{const{pseudosMetadata:x}=a.useContext(O),n=a.useRef(null);return a.useEffect(()=>{if(!n.current)return;let o=null,r=null,g=!1,i=null;const h=Object.values(d).flatMap(c=>c.volumes||[]),l=Math.min(...h),p=Math.max(...h);return(async()=>{if(o=(await V(async()=>{const{default:t}=await import("./PlotlyLoader-Cmh1i-Xe.js");return{default:t}},__vite__mapDeps([0,1,2,3]))).default,g||!n.current)return;const c=Object.entries(d).filter(([t])=>f.includes(t)).map(([t,s])=>{var b,M;const w=((b=x[t])==null?void 0:b.color)||"black";if(t!=="REF"&&s.volumes&&s.energies){const v=s.volumes.map((m,j)=>{var R;return{volume:m,energy:(((R=s.energies)==null?void 0:R[j])||0)-((s==null?void 0:s.E0)||0)}}).sort((m,j)=>m.volume-j.volume),P=v.map(m=>m.volume),y=v.map(m=>m.energy);return{x:P,y,mode:"lines+markers",type:"scatter",line:{shape:"spline"},name:t,marker:{color:w},hovertemplate:k+`<br>ν = ${(M=s.nu)==null?void 0:M.toFixed(E)}`,hoverlabel:{align:"left"}}}else{const v=Array.from({length:C},(P,y)=>l+y*(p-l)/(C-1));return{x:v,y:I(v,s.V0,0,s.B0,s.B1),mode:"lines",type:"scatter",line:{color:w},name:t,hovertemplate:k}}}),B={title:{text:u,x:.55,y:.9},xaxis:{title:{text:"Volume [Å³/atom]"},showgrid:!1},yaxis:{title:{text:"Energy [eV/atom]"},showgrid:!1},showlegend:!1,margin:{l:70,r:20,t:30,b:60},autosize:!0};r=await o.react(n.current,c,B,T);const L=t=>{t&&o.Plots.resize(t)};i=()=>L(r),window.addEventListener("resize",i),i()})(),()=>{if(g=!0,i&&window.removeEventListener("resize",i),o&&r)try{o.purge(r)}catch(c){console.error("Error purging EosPlot:",c)}}},[f]),e.jsx("div",{ref:n,className:N["eos-plot"]})},z={"eos-note":"_eos-note_3j6lo_1"},J=({element:u})=>{const[d,f]=a.useState(!0),{loadingMetadata:x}=a.useContext(O),[n,o]=a.useState(),[r,g]=a.useState([]),[i,h]=a.useState([]);return a.useEffect(()=>{u&&$.fetchEosData().then(l=>{const p=l[u];o(p);const c=Object.keys(Object.values(p)[0]);g(c),h(c)}).catch(l=>{console.error("Error fetching EOS data:",l),o(void 0)}).finally(()=>f(!1))},[u]),d||x?e.jsx(A,{}):n?e.jsxs("div",{id:"eos-plots",children:[e.jsxs(S,{children:[e.jsx(_,{md:4,lg:3,xxl:2,className:z["pseudo-controls"],children:e.jsx(F,{pseudos:r,activePseudos:i,setActivePseudos:h})}),e.jsx(_,{children:e.jsx(S,{children:Object.entries(n).map(([l,p])=>e.jsx(_,{lg:6,xl:4,xxl:3,children:e.jsx(q,{configuration:l,eosPseudosMap:p,activePseudos:i})},l))})})]}),e.jsx("div",{id:z["eos-note"],children:'Comparison of the Birch-Murnaghan fit of the pseudopotential equation of state ("Fit") with the reference all-electron results ("Wien2k").'})]}):e.jsx("span",{children:"No data available"})};export{J as default};
