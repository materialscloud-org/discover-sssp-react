const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-CSwpq6xq.js","assets/index-woou4hVf.js","assets/index-FuAJ-oR5.css"])))=>i.map(i=>d[i]);
import{j as e,O as V,r as t,P as F,S as M,_ as N,k,Q as A,R as E,C as p}from"./index-woou4hVf.js";import{F as f,N as O}from"./NoDataMessage-0Iu3XdJR.js";const B=({id:n,which:r,pseudos:o,value:g,onSelect:i})=>e.jsxs("div",{id:n,children:[e.jsxs(f.Label,{htmlFor:`${r}-select`,children:[V(r),":"]}),e.jsx(f.Select,{id:`${r}-select`,value:g,onChange:l=>i(l.target.value),children:o.map(l=>e.jsx("option",{value:l,children:l},l))})]}),d={"pseudo-selectors-form":"_pseudo-selectors-form_1gter_1","pseudo-shift-range":"_pseudo-shift-range_1gter_1","bands-plot-wrapper":"_bands-plot-wrapper_1gter_1","bands-plot":"_bands-plot_1gter_1","bands-note":"_bands-note_1gter_1","compared-pseudo-selector":"_compared-pseudo-selector_1gter_1","reference-pseudo-selector":"_reference-pseudo-selector_1gter_1"},z=({element:n,chessboardPseudos:r,bandShift:o})=>{const{loadingMetadata:g,pseudosMetadata:i}=t.useContext(F),[l,P]=t.useState(!0),[x,b]=t.useState({}),[c,y]=t.useState([]),[u,m]=t.useState(r),[j,h]=t.useState(o),S=t.useRef(null);t.useEffect(()=>{n&&(P(!0),b({}),y([]),M.fetchBandsData(n).then(s=>{b(s);const a=s&&Object.keys(s);y(a)}).catch(s=>{console.error("Error fetching bands data:",s),b({}),y([])}).finally(()=>{P(!1)}))},[n]),t.useEffect(()=>{const s=a=>a.length===2&&a.every(_=>c.includes(_));if(!c.length){m([]);return}m(a=>s(r)?r:s(a)?a:[c[0],c[0]])},[c,r,n]),t.useEffect(()=>h(o),[o]),t.useEffect(()=>{if(x&&S.current){let s=0;const a=u.flatMap((v,C)=>{var w;const D=x[v];return D?(C===0?s=-D.fermiLevel:s+=j,[{bandsData:I(D,s),traceFormat:{line:{color:C===0?"black":((w=i[v])==null?void 0:w.color)||"red"}}}]):[]});if(!a.length)return;let _=null;(async()=>(_=(await N(async()=>{const{BandsVisualiser:v}=await import("./main-CSwpq6xq.js");return{BandsVisualiser:v}},__vite__mapDeps([0,1,2]))).BandsVisualiser,_(S.current,{bandsDataArray:a,settings:{showlegend:!1,yaxis:{range:[-20,20]}}})))()}},[u,x,i,j]);const L=l||g,R=Object.keys(x||{}).length>0;return L?e.jsx(k,{}):R?e.jsxs(A,{id:"bands-plots",children:[e.jsxs(E,{children:[e.jsx(p,{lg:"3",children:e.jsxs("div",{id:d["pseudo-selectors-form"],children:[e.jsxs(E,{className:"gap-3",children:[e.jsx(p,{sm:"6",lg:"12",children:e.jsx(B,{id:d["reference-pseudo-selector"],which:"reference",pseudos:c,value:u[0],onSelect:s=>{m([s,u[1]]),h(0)}})}),e.jsx(p,{children:e.jsx(B,{id:d["compared-pseudo-selector"],which:"compared",pseudos:c,value:u[1],onSelect:s=>{m([u[0],s]),h(0)}})})]}),e.jsxs(f.Group,{children:[e.jsx(f.Label,{htmlFor:"pseudo-shift-range",children:"Avg. band difference (eV):"}),e.jsxs(E,{style:{alignItems:"center"},children:[e.jsx(p,{xs:"8",sm:"9",md:"10",lg:"6",xl:"7",xxl:"8",children:e.jsx(f.Range,{id:d["pseudo-shift-range"],value:j,min:-5,max:5,step:.001,onChange:s=>h(Number(s.target.value))})}),e.jsx(p,{children:e.jsx(f.Control,{type:"number",value:j,min:-5,max:5,step:.001,onChange:s=>h(Number(s.target.value))})})]})]})]})}),e.jsx(p,{lg:"auto",className:"ms-lg-5",children:e.jsx("div",{id:d["bands-plot-wrapper"],children:e.jsx("div",{ref:S,id:d["bands-plot"]})})})]}),e.jsx("div",{id:d["bands-note"],children:"Electronic band structure along high-symmetry path. The reference energy (0 eV) corresponds to the Fermi level."})]}):e.jsx(O,{})},I=(n,r)=>({...n,paths:n.paths.map(o=>({...o,values:o.values.map(g=>g.map(i=>i+r))}))});export{z as default};
