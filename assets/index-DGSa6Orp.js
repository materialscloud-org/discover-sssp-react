const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-CdRwq4cU.js","assets/index-6GF4u5_S.js","assets/index-D4szypLu.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as p,_ as P,j as a,J as k,D as v,O as j,L as E,Q as L,U as z}from"./index-6GF4u5_S.js";import{P as M,N as B}from"./PlotPaneHeader-CiQkX6OJ.js";const R="_chessboardsPage_uwk1b_1",D={chessboardsPage:R},N={"chessboard-plot":"_chessboard-plot_14kug_1"},T={responsive:!0,displayModeBar:!1,scrollZoom:!1},C=({title:c,pseudoFilenames:s,values:d,zMax:g,onTileClick:m})=>{const x=p.useRef(null);return p.useEffect(()=>{if(!x.current)return;let r=null,t=null,u=!1,i=null;return(async()=>{if(r=(await P(async()=>{const{default:e}=await import("./PlotlyLoader-CdRwq4cU.js");return{default:e}},__vite__mapDeps([0,1,2,3]))).default,u||!x.current)return;const f=d.map((e,o)=>e.map((n,l)=>o===l?null:n)),h=d.map((e,o)=>e.map((n,l)=>o===l?1:null)),_=[{z:f,x:s,y:s,zmin:0,zmax:g,colorscale:[[0,"#157347"],[.5,"#f0a17c"],[1,"#870000"]],type:"heatmap",hoverongaps:!1,hovertemplate:`<b>x:</b> %{x}<br /><b>y:</b> %{y}<br><b>Max ${c}:</b> %{z:.2f}<extra></extra>`},{z:h,x:s,y:s,zmin:0,zmax:1,colorscale:[[0,"#ffffff"],[1,"#ffffff"]],showscale:!1,type:"heatmap",hoverinfo:"skip"}],y={xaxis:{side:"top",title:{text:c,standoff:10,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45},yaxis:{autorange:"reversed",title:{text:`Max ${c}`,standoff:10,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45},hoverlabel:{namelength:0},annotations:d.map((e,o)=>e.map((n,l)=>({x:s[l],y:s[o],text:n>=100?n.toExponential(0).toString().replace("e+","e"):n.toFixed(1),showarrow:!1,font:{color:"white",size:Math.max(8,24-s.length)}})).filter((n,l)=>l!==o)).flat(),margin:{t:160,r:110,b:40,l:160},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};t=await r.react(x.current,_,y,T),t.on("plotly_click",e=>{const{x:o,y:n,pointIndex:l}=e.points[0],w=c=="v"?0:1;m(w,[n,o],l)});const b=e=>{if(!e)return;const o={width:e.offsetWidth,height:e.offsetWidth};r&&r.relayout(e,o)};return i=()=>b(t),window.addEventListener("resize",i),b(t),()=>{var e;u=!0,i&&window.removeEventListener("resize",i),t&&((e=t.removeAllListeners)==null||e.call(t,"plotly_click"))}})(),()=>{var f;if(u=!0,i&&window.removeEventListener("resize",i),r&&t)try{(f=t.removeAllListeners)==null||f.call(t,"plotly_click"),r.purge(t)}catch(h){console.error("Error purging BandsChessboardPlot:",h)}}},[s,d,c,g,m]),a.jsx("div",{ref:x,className:N["chessboard-plot"]})},H=({onTileClick:c})=>{const{element:s}=p.useContext(k),{loadingMetadata:d}=p.useContext(v),{loadingChessboardData:g,setChessboardPseudos:m,setBandShift:x,pseudoFilenames:r,etaV:t,etaV10:u,shifts:i}=p.useContext(j),f=(_,y,b)=>{m(y),x(i[_][b[0]][b[1]]),c()},h=t.length>0&&u.length>0;return d||g?a.jsx(E,{}):a.jsxs("div",{id:D.chessboardsPage,children:[a.jsx(M,{title:`Band Chessboards: ${s}`}),h?a.jsxs(L,{className:"justify-content-center g-0",children:[a.jsx(z,{children:a.jsx(C,{title:"η<sub>v</sub>",pseudoFilenames:r,values:t,zMax:30,onTileClick:f})}),a.jsx(z,{children:a.jsx(C,{title:"η10",pseudoFilenames:r,values:u,zMax:60,onTileClick:f})})]}):a.jsx(B,{})]})};export{H as default};
