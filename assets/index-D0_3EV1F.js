const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-BSJi9Xtv.js","assets/index-BaRx3iXj.js","assets/index-CdNc5vnI.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{l as ue,r as a,U as de,n as J,o as fe,V as he,p as me,x as V,y as z,W as pe,X as ge,K as ve,u as F,j as i,a as N,z as ee,Y as xe,F as A,Z as L,$ as ye,q as Ee,P as we,D as H,_ as Re,S as ke,L as Oe,O as K,Q as B}from"./index-BaRx3iXj.js";import{F as W,N as _e}from"./NoDataMessage-BuoMfKrp.js";import{a as be,i as je,u as q,r as Ce,h as X}from"./hasClass-CJPrCBv-.js";const D=2**31-1;function te(e,t,s){const o=s-Date.now();e.current=o<=D?setTimeout(t,o):setTimeout(()=>te(e,t,s),D)}function Te(){const e=ue(),t=a.useRef();return be(()=>clearTimeout(t.current)),a.useMemo(()=>{const s=()=>clearTimeout(t.current);function o(r,l=0){e()&&(s(),l<=D?t.current=setTimeout(r,l):te(t,r,Date.now()+l))}return{set:o,clear:s,handleRef:t}},[])}const Fe=()=>{};function Me(e,t,{disabled:s,clickTrigger:o}={}){const r=t||Fe;de(e,r,{disabled:s,clickTrigger:o});const l=J(n=>{je(n)&&r(n)});a.useEffect(()=>{if(s||e==null)return;const n=fe(he(e));let f=(n.defaultView||window).event;const u=me(n,"keyup",d=>{if(d===f){f=void 0;return}l(d)});return()=>{u()}},[e,s,l])}const se=a.forwardRef((e,t)=>{const{flip:s,offset:o,placement:r,containerPadding:l,popperConfig:n={},transition:f,runTransition:u}=e,[d,h]=V(),[y,g]=V(),E=z(h,t),v=q(e.container),m=q(e.target),[c,w]=a.useState(!e.show),p=pe(m,d,ge({placement:r,enableEvents:!!e.show,containerPadding:l||5,flip:s,offset:o,arrowElement:y,popperConfig:n}));e.show&&c&&w(!1);const O=(...S)=>{w(!0),e.onExited&&e.onExited(...S)},R=e.show||!c;if(Me(d,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!R)return null;const{onExit:j,onExiting:k,onEnter:x,onEntering:b,onEntered:T}=e;let M=e.children(Object.assign({},p.attributes.popper,{style:p.styles.popper,ref:E}),{popper:p,placement:r,show:!!e.show,arrowProps:Object.assign({},p.attributes.arrow,{style:p.styles.arrow,ref:g})});return M=Ce(f,u,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:M,onExit:j,onExiting:k,onExited:O,onEnter:x,onEntering:b,onEntered:T}),v?ve.createPortal(M,v):null});se.displayName="Overlay";const ne=a.forwardRef(({className:e,bsPrefix:t,as:s="div",...o},r)=>(t=F(t,"popover-header"),i.jsx(s,{ref:r,className:N(e,t),...o})));ne.displayName="PopoverHeader";const I=a.forwardRef(({className:e,bsPrefix:t,as:s="div",...o},r)=>(t=F(t,"popover-body"),i.jsx(s,{ref:r,className:N(e,t),...o})));I.displayName="PopoverBody";function oe(e,t){let s=e;return e==="left"?s=t?"end":"start":e==="right"&&(s=t?"start":"end"),s}function re(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Ne=a.forwardRef(({bsPrefix:e,placement:t="right",className:s,style:o,children:r,body:l,arrowProps:n,hasDoneInitialMeasure:f,popper:u,show:d,...h},y)=>{const g=F(e,"popover"),E=ee(),[v]=(t==null?void 0:t.split("-"))||[],m=oe(v,E);let c=o;return d&&!f&&(c={...o,...re(u==null?void 0:u.strategy)}),i.jsxs("div",{ref:y,role:"tooltip",style:c,"x-placement":v,className:N(s,g,v&&`bs-popover-${m}`),...h,children:[i.jsx("div",{className:"popover-arrow",...n}),l?i.jsx(I,{children:r}):r]})}),Se=Object.assign(Ne,{Header:ne,Body:I,POPPER_OFFSET:[0,8]}),ae=a.forwardRef(({bsPrefix:e,placement:t="right",className:s,style:o,children:r,arrowProps:l,hasDoneInitialMeasure:n,popper:f,show:u,...d},h)=>{e=F(e,"tooltip");const y=ee(),[g]=(t==null?void 0:t.split("-"))||[],E=oe(g,y);let v=o;return u&&!n&&(v={...o,...re(f==null?void 0:f.strategy)}),i.jsxs("div",{ref:h,style:v,role:"tooltip","x-placement":g,className:N(s,e,`bs-tooltip-${E}`),...d,children:[i.jsx("div",{className:"tooltip-arrow",...l}),i.jsx("div",{className:`${e}-inner`,children:r})]})});ae.displayName="Tooltip";const le=Object.assign(ae,{TOOLTIP_OFFSET:[0,6]});function Pe(e){const t=a.useRef(null),s=F(void 0,"popover"),o=F(void 0,"tooltip"),r=a.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(X(t.current,s))return Se.POPPER_OFFSET;if(X(t.current,o))return le.TOOLTIP_OFFSET}return[0,0]}}}),[e,s,o]);return[t,[r]]}function Be(e,t){const{ref:s}=e,{ref:o}=t;e.ref=s.__wrapped||(s.__wrapped=r=>s(L(r))),t.ref=o.__wrapped||(o.__wrapped=r=>o(L(r)))}const ce=a.forwardRef(({children:e,transition:t=A,popperConfig:s={},rootClose:o=!1,placement:r="top",show:l=!1,...n},f)=>{const u=a.useRef({}),[d,h]=a.useState(null),[y,g]=Pe(n.offset),E=z(f,y),v=t===!0?A:t||void 0,m=J(c=>{h(c),s==null||s.onFirstUpdate==null||s.onFirstUpdate(c)});return xe(()=>{d&&n.target&&(u.current.scheduleUpdate==null||u.current.scheduleUpdate())},[d,n.target]),a.useEffect(()=>{l||h(null)},[l]),i.jsx(se,{...n,ref:E,popperConfig:{...s,modifiers:g.concat(s.modifiers||[]),onFirstUpdate:m},transition:v,rootClose:o,placement:r,show:l,children:(c,{arrowProps:w,popper:p,show:O})=>{var R,j;Be(c,w);const k=p==null?void 0:p.placement,x=Object.assign(u.current,{state:p==null?void 0:p.state,scheduleUpdate:p==null?void 0:p.update,placement:k,outOfBoundaries:(p==null||(R=p.state)==null||(j=R.modifiersData.hide)==null?void 0:j.isReferenceHidden)||!1,strategy:s.strategy}),b=!!d;return typeof e=="function"?e({...c,placement:k,show:O,...!t&&O&&{className:"show"},popper:x,arrowProps:w,hasDoneInitialMeasure:b}):a.cloneElement(e,{...c,placement:k,arrowProps:w,popper:x,hasDoneInitialMeasure:b,className:N(e.props.className,!t&&O&&"show"),style:{...e.props.style,...c.style}})}})});ce.displayName="Overlay";function $e(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function Y(e,t,s){const[o]=t,r=o.currentTarget,l=o.relatedTarget||o.nativeEvent[s];(!l||l!==r)&&!Ee(r,l)&&e(...t)}we.oneOf(["click","hover","focus"]);const Le=({trigger:e=["hover","focus"],overlay:t,children:s,popperConfig:o={},show:r,defaultShow:l=!1,onToggle:n,delay:f,placement:u,flip:d=u&&u.indexOf("auto")!==-1,...h})=>{const y=a.useRef(null),g=z(y,s.ref),E=Te(),v=a.useRef(""),[m,c]=ye(r,l,n),w=$e(f),{onFocus:p,onBlur:O,onClick:R}=typeof s!="function"?a.Children.only(s).props:{},j=_=>{g(L(_))},k=a.useCallback(()=>{if(E.clear(),v.current="show",!w.show){c(!0);return}E.set(()=>{v.current==="show"&&c(!0)},w.show)},[w.show,c,E]),x=a.useCallback(()=>{if(E.clear(),v.current="hide",!w.hide){c(!1);return}E.set(()=>{v.current==="hide"&&c(!1)},w.hide)},[w.hide,c,E]),b=a.useCallback((..._)=>{k(),p==null||p(..._)},[k,p]),T=a.useCallback((..._)=>{x(),O==null||O(..._)},[x,O]),M=a.useCallback((..._)=>{c(!m),R==null||R(..._)},[R,c,m]),S=a.useCallback((..._)=>{Y(k,_,"fromElement")},[k]),ie=a.useCallback((..._)=>{Y(x,_,"toElement")},[x]),P=e==null?[]:[].concat(e),C={ref:j};return P.indexOf("click")!==-1&&(C.onClick=M),P.indexOf("focus")!==-1&&(C.onFocus=b,C.onBlur=T),P.indexOf("hover")!==-1&&(C.onMouseOver=S,C.onMouseOut=ie),i.jsxs(i.Fragment,{children:[typeof s=="function"?s(C):a.cloneElement(s,C),i.jsx(ce,{...h,show:m,onHide:x,flip:d,placement:u,popperConfig:o,target:y.current,children:t})]})},$={"pseudos-checkboxes":"_pseudos-checkboxes_cplvb_1","pseudo-checkbox":"_pseudo-checkbox_cplvb_5"},De=({pseudos:e,activePseudos:t,setActivePseudos:s})=>{const{pseudosMetadata:o}=a.useContext(H),[r,l]=a.useState(!1);return a.useEffect(()=>{l(t.length===e.length)},[t,e.length]),i.jsxs("div",{className:$["pseudos-checkboxes"],children:[i.jsx(W.Check,{type:"checkbox",id:"all",label:"Select all",checked:r,className:$["pseudo-checkbox"],style:{color:"black"},onChange:n=>{s(n.target.checked?e:["REF"]),l(n.target.checked)}}),e.map(n=>{var u;const f=n+(n==="REF"?" (AE average)":"");return i.jsx(W.Check,{type:"checkbox",id:n,label:i.jsx(Le,{placement:"right",delay:{show:100,hide:100},offset:[0,10],overlay:i.jsx(le,{children:f}),children:i.jsx("span",{children:f})}),checked:t.includes(n),disabled:n==="REF",className:$["pseudo-checkbox"],style:{color:((u=o[n])==null?void 0:u.color)||"black"},onChange:d=>{s(d.target.checked?[...t,n]:t.filter(h=>h!==n)),l(d.target.checked?t.length+1===e.length:!1)}},n)})]})},Ue={"eos-plot":"_eos-plot_1kkbs_1"},Q=1e3,U=2,Z=`(%{x:.${U}f}, %{y:.${U}f})`,ze={displaylogo:!1,responsive:!0,modeBarButtonsToRemove:["zoomIn2d","zoomOut2d","autoScale2d","lasso2d","select2d"]},He=(e,t,s,o,r)=>e.map(l=>{const n=Math.pow(l/t,.6666666666666666);return s+9*o*t/16*(Math.pow(n-1,3)*r+Math.pow(n-1,2)*(6-4*n))}),Ie=({configuration:e,eosPseudosMap:t,activePseudos:s})=>{const{pseudosMetadata:o}=a.useContext(H),r=a.useRef(null);return a.useEffect(()=>{if(!r.current)return;let l=null,n=null,f=!1,u=null;const d=Object.values(t).flatMap(g=>g.volumes||[]),h=Math.min(...d),y=Math.max(...d);return(async()=>{if(l=(await Re(async()=>{const{default:m}=await import("./PlotlyLoader-BSJi9Xtv.js");return{default:m}},__vite__mapDeps([0,1,2,3]))).default,f||!r.current)return;const g=Object.entries(t).filter(([m])=>s.includes(m)).map(([m,c])=>{var p,O;const w=((p=o[m])==null?void 0:p.color)||"black";if(m!=="REF"&&c.volumes&&c.energies){const R=c.volumes.map((x,b)=>{var T;return{volume:x,energy:(((T=c.energies)==null?void 0:T[b])||0)-((c==null?void 0:c.E0)||0)}}).sort((x,b)=>x.volume-b.volume),j=R.map(x=>x.volume),k=R.map(x=>x.energy);return{x:j,y:k,mode:"lines+markers",type:"scatter",line:{shape:"spline"},name:m,marker:{color:w},hovertemplate:Z+`<br>ν = ${(O=c.nu)==null?void 0:O.toFixed(U)}`,hoverlabel:{align:"left"}}}else{const R=Array.from({length:Q},(j,k)=>h+k*(y-h)/(Q-1));return{x:R,y:He(R,c.V0,0,c.B0,c.B1),mode:"lines",type:"scatter",line:{color:w},name:m,hovertemplate:Z}}}),E={title:{text:e,x:.55,y:.9},xaxis:{title:{text:"Volume [Å³/atom]"},showgrid:!1},yaxis:{title:{text:"Energy [eV/atom]"},showgrid:!1},showlegend:!1,margin:{l:70,r:20,t:30,b:60},autosize:!0};n=await l.react(r.current,g,E,ze);const v=m=>{m&&l.Plots.resize(m)};u=()=>v(n),window.addEventListener("resize",u),u()})(),()=>{if(f=!0,u&&window.removeEventListener("resize",u),l&&n)try{l.purge(n)}catch(g){console.error("Error purging EosPlot:",g)}}},[s]),i.jsx("div",{ref:r,className:Ue["eos-plot"]})},G={"eos-note":"_eos-note_3j6lo_1"},We=({element:e})=>{const{loadingMetadata:t}=a.useContext(H),[s,o]=a.useState(!0),[r,l]=a.useState({}),[n,f]=a.useState([]),[u,d]=a.useState([]);return a.useEffect(()=>{e&&(o(!0),l({}),f([]),d([]),ke.fetchEosData().then(h=>{const y=h[e];l(y);const g=Object.keys(Object.values(y)[0]);f(g),d(g)}).catch(h=>{console.error("Error fetching EOS data:",h),l({}),f([]),d([])}).finally(()=>o(!1)))},[e]),s||t?i.jsx(Oe,{}):n.length?i.jsxs("div",{id:"eos-plots",children:[i.jsxs(K,{children:[i.jsx(B,{md:4,lg:3,xxl:2,className:G["pseudo-controls"],children:i.jsx(De,{pseudos:n,activePseudos:u,setActivePseudos:d})}),i.jsx(B,{children:i.jsx(K,{children:Object.entries(r).map(([h,y])=>i.jsx(B,{lg:6,xl:4,xxl:3,children:i.jsx(Ie,{configuration:h,eosPseudosMap:y,activePseudos:u})},h))})})]}),i.jsx("div",{id:G["eos-note"],children:'Comparison of the Birch-Murnaghan fit of the pseudopotential equation of state ("Fit") with the reference all-electron results ("Wien2k").'})]}):i.jsx(_e,{})};export{We as default};
