const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-D5SAVL54.js","assets/index-C-79EgsX.js","assets/index-DlJGZWaF.css"])))=>i.map(i=>d[i]);
import{j as e,a2 as _,Q as x,U as i,r as h,_ as b,D as v,O as y,L as B,a3 as C}from"./index-C-79EgsX.js";import{F as c,N as S}from"./NoDataMessage-zY5T8KSZ.js";const m=({id:a,which:t,pseudos:r,value:o,onSelect:n})=>e.jsxs(c.Group,{id:a,children:[e.jsxs(c.Label,{htmlFor:`${t}-select`,children:[_(t),":"]}),e.jsx(c.Select,{id:`${t}-select`,value:o,onChange:s=>n(s.target.value),children:r.map(s=>e.jsx("option",{value:s,children:s},s))})]}),u={"band-structure-controls":"_band-structure-controls_1qzx4_1","compared-pseudo-selector":"_compared-pseudo-selector_1qzx4_1","reference-pseudo-selector":"_reference-pseudo-selector_1qzx4_1","pseudo-shift-range":"_pseudo-shift-range_1qzx4_1"},D=({pseudos:a,activePseudos:t,onPseudoSelect:r,bandShift:o,onBandShiftChange:n})=>e.jsxs("div",{id:u["band-structure-controls"],children:[e.jsxs(x,{className:"gap-3",children:[e.jsx(i,{sm:"6",lg:"12",children:e.jsx(m,{id:u["reference-pseudo-selector"],which:"reference",pseudos:a,value:t[0],onSelect:s=>{r([s,t[1]]),n(0)}})}),e.jsx(i,{children:e.jsx(m,{id:u["compared-pseudo-selector"],which:"compared",pseudos:a,value:t[1],onSelect:s=>{r([t[0],s]),n(0)}})})]}),e.jsxs(c.Group,{children:[e.jsx(c.Label,{htmlFor:u["pseudo-shift-range"],children:"Compared bands shift (meV):"}),e.jsxs(x,{style:{alignItems:"center"},children:[e.jsx(i,{xs:"8",sm:"9",md:"10",lg:"6",xl:"7",xxl:"8",children:e.jsx(c.Range,{id:u["pseudo-shift-range"],name:"pseudo-shift-range",value:o,min:-5e3,max:5e3,step:1,onChange:s=>n(Number(s.target.value))})}),e.jsx(i,{children:e.jsx(c.Control,{name:"pseudo-shift-number",type:"number",value:o.toFixed(0),min:-5e3,max:5e3,step:1,onChange:s=>n(Number(s.target.value))})})]})]})]}),w={"bands-note":"_bands-note_m1aly_1"},g={"bands-plot-wrapper":"_bands-plot-wrapper_1hzls_1","bands-plot":"_bands-plot_1hzls_1"},z=({pseudosMetadata:a,bandsPseudosMap:t,activePseudos:r,bandShift:o})=>{const n=h.useRef(null);return h.useEffect(()=>{(async()=>{if(!t||!n.current)return;const s=F(r,t,o,a);if(!s.length)return;let l=null;l=(await b(async()=>{const{BandsVisualiser:d}=await import("./main-D5SAVL54.js");return{BandsVisualiser:d}},__vite__mapDeps([0,1,2]))).BandsVisualiser,l(n.current,{bandsDataArray:s,settings:{showlegend:!1,yaxis:{range:[-20,20]}}})})()},[r,t,a,o]),e.jsx("div",{id:g["bands-plot-wrapper"],children:e.jsx("div",{ref:n,id:g["bands-plot"]})})},F=(a,t,r,o)=>a.flatMap((n,s)=>{var p;const l=t[n];if(!l)return[];let d=-l.fermiLevel||0;return s===1&&(d+=r/1e3),[{bandsData:L(l,d),traceFormat:{line:{color:s===0?"black":((p=o[n])==null?void 0:p.color)||"red"}}}]}),L=(a,t)=>({...a,paths:a.paths.map(r=>({...r,values:r.values.map(o=>o.map(n=>n+t))}))}),R=()=>{const{loadingMetadata:a,pseudosMetadata:t}=h.useContext(v),{loadingBandsData:r,bandsPseudosMap:o,bandsPseudos:n,activeBandsPseudos:s,setActiveBandsPseudos:l,bandShift:d,setBandShift:p}=h.useContext(y),j=r||a,f=Object.keys(o||{}).length>0;return j?e.jsx(B,{}):f?e.jsxs(C,{id:"bands-plots",children:[e.jsxs(x,{children:[e.jsx(i,{lg:"3",children:e.jsx(D,{pseudos:n,activePseudos:s,bandShift:d,onPseudoSelect:l,onBandShiftChange:p})}),e.jsx(i,{lg:"auto",className:"ms-lg-5",children:e.jsx(z,{pseudosMetadata:t,bandsPseudosMap:o,activePseudos:s,bandShift:d})})]}),e.jsx("div",{id:w["bands-note"],children:"Electronic band structure along high-symmetry path. The reference energy (0 eV) corresponds to the Fermi level."})]}):e.jsx(S,{})};export{R as default};
