const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-BSJi9Xtv.js","assets/index-BaRx3iXj.js","assets/index-CdNc5vnI.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r,_ as j,j as o,D as C,S as E,L as k,O as S,Q as m}from"./index-BaRx3iXj.js";const L={"chessboard-plot":"_chessboard-plot_14kug_1"},P={responsive:!0,displayModeBar:!1,scrollZoom:!1},w=({pseudoFilenames:a,values:_,title:f,onTileClick:y})=>{const u=r.useRef(null);return r.useEffect(()=>{if(!u.current)return;let l=null,t=null,b=!1,n=null;return(async()=>{if(l=(await j(async()=>{const{default:e}=await import("./PlotlyLoader-BSJi9Xtv.js");return{default:e}},__vite__mapDeps([0,1,2,3]))).default,b||!u.current)return;const h=[{z:_,x:a,y:a,colorscale:[[0,"#157347"],[.05,"#2f7d4e"],[.1,"#478655"],[.15,"#5f8e5c"],[.2,"#779563"],[.25,"#8f9c6a"],[.3,"#a7a371"],[.35,"#bfa978"],[.4,"#d7b07f"],[.45,"#efb786"],[.5,"#f0a17c"],[.55,"#e58a70"],[.6,"#da7364"],[.65,"#ce5c58"],[.7,"#c2454c"],[.75,"#b62e40"],[.8,"#aa172f"],[.85,"#9e0e26"],[.9,"#920505"],[1,"#870000"]],type:"heatmap",hovertemplate:`<b>%{x}   |   %{y}<br><b>Max ${f}:</b> %{z:.2f}<extra></extra>`},{yaxis:"y2",mode:"none",showlegend:!1}],i={xaxis:{side:"top",title:{text:""},fixedrange:!0,tickangle:-90},yaxis:{autorange:"reversed",title:{text:""},fixedrange:!0},yaxis2:{overlaying:"y",side:"right",title:{text:`Max ${f}`,standoff:100},showticklabels:!1,fixedrange:!0},hoverlabel:{namelength:0},annotations:_.map((e,c)=>e.map((d,x)=>({x:a[x],y:a[c],text:d.toFixed(1),showarrow:!1,font:{color:"white",size:Math.max(8,24-a.length)}}))).flat(),margin:{t:160,r:100,b:40,l:160},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};t=await l.react(u.current,h,i,P),t.on("plotly_click",e=>{const{x:c,y:d,pointIndex:x}=e.points[0],s=f=="v"?0:1;y(s,[d,c],x)});const p=e=>{if(!e)return;const c={width:e.offsetWidth,height:e.offsetWidth};l.relayout(e,c)};return n=()=>p(t),window.addEventListener("resize",n),p(t),()=>{var e;t&&((e=t.removeAllListeners)==null||e.call(t,"plotly_click"))}})(),()=>{var h;if(b=!0,n&&window.removeEventListener("resize",n),l&&t)try{(h=t.removeAllListeners)==null||h.call(t,"plotly_click"),l.purge(t)}catch(i){console.error("Error purging BandsChessboardPlot:",i)}}},[a,_,f]),o.jsx("div",{ref:u,className:L["chessboard-plot"]})},z={"chessboard-plots":"_chessboard-plots_sjmsm_1"},B=({element:a,setChessboardPseudos:_,setBandShift:f,onTileClick:y})=>{const{loadingMetadata:u}=r.useContext(C),[l,t]=r.useState(!0),[b,n]=r.useState([]),[h,i]=r.useState([]),[p,e]=r.useState([]),[c,d]=r.useState([]);r.useEffect(()=>{a&&(t(!0),n([]),i([]),e([]),d([]),E.fetchBandChessboardData(a).then(s=>{n(s.pseudos),i(s.v_distance.max_diff_c),e(s.v10_distance.max_diff_c);const g=[s.v_distance.shift_c,s.v10_distance.shift_c];d(g)}).catch(s=>{console.error("Error fetching band chessboard data:",s),n([]),i([]),e([]),d([])}).finally(()=>{t(!1)}))},[a]);const x=(s,g,v)=>{_(g),f(c[s][v[0]][v[1]]),y()};return u||l?o.jsx(k,{}):o.jsx("div",{id:"chessboard-page",children:o.jsx("div",{id:z["chessboard-plots"],children:o.jsxs(S,{className:"justify-content-center g-0",children:[o.jsx(m,{children:o.jsx(w,{pseudoFilenames:b,values:h,title:"v",onTileClick:x})}),o.jsx(m,{children:o.jsx(w,{pseudoFilenames:b,values:p,title:"v10",onTileClick:x})})]})})})};export{B as default};
