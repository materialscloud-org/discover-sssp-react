const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-DIV1ai_C.js","assets/index-Djq4_hvV.js","assets/index-FuAJ-oR5.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as c,_ as P,j as d,P as j,S as E,i as k,l as L,C as m}from"./index-Djq4_hvV.js";const M={"chessboard-plot":"_chessboard-plot_14kug_1"},C={responsive:!0,displayModeBar:!1,scrollZoom:!1},w=({pseudoFilenames:r,values:t,title:n,colorMax:x,onTileClick:_})=>{const a=c.useRef(null),l=c.useMemo(()=>r.map(R),[r]);return c.useEffect(()=>{if(!a.current)return;let i=null,e=null,g=!1,f=null;return(async()=>{if(i=(await P(async()=>{const{default:s}=await import("./PlotlyLoader-DIV1ai_C.js");return{default:s}},__vite__mapDeps([0,1,2,3]))).default,g||!a.current)return;const h=[{z:t,x:l,y:l,colorscale:"Inferno",type:"heatmap",hovertemplate:`<b>%{x}   |   %{y}<br><b>Max ${n}:</b> %{z:.2f}<extra></extra>`},{yaxis:"y2",mode:"none",showlegend:!1}],p={xaxis:{side:"top",title:{text:""},fixedrange:!0,tickangle:-90},yaxis:{autorange:"reversed",title:{text:""},fixedrange:!0},yaxis2:{overlaying:"y",side:"right",title:{text:`Max ${n}`,standoff:100},showticklabels:!1,fixedrange:!0},hoverlabel:{namelength:0},annotations:t.map((s,u)=>s.map((o,v)=>({x:l[v],y:l[u],text:o.toFixed(1),showarrow:!1,font:{color:o>x/2?"white":"black",size:10}}))).flat(),margin:{t:160,r:60,b:40,l:160},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};e=await i.react(a.current,h,p,C),e.on("plotly_click",s=>{const{x:u,y:o,pointIndex:v}=s.points[0],y=n=="v"?0:1;_(y,[o,u],v)});const b=s=>{if(!s)return;const u={width:s.offsetWidth,height:s.offsetWidth};i.relayout(s,u)};return f=()=>b(e),window.addEventListener("resize",f),b(e),()=>{var s;e&&((s=e.removeAllListeners)==null||s.call(e,"plotly_click"))}})(),()=>{var h;if(g=!0,f&&window.removeEventListener("resize",f),i&&e)try{(h=e.removeAllListeners)==null||h.call(e,"plotly_click"),i.purge(e)}catch(p){console.error("Error purging BandsChessboardPlot:",p)}}},[r,t,n,x]),d.jsx("div",{ref:a,className:M["chessboard-plot"]})},O=new Set(["n","spn","spfn","spdn","spdfn","sl"]),S={"dojo.v0.4.1-std":"DOJO-041-std","dojo.v0.4.1-str":"DOJO-041-str","dojo.v0.5.0-std":"DOJO-050-std","spms.v1":"SPMS","sg15.v0":"SG15","us+gbrv.v1":"GBRV-1.X","us+psl.v1.0.0-high":"PSL-US-v1-high","us+psl.v1.0.0-low":"PSL-US-v1-low","us+psl.v0":"PSL-US-v0.x","paw+psl.v0":"PSL-PAW-v0.x","paw+psl.v1.0.0-high":"PSL-PAW-v1-high","paw+psl.v1.0.0-low":"PSL-PAW-v1-low","paw+jth.v1.1-std":"JTH-1.1-std","paw+jth.v1.1-str":"JTH-1.1-str","paw+wentzcovitch.v1.0.legacy":"Wentzcovitch","paw+uni-marburg.v0":"MARBURG"};function R(r){let t=r.split(".");t=t.slice(1,t.length-1),O.has(t[t.length-1])&&(t=t.slice(0,t.length-1));const n=t[0],x=n==="us"||n==="paw"?`${n}+`:"",_=t[2].replace("z_","");let a=t.slice(4).join(".");if(a.includes("psl.v0"))a=a.split("v0")[0]+"v0";else{const i=["gbrv.v1","gbrv.v1.5"];for(let e of i)if(a.includes(e)){a=e;break}}const l=x+a;return l in S?`${S[l]}-${_}`:r}const T={"chessboard-plots":"_chessboard-plots_sjmsm_1"},A=({element:r,setChessboardPseudos:t,setBandShift:n,onTileClick:x})=>{const{loadingMetadata:_}=c.useContext(j),[a,l]=c.useState(!0),[i,e]=c.useState([]),[g,f]=c.useState([]),[h,p]=c.useState([]),[b,s]=c.useState([]);c.useEffect(()=>{r&&(l(!0),e([]),f([]),p([]),s([]),E.fetchBandChessboardData(r).then(o=>{e(o.pseudos),f(o.v_distance.max_diff_c),p(o.v10_distance.max_diff_c);const v=[o.v_distance.shift_c,o.v10_distance.shift_c];s(v)}).catch(o=>{console.error("Error fetching band chessboard data:",o),e([]),f([]),p([]),s([])}).finally(()=>{l(!1)}))},[r]);const u=(o,v,y)=>{t(v),n(b[o][y[0]][y[1]]),x()};return _||a?d.jsx(k,{}):d.jsx("div",{id:"chessboard-page",children:d.jsx("div",{id:T["chessboard-plots"],children:d.jsxs(L,{className:"justify-content-center g-0",children:[d.jsx(m,{xxl:"6",children:d.jsx(w,{pseudoFilenames:i,values:g,title:"v",colorMax:Math.max(...g.flat()),onTileClick:u})}),d.jsx(m,{xxl:"6",children:d.jsx(w,{pseudoFilenames:i,values:h,title:"v10",colorMax:Math.max(...h.flat()),onTileClick:u})})]})})})};export{A as default};
