const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-CUtEtfm2.js","assets/index-DHFbRL9-.js","assets/index-Dae_2jy-.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as m,_ as k,j as l,D as C,O as j,L as E,Q as P,U as g}from"./index-DHFbRL9-.js";const L={"chessboard-plots":"_chessboard-plots_sjmsm_1"},M={"chessboard-plot":"_chessboard-plot_14kug_1"},R={responsive:!0,displayModeBar:!1,scrollZoom:!1},z=({title:c,pseudoFilenames:o,values:d,zMax:p,onTileClick:b})=>{const f=m.useRef(null);return m.useEffect(()=>{if(!f.current)return;let i=null,t=null,u=!1,r=null;return(async()=>{if(i=(await k(async()=>{const{default:e}=await import("./PlotlyLoader-CUtEtfm2.js");return{default:e}},__vite__mapDeps([0,1,2,3]))).default,u||!f.current)return;const x=d.map((e,s)=>e.map((a,n)=>s===n?null:a)),h=d.map((e,s)=>e.map((a,n)=>s===n?1:null)),_=[{z:x,x:o,y:o,zmin:0,zmax:p,colorscale:[[0,"#157347"],[.5,"#f0a17c"],[1,"#870000"]],type:"heatmap",hoverongaps:!1,hovertemplate:`<b>x:</b> %{x}<br /><b>y:</b> %{y}<br><b>Max ${c}:</b> %{z:.2f}<extra></extra>`},{z:h,x:o,y:o,zmin:0,zmax:1,colorscale:[[0,"#ffffff"],[1,"#ffffff"]],showscale:!1,type:"heatmap",hoverinfo:"skip"}],v={xaxis:{side:"top",title:{text:c,standoff:10,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45},yaxis:{autorange:"reversed",title:{text:`Max ${c}`,standoff:10,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45},hoverlabel:{namelength:0},annotations:d.map((e,s)=>e.map((a,n)=>({x:o[n],y:o[s],text:a>=100?a.toExponential(0).toString().replace("e+","e"):a.toFixed(1),showarrow:!1,font:{color:"white",size:Math.max(8,24-o.length)}})).filter((a,n)=>n!==s)).flat(),margin:{t:160,r:110,b:40,l:160},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};t=await i.react(f.current,_,v,R),t.on("plotly_click",e=>{const{x:s,y:a,pointIndex:n}=e.points[0],w=c=="v"?0:1;b(w,[a,s],n)});const y=e=>{if(!e)return;const s={width:e.offsetWidth,height:e.offsetWidth};i&&i.relayout(e,s)};return r=()=>y(t),window.addEventListener("resize",r),y(t),()=>{var e;u=!0,r&&window.removeEventListener("resize",r),t&&((e=t.removeAllListeners)==null||e.call(t,"plotly_click"))}})(),()=>{var x;if(u=!0,r&&window.removeEventListener("resize",r),i&&t)try{(x=t.removeAllListeners)==null||x.call(t,"plotly_click"),i.purge(t)}catch(h){console.error("Error purging BandsChessboardPlot:",h)}}},[o,d,c,p,b]),l.jsx("div",{ref:f,className:M["chessboard-plot"]})},T=({onTileClick:c})=>{const{loadingMetadata:o}=m.useContext(C),{loadingChessboardData:d,setChessboardPseudos:p,setBandShift:b,pseudoFilenames:f,etaV:i,etaV10:t,shifts:u}=m.useContext(j),r=(x,h,_)=>{p(h),b(u[x][_[0]][_[1]]),c()};return o||d?l.jsx(E,{}):l.jsx("div",{id:"chessboard-page",children:l.jsx("div",{id:L["chessboard-plots"],children:l.jsxs(P,{className:"justify-content-center g-0",children:[l.jsx(g,{children:l.jsx(z,{title:"η<sub>v</sub>",pseudoFilenames:f,values:i,zMax:30,onTileClick:r})}),l.jsx(g,{children:l.jsx(z,{title:"η10",pseudoFilenames:f,values:t,zMax:60,onTileClick:r})})]})})})};export{T as default};
