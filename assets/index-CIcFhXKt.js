import{r as c,S as z,j as o,L}from"./index-DRyQ3Vzd.js";import{c as M,R,C as v,F as C}from"./params-CzJsbede.js";import{P as V}from"./PlotlyLoader-CTBEr9lJ.js";const h={"pseudo-controls":"_pseudo-controls_wotht_1","pseudo-checkbox":"_pseudo-checkbox_wotht_4","eos-note":"_eos-note_wotht_1","eos-plot":"_eos-plot_wotht_14"},F=1e3,y=2,O=`(%{x:.${y}f}, %{y:.${y}f})`,H=({element:u,activeAccuracy:b})=>{const[P,B]=c.useState(!0),[j,k]=c.useState(),[d,f]=c.useState(["REF"]),[S,D]=c.useState([]),[p,$]=c.useState({});c.useEffect(()=>{if(!u)return;new z().fetchEosData(b).then(l=>{const r=l[u];k(r);const a=Object.keys(Object.values(r)[0]);D(a),$(a.reduce((i,s,e)=>(i[s]=M[e%M.length],i),{}))}).catch(l=>{console.error("Error fetching EOS data:",l),k(void 0)}).finally(()=>{B(!1)})},[b,u]);const N=c.useMemo(()=>(t,l,r,a,i)=>t.map(s=>{const e=Math.pow(s/l,.6666666666666666);return r+9*a*l/16*(Math.pow(e-1,3)*i+Math.pow(e-1,2)*(6-4*e))}),[]);return P?o.jsx(L,{}):j?o.jsxs("div",{id:"eos-plots",children:[o.jsxs(R,{children:[o.jsxs(v,{md:4,lg:3,xxl:2,className:h["pseudo-controls"],children:[o.jsx(C,{type:"checkbox",id:"all",label:"Select all",defaultChecked:!1,className:h["pseudo-checkbox"],style:{color:"black"},onChange:t=>{t.target.checked?f(S):f(["REF"])}}),S.map(t=>o.jsx(C,{type:"checkbox",id:t,label:t,checked:d.includes(t),disabled:t==="REF",className:h["pseudo-checkbox"],style:{color:p[t]},onChange:l=>{l.target.checked?f([...d,t]):f(d.filter(r=>r!==t))}},t))]}),o.jsx(v,{children:o.jsx(R,{children:Object.entries(j).map(([t,l])=>{const r=Object.values(l).flatMap(s=>s.volumes||[]),a=Math.min(...r),i=Math.max(...r);return o.jsx(v,{lg:6,xl:4,xxl:3,children:o.jsx(V,{data:Object.entries(l).filter(([s])=>d.includes(s)).map(([s,e])=>{var E;if(s!=="REF"&&e.volumes&&e.energies){if(e.volumes.length!==e.energies.length)return console.error(`Mismatch in volumes and energies for ${u} ${t} ${s}`),{};const m=e.volumes.map((n,g)=>{var _;return{volume:n,energy:(((_=e.energies)==null?void 0:_[g])||0)-((e==null?void 0:e.E0)||0)}}).sort((n,g)=>n.volume-g.volume),w=m.map(n=>n.volume),x=m.map(n=>n.energy);return{x:w,y:x,mode:"lines+markers",type:"scatter",line:{shape:"spline"},name:s,marker:{color:p[s]},hovertemplate:O+`<br>ν = ${(E=e.nu)==null?void 0:E.toFixed(y)}`,hoverlabel:{align:"left"}}}else{const m=Array.from({length:F},(w,x)=>a+x*(i-a)/(F-1));return{x:m,y:N(m,e.V0,0,e.B0,e.B1),mode:"lines",type:"scatter",line:{color:p[s]},name:s,hovertemplate:O}}}),layout:{title:{text:t,xref:"paper",yref:"paper",x:.45,y:1},xaxis:{title:{text:"Volume [Å³/atoms]",standoff:20},showgrid:!1},yaxis:{title:{text:"Energy [eV/atom]",standoff:20},showgrid:!1},showlegend:!1,margin:{l:70,r:20,t:30,b:60},autosize:!0},config:{displaylogo:!1,responsive:!0,modeBarButtonsToRemove:["zoomIn2d","zoomOut2d","autoScale2d","lasso2d","select2d"]},className:h["eos-plot"],useResizeHandler:!0})},t)})})})]}),o.jsx("div",{id:h["eos-note"],children:'Comparison of the Birch-Murnaghan fit of the pseudopotential equation of state ("Fit") with the reference all-electron results ("Wien2k").'})]}):o.jsx("span",{children:"No data available"})};export{H as default};
