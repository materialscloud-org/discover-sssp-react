import{r as a,S as z,j as t,L as V}from"./index-mj2dnG5Q.js";import{c as w,R as O,C as f,P as F}from"./PseudosCheckboxes-C5SZfYEp.js";import{P as L}from"./PlotlyLoader-Ci2s6cbD.js";const d={"eos-note":"_eos-note_1xb5q_1","eos-plot":"_eos-plot_1xb5q_6"},C=1e3,v=2,R=`(%{x:.${v}f}, %{y:.${v}f})`,H=({element:u,activeLibrary:g})=>{const[_,B]=a.useState(!0),[j,y]=a.useState(),[D,$]=a.useState([]),[S,M]=a.useState([]),[p,k]=a.useState({});a.useEffect(()=>{if(!u)return;new z().fetchEosData(g).then(o=>{const l=o[u];y(l);const r=Object.keys(Object.values(l)[0]);$(r),M(r),k(r.reduce((c,s,e)=>(c[s]=w[e%w.length],c),{}))}).catch(o=>{console.error("Error fetching EOS data:",o),y(void 0)}).finally(()=>{B(!1)})},[g,u]);const q=a.useMemo(()=>(i,o,l,r,c)=>i.map(s=>{const e=Math.pow(s/o,.6666666666666666);return l+9*r*o/16*(Math.pow(e-1,3)*c+Math.pow(e-1,2)*(6-4*e))}),[]);return _?t.jsx(V,{}):j?t.jsxs("div",{id:"eos-plots",children:[t.jsxs(O,{children:[t.jsx(f,{md:4,lg:3,xxl:2,className:d["pseudo-controls"],children:t.jsx(F,{pseudos:D,activePseudos:S,pseudosColormap:p,setActivePseudos:M})}),t.jsx(f,{children:t.jsx(O,{children:Object.entries(j).map(([i,o])=>{const l=Object.values(o).flatMap(s=>s.volumes||[]),r=Math.min(...l),c=Math.max(...l);return t.jsx(f,{lg:6,xl:4,xxl:3,children:t.jsx(L,{data:Object.entries(o).filter(([s])=>S.includes(s)).map(([s,e])=>{var E;if(s!=="REF"&&e.volumes&&e.energies){if(e.volumes.length!==e.energies.length)return console.error(`Mismatch in volumes and energies for ${u} ${i} ${s}`),{};const m=e.volumes.map((n,x)=>{var P;return{volume:n,energy:(((P=e.energies)==null?void 0:P[x])||0)-((e==null?void 0:e.E0)||0)}}).sort((n,x)=>n.volume-x.volume),b=m.map(n=>n.volume),h=m.map(n=>n.energy);return{x:b,y:h,mode:"lines+markers",type:"scatter",line:{shape:"spline"},name:s,marker:{color:p[s]},hovertemplate:R+`<br>ν = ${(E=e.nu)==null?void 0:E.toFixed(v)}`,hoverlabel:{align:"left"}}}else{const m=Array.from({length:C},(b,h)=>r+h*(c-r)/(C-1));return{x:m,y:q(m,e.V0,0,e.B0,e.B1),mode:"lines",type:"scatter",line:{color:p[s]},name:s,hovertemplate:R}}}),layout:{title:{text:i,xref:"paper",yref:"paper",x:.45,y:1},xaxis:{title:{text:"Volume [Å³/atom]",standoff:20},showgrid:!1},yaxis:{title:{text:"Energy [eV/atom]",standoff:20},showgrid:!1},showlegend:!1,margin:{l:70,r:20,t:30,b:60},autosize:!0},config:{displaylogo:!1,responsive:!0,modeBarButtonsToRemove:["zoomIn2d","zoomOut2d","autoScale2d","lasso2d","select2d"]},className:d["eos-plot"],useResizeHandler:!0})},i)})})})]}),t.jsx("div",{id:d["eos-note"],children:'Comparison of the Birch-Murnaghan fit of the pseudopotential equation of state ("Fit") with the reference all-electron results ("Wien2k").'})]}):t.jsx("span",{children:"No data available"})};export{H as default};
