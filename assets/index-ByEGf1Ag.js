const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-Br_JgzVT.js","assets/index-Bg2AJ1xg.js","assets/index-FuAJ-oR5.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as l,m as he,n as me,o as ge,p as ne,q as S,j as d,N as xe,v as A,w as D,x as pe,y as ve,z as Ee,A as W,B as ye,D as Re,K as be,u as F,a as N,F as se,G,H as z,I as we,J as ke,M as Oe,P as V,_ as je,S as Ce,i as _e,l as q,C as B}from"./index-Bg2AJ1xg.js";import{F as J,N as Te}from"./NoDataMessage-DkzOOLDg.js";function Fe(e){const t=l.useRef(e);return t.current=e,t}function Me(e){const t=Fe(e);l.useEffect(()=>()=>t.current(),[])}const I=2**31-1;function oe(e,t,n){const s=n-Date.now();e.current=s<=I?setTimeout(t,s):setTimeout(()=>oe(e,t,n),I)}function Se(){const e=he(),t=l.useRef();return Me(()=>clearTimeout(t.current)),l.useMemo(()=>{const n=()=>clearTimeout(t.current);function s(o,r=0){e()&&(n(),r<=I?t.current=setTimeout(o,r):oe(t,o,Date.now()+r))}return{set:s,clear:n,handleRef:t}},[])}const $=(e,t)=>ge?e==null?(t||ne()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function X(e,t){const n=me(),[s,o]=l.useState(()=>$(e,n==null?void 0:n.document));if(!s){const r=$(e);r&&o(r)}return l.useEffect(()=>{},[t,s]),l.useEffect(()=>{const r=$(e);r!==s&&o(r)},[e,s]),s}function Ne(e){return e.code==="Escape"||e.keyCode===27}function Pe(){const e=l.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}const Le=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Be(e,t){if(e==null)return{};var n={},s=Object.keys(e),o,r;for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function $e(e){let{onEnter:t,onEntering:n,onEntered:s,onExit:o,onExiting:r,onExited:i,addEndListener:f,children:a}=e,c=Be(e,Le);const{major:h}=Pe(),E=h>=19?a.props.ref:a.ref,g=l.useRef(null),y=S(g,typeof a=="function"?null:E),m=R=>v=>{R&&g.current&&R(g.current,v)},x=l.useCallback(m(t),[t]),u=l.useCallback(m(n),[n]),b=l.useCallback(m(s),[s]),p=l.useCallback(m(o),[o]),k=l.useCallback(m(r),[r]),w=l.useCallback(m(i),[i]),O=l.useCallback(m(f),[f]);return Object.assign({},c,{nodeRef:g},t&&{onEnter:x},n&&{onEntering:u},s&&{onEntered:b},o&&{onExit:p},r&&{onExiting:k},i&&{onExited:w},f&&{addEndListener:O},{children:typeof a=="function"?(R,v)=>a(R,Object.assign({},v,{ref:y})):l.cloneElement(a,{ref:y})})}const Ue=["component"];function De(e,t){if(e==null)return{};var n={},s=Object.keys(e),o,r;for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}const ze=l.forwardRef((e,t)=>{let{component:n}=e,s=De(e,Ue);const o=$e(s);return d.jsx(n,Object.assign({ref:t},o))});function Ie({in:e,onTransition:t}){const n=l.useRef(null),s=l.useRef(!0),o=A(t);return D(()=>{if(!n.current)return;let r=!1;return o({in:e,element:n.current,initial:s.current,isStale:()=>r}),()=>{r=!0}},[e,o]),D(()=>(s.current=!1,()=>{s.current=!0}),[]),n}function He({children:e,in:t,onExited:n,onEntered:s,transition:o}){const[r,i]=l.useState(!t);t&&r&&i(!1);const f=Ie({in:!!t,onTransition:c=>{const h=()=>{c.isStale()||(c.in?s==null||s(c.element,c.initial):(i(!0),n==null||n(c.element)))};Promise.resolve(o(c)).then(h,E=>{throw c.in||i(!0),E})}}),a=S(f,e.ref);return r&&!t?null:l.cloneElement(e,{ref:a})}function Ae(e,t,n){return e?d.jsx(ze,Object.assign({},n,{component:e})):t?d.jsx(He,Object.assign({},n,{transition:t})):d.jsx(xe,Object.assign({},n))}function Y(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}const Ve=()=>{};function Ke(e,t,{disabled:n,clickTrigger:s}={}){const o=t||Ve;pe(e,o,{disabled:n,clickTrigger:s});const r=A(i=>{Ne(i)&&o(i)});l.useEffect(()=>{if(n||e==null)return;const i=ne(ve(e));let f=(i.defaultView||window).event;const a=Ee(i,"keyup",c=>{if(c===f){f=void 0;return}r(c)});return()=>{a()}},[e,n,r])}const re=l.forwardRef((e,t)=>{const{flip:n,offset:s,placement:o,containerPadding:r,popperConfig:i={},transition:f,runTransition:a}=e,[c,h]=W(),[E,g]=W(),y=S(h,t),m=X(e.container),x=X(e.target),[u,b]=l.useState(!e.show),p=ye(x,c,Re({placement:o,enableEvents:!!e.show,containerPadding:r||5,flip:n,offset:s,arrowElement:E,popperConfig:i}));e.show&&u&&b(!1);const k=(...P)=>{b(!0),e.onExited&&e.onExited(...P)},w=e.show||!u;if(Ke(c,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!w)return null;const{onExit:O,onExiting:R,onEnter:v,onEntering:C,onEntered:T}=e;let M=e.children(Object.assign({},p.attributes.popper,{style:p.styles.popper,ref:y}),{popper:p,placement:o,show:!!e.show,arrowProps:Object.assign({},p.attributes.arrow,{style:p.styles.arrow,ref:g})});return M=Ae(f,a,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:M,onExit:O,onExiting:R,onExited:k,onEnter:v,onEntering:C,onEntered:T}),m?be.createPortal(M,m):null});re.displayName="Overlay";const le=l.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},o)=>(t=F(t,"popover-header"),d.jsx(n,{ref:o,className:N(e,t),...s})));le.displayName="PopoverHeader";const K=l.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},o)=>(t=F(t,"popover-body"),d.jsx(n,{ref:o,className:N(e,t),...s})));K.displayName="PopoverBody";function ie(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function ae(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const We=l.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:s,children:o,body:r,arrowProps:i,hasDoneInitialMeasure:f,popper:a,show:c,...h},E)=>{const g=F(e,"popover"),y=se(),[m]=(t==null?void 0:t.split("-"))||[],x=ie(m,y);let u=s;return c&&!f&&(u={...s,...ae(a==null?void 0:a.strategy)}),d.jsxs("div",{ref:E,role:"tooltip",style:u,"x-placement":m,className:N(n,g,m&&`bs-popover-${x}`),...h,children:[d.jsx("div",{className:"popover-arrow",...i}),r?d.jsx(K,{children:o}):o]})}),Ge=Object.assign(We,{Header:le,Body:K,POPPER_OFFSET:[0,8]}),ce=l.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:s,children:o,arrowProps:r,hasDoneInitialMeasure:i,popper:f,show:a,...c},h)=>{e=F(e,"tooltip");const E=se(),[g]=(t==null?void 0:t.split("-"))||[],y=ie(g,E);let m=s;return a&&!i&&(m={...s,...ae(f==null?void 0:f.strategy)}),d.jsxs("div",{ref:h,style:m,role:"tooltip","x-placement":g,className:N(n,e,`bs-tooltip-${y}`),...c,children:[d.jsx("div",{className:"tooltip-arrow",...r}),d.jsx("div",{className:`${e}-inner`,children:o})]})});ce.displayName="Tooltip";const ue=Object.assign(ce,{TOOLTIP_OFFSET:[0,6]});function qe(e){const t=l.useRef(null),n=F(void 0,"popover"),s=F(void 0,"tooltip"),o=l.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(Y(t.current,n))return Ge.POPPER_OFFSET;if(Y(t.current,s))return ue.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,s]);return[t,[o]]}function Je(e,t){const{ref:n}=e,{ref:s}=t;e.ref=n.__wrapped||(n.__wrapped=o=>n(z(o))),t.ref=s.__wrapped||(s.__wrapped=o=>s(z(o)))}const de=l.forwardRef(({children:e,transition:t=G,popperConfig:n={},rootClose:s=!1,placement:o="top",show:r=!1,...i},f)=>{const a=l.useRef({}),[c,h]=l.useState(null),[E,g]=qe(i.offset),y=S(f,E),m=t===!0?G:t||void 0,x=A(u=>{h(u),n==null||n.onFirstUpdate==null||n.onFirstUpdate(u)});return D(()=>{c&&i.target&&(a.current.scheduleUpdate==null||a.current.scheduleUpdate())},[c,i.target]),l.useEffect(()=>{r||h(null)},[r]),d.jsx(re,{...i,ref:y,popperConfig:{...n,modifiers:g.concat(n.modifiers||[]),onFirstUpdate:x},transition:m,rootClose:s,placement:o,show:r,children:(u,{arrowProps:b,popper:p,show:k})=>{var w,O;Je(u,b);const R=p==null?void 0:p.placement,v=Object.assign(a.current,{state:p==null?void 0:p.state,scheduleUpdate:p==null?void 0:p.update,placement:R,outOfBoundaries:(p==null||(w=p.state)==null||(O=w.modifiersData.hide)==null?void 0:O.isReferenceHidden)||!1,strategy:n.strategy}),C=!!c;return typeof e=="function"?e({...u,placement:R,show:k,...!t&&k&&{className:"show"},popper:v,arrowProps:b,hasDoneInitialMeasure:C}):l.cloneElement(e,{...u,placement:R,arrowProps:b,popper:v,hasDoneInitialMeasure:C,className:N(e.props.className,!t&&k&&"show"),style:{...e.props.style,...u.style}})}})});de.displayName="Overlay";function Xe(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function Q(e,t,n){const[s]=t,o=s.currentTarget,r=s.relatedTarget||s.nativeEvent[n];(!r||r!==o)&&!ke(o,r)&&e(...t)}Oe.oneOf(["click","hover","focus"]);const Ye=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:s={},show:o,defaultShow:r=!1,onToggle:i,delay:f,placement:a,flip:c=a&&a.indexOf("auto")!==-1,...h})=>{const E=l.useRef(null),g=S(E,n.ref),y=Se(),m=l.useRef(""),[x,u]=we(o,r,i),b=Xe(f),{onFocus:p,onBlur:k,onClick:w}=typeof n!="function"?l.Children.only(n).props:{},O=j=>{g(z(j))},R=l.useCallback(()=>{if(y.clear(),m.current="show",!b.show){u(!0);return}y.set(()=>{m.current==="show"&&u(!0)},b.show)},[b.show,u,y]),v=l.useCallback(()=>{if(y.clear(),m.current="hide",!b.hide){u(!1);return}y.set(()=>{m.current==="hide"&&u(!1)},b.hide)},[b.hide,u,y]),C=l.useCallback((...j)=>{R(),p==null||p(...j)},[R,p]),T=l.useCallback((...j)=>{v(),k==null||k(...j)},[v,k]),M=l.useCallback((...j)=>{u(!x),w==null||w(...j)},[w,u,x]),P=l.useCallback((...j)=>{Q(R,j,"fromElement")},[R]),fe=l.useCallback((...j)=>{Q(v,j,"toElement")},[v]),L=e==null?[]:[].concat(e),_={ref:O};return L.indexOf("click")!==-1&&(_.onClick=M),L.indexOf("focus")!==-1&&(_.onFocus=C,_.onBlur=T),L.indexOf("hover")!==-1&&(_.onMouseOver=P,_.onMouseOut=fe),d.jsxs(d.Fragment,{children:[typeof n=="function"?n(_):l.cloneElement(n,_),d.jsx(de,{...h,show:x,onHide:v,flip:c,placement:a,popperConfig:s,target:E.current,children:t})]})},U={"pseudos-checkboxes":"_pseudos-checkboxes_cplvb_1","pseudo-checkbox":"_pseudo-checkbox_cplvb_5"},Qe=({pseudos:e,activePseudos:t,setActivePseudos:n})=>{const{pseudosMetadata:s}=l.useContext(V),[o,r]=l.useState(!1);return l.useEffect(()=>{r(t.length===e.length)},[t,e.length]),d.jsxs("div",{className:U["pseudos-checkboxes"],children:[d.jsx(J.Check,{type:"checkbox",id:"all",label:"Select all",checked:o,className:U["pseudo-checkbox"],style:{color:"black"},onChange:i=>{n(i.target.checked?e:["REF"]),r(i.target.checked)}}),e.map(i=>{var a;const f=i+(i==="REF"?" (AE average)":"");return d.jsx(J.Check,{type:"checkbox",id:i,label:d.jsx(Ye,{placement:"right",delay:{show:100,hide:100},offset:[0,10],overlay:d.jsx(ue,{children:f}),children:d.jsx("span",{children:f})}),checked:t.includes(i),disabled:i==="REF",className:U["pseudo-checkbox"],style:{color:((a=s[i])==null?void 0:a.color)||"black"},onChange:c=>{n(c.target.checked?[...t,i]:t.filter(h=>h!==i)),r(c.target.checked?t.length+1===e.length:!1)}},i)})]})},Ze={"eos-plot":"_eos-plot_1kkbs_1"},Z=1e3,H=2,ee=`(%{x:.${H}f}, %{y:.${H}f})`,et={displaylogo:!1,responsive:!0,modeBarButtonsToRemove:["zoomIn2d","zoomOut2d","autoScale2d","lasso2d","select2d"]},tt=(e,t,n,s,o)=>e.map(r=>{const i=Math.pow(r/t,.6666666666666666);return n+9*s*t/16*(Math.pow(i-1,3)*o+Math.pow(i-1,2)*(6-4*i))}),nt=({configuration:e,eosPseudosMap:t,activePseudos:n})=>{const{pseudosMetadata:s}=l.useContext(V),o=l.useRef(null);return l.useEffect(()=>{if(!o.current)return;let r=null,i=null,f=!1,a=null;const c=Object.values(t).flatMap(g=>g.volumes||[]),h=Math.min(...c),E=Math.max(...c);return(async()=>{if(r=(await je(async()=>{const{default:x}=await import("./PlotlyLoader-Br_JgzVT.js");return{default:x}},__vite__mapDeps([0,1,2,3]))).default,f||!o.current)return;const g=Object.entries(t).filter(([x])=>n.includes(x)).map(([x,u])=>{var p,k;const b=((p=s[x])==null?void 0:p.color)||"black";if(x!=="REF"&&u.volumes&&u.energies){const w=u.volumes.map((v,C)=>{var T;return{volume:v,energy:(((T=u.energies)==null?void 0:T[C])||0)-((u==null?void 0:u.E0)||0)}}).sort((v,C)=>v.volume-C.volume),O=w.map(v=>v.volume),R=w.map(v=>v.energy);return{x:O,y:R,mode:"lines+markers",type:"scatter",line:{shape:"spline"},name:x,marker:{color:b},hovertemplate:ee+`<br>ν = ${(k=u.nu)==null?void 0:k.toFixed(H)}`,hoverlabel:{align:"left"}}}else{const w=Array.from({length:Z},(O,R)=>h+R*(E-h)/(Z-1));return{x:w,y:tt(w,u.V0,0,u.B0,u.B1),mode:"lines",type:"scatter",line:{color:b},name:x,hovertemplate:ee}}}),y={title:{text:e,x:.55,y:.9},xaxis:{title:{text:"Volume [Å³/atom]"},showgrid:!1},yaxis:{title:{text:"Energy [eV/atom]"},showgrid:!1},showlegend:!1,margin:{l:70,r:20,t:30,b:60},autosize:!0};i=await r.react(o.current,g,y,et);const m=x=>{x&&r.Plots.resize(x)};a=()=>m(i),window.addEventListener("resize",a),a()})(),()=>{if(f=!0,a&&window.removeEventListener("resize",a),r&&i)try{r.purge(i)}catch(g){console.error("Error purging EosPlot:",g)}}},[n]),d.jsx("div",{ref:o,className:Ze["eos-plot"]})},te={"eos-note":"_eos-note_3j6lo_1"},rt=({element:e})=>{const{loadingMetadata:t}=l.useContext(V),[n,s]=l.useState(!0),[o,r]=l.useState({}),[i,f]=l.useState([]),[a,c]=l.useState([]);return l.useEffect(()=>{e&&(s(!0),r({}),f([]),c([]),Ce.fetchEosData().then(h=>{const E=h[e];r(E);const g=Object.keys(Object.values(E)[0]);f(g),c(g)}).catch(h=>{console.error("Error fetching EOS data:",h),r({}),f([]),c([])}).finally(()=>s(!1)))},[e]),n||t?d.jsx(_e,{}):i.length?d.jsxs("div",{id:"eos-plots",children:[d.jsxs(q,{children:[d.jsx(B,{md:4,lg:3,xxl:2,className:te["pseudo-controls"],children:d.jsx(Qe,{pseudos:i,activePseudos:a,setActivePseudos:c})}),d.jsx(B,{children:d.jsx(q,{children:Object.entries(o).map(([h,E])=>d.jsx(B,{lg:6,xl:4,xxl:3,children:d.jsx(nt,{configuration:h,eosPseudosMap:E,activePseudos:a})},h))})})]}),d.jsx("div",{id:te["eos-note"],children:'Comparison of the Birch-Murnaghan fit of the pseudopotential equation of state ("Fit") with the reference all-electron results ("Wien2k").'})]}):d.jsx(Te,{})};export{rt as default};
