const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-BSJi9Xtv.js","assets/index-BaRx3iXj.js","assets/index-CdNc5vnI.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{R as W,r as a,c as le,j as s,T as St,t as kt,a as D,s as G,b as Ot,E as Rt,d as Tt,e as Mt,f as At,u as U,g as Ft,P as _e,h as Ae,o as et,i as Dt,k as tt,l as Bt,m as It,n as q,p as ze,q as We,K as Ut,v as ne,w as Lt,x as $t,y as Pt,z as zt,A as He,F as nt,B as Wt,C as Ht,D as st,L as Fe,G as Ve,H as Vt,S as Me,I as qt,J as Kt,_ as Gt,M as Xt,N as Yt}from"./index-BaRx3iXj.js";import{F as Qt,N as Jt}from"./NoDataMessage-BuoMfKrp.js";import{u as Zt,a as ot,i as en,r as qe,h as tn}from"./hasClass-CJPrCBv-.js";const nn={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function sn(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,o=e[n],r=nn[t];return o+parseInt(G(e,r[0]),10)+parseInt(G(e,r[1]),10)}const on={[At]:"collapse",[Mt]:"collapsing",[Tt]:"collapsing",[Rt]:"collapse show"},rn=W.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:o,onExiting:r,className:i,children:l,dimension:d="height",in:p=!1,timeout:N=300,mountOnEnter:m=!1,unmountOnExit:E=!1,appear:R=!1,getDimensionValue:F=sn,...x},j)=>{const u=typeof d=="function"?d():d,c=a.useMemo(()=>le(y=>{y.style[u]="0"},t),[u,t]),h=a.useMemo(()=>le(y=>{const b=`scroll${u[0].toUpperCase()}${u.slice(1)}`;y.style[u]=`${y[b]}px`},e),[u,e]),A=a.useMemo(()=>le(y=>{y.style[u]=null},n),[u,n]),B=a.useMemo(()=>le(y=>{y.style[u]=`${F(u,y)}px`,Ot(y)},o),[o,F,u]),_=a.useMemo(()=>le(y=>{y.style[u]=null},r),[u,r]);return s.jsx(St,{ref:j,addEndListener:kt,...x,"aria-expanded":x.role?p:null,onEnter:c,onEntering:h,onEntered:A,onExit:B,onExiting:_,childRef:l.ref,in:p,timeout:N,mountOnEnter:m,unmountOnExit:E,appear:R,children:(y,b)=>W.cloneElement(l,{...b,className:D(i,l.props.className,on[y],u==="width"&&"collapse-horizontal")})})});function rt(t,e){return Array.isArray(t)?t.includes(e):t===e}const ue=a.createContext({});ue.displayName="AccordionContext";const De=a.forwardRef(({as:t="div",bsPrefix:e,className:n,children:o,eventKey:r,...i},l)=>{const{activeEventKey:d}=a.useContext(ue);return e=U(e,"accordion-collapse"),s.jsx(rn,{ref:l,in:rt(d,r),...i,className:D(n,e),children:s.jsx(t,{children:a.Children.only(o)})})});De.displayName="AccordionCollapse";const Ee=a.createContext({eventKey:""});Ee.displayName="AccordionItemContext";const at=a.forwardRef(({as:t="div",bsPrefix:e,className:n,onEnter:o,onEntering:r,onEntered:i,onExit:l,onExiting:d,onExited:p,...N},m)=>{e=U(e,"accordion-body");const{eventKey:E}=a.useContext(Ee);return s.jsx(De,{eventKey:E,onEnter:o,onEntering:r,onEntered:i,onExit:l,onExiting:d,onExited:p,children:s.jsx(t,{ref:m,...N,className:D(n,e)})})});at.displayName="AccordionBody";function an(t,e){const{activeEventKey:n,onSelect:o,alwaysOpen:r}=a.useContext(ue);return i=>{let l=t===n?null:t;r&&(Array.isArray(n)?n.includes(t)?l=n.filter(d=>d!==t):l=[...n,t]:l=[t]),o==null||o(l,i),e==null||e(i)}}const Be=a.forwardRef(({as:t="button",bsPrefix:e,className:n,onClick:o,...r},i)=>{e=U(e,"accordion-button");const{eventKey:l}=a.useContext(Ee),d=an(l,o),{activeEventKey:p}=a.useContext(ue);return t==="button"&&(r.type="button"),s.jsx(t,{ref:i,onClick:d,...r,"aria-expanded":Array.isArray(p)?p.includes(l):l===p,className:D(n,e,!rt(p,l)&&"collapsed")})});Be.displayName="AccordionButton";const it=a.forwardRef(({as:t="h2",bsPrefix:e,className:n,children:o,onClick:r,...i},l)=>(e=U(e,"accordion-header"),s.jsx(t,{ref:l,...i,className:D(n,e),children:s.jsx(Be,{onClick:r,children:o})})));it.displayName="AccordionHeader";const lt=a.forwardRef(({as:t="div",bsPrefix:e,className:n,eventKey:o,...r},i)=>{e=U(e,"accordion-item");const l=a.useMemo(()=>({eventKey:o}),[o]);return s.jsx(Ee.Provider,{value:l,children:s.jsx(t,{ref:i,...r,className:D(n,e)})})});lt.displayName="AccordionItem";const ct=a.forwardRef((t,e)=>{const{as:n="div",activeKey:o,bsPrefix:r,className:i,onSelect:l,flush:d,alwaysOpen:p,...N}=Ft(t,{activeKey:"onSelect"}),m=U(r,"accordion"),E=a.useMemo(()=>({activeEventKey:o,onSelect:l,alwaysOpen:p}),[o,l,p]);return s.jsx(ue.Provider,{value:E,children:s.jsx(n,{ref:e,...N,className:D(i,m,d&&`${m}-flush`)})})});ct.displayName="Accordion";const me=Object.assign(ct,{Button:Be,Collapse:De,Item:lt,Header:it,Body:at}),ln={"aria-label":_e.string,onClick:_e.func,variant:_e.oneOf(["white"])},Ie=a.forwardRef(({className:t,variant:e,"aria-label":n="Close",...o},r)=>s.jsx("button",{ref:r,type:"button",className:D("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...o}));Ie.displayName="CloseButton";Ie.propTypes=ln;var ge;function Ke(t){if((!ge&&ge!==0||t)&&Ae){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),ge=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return ge}function Se(t){t===void 0&&(t=et());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function cn(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const Ge=Dt("modal-open");class Ue{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:o=!1}={}){this.handleContainerOverflow=n,this.isRTL=o,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return cn(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[o]:r.style[o]},e.scrollBarWidth&&(n[o]=`${parseInt(G(r,o)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(Ge,""),G(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(Ge),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const dn=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function un(t,e){if(t==null)return{};var n={},o=Object.keys(t),r,i;for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}let ke;function fn(t){return ke||(ke=new Ue({ownerDocument:t==null?void 0:t.document})),ke}function hn(t){const e=tt(),n=t||fn(e),o=a.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>n.add(o.current),remove:()=>n.remove(o.current),isTopModal:()=>n.isTopModal(o.current),setDialogRef:a.useCallback(r=>{o.current.dialog=r},[]),setBackdropRef:a.useCallback(r=>{o.current.backdrop=r},[])})}const dt=a.forwardRef((t,e)=>{let{show:n=!1,role:o="dialog",className:r,style:i,children:l,backdrop:d=!0,keyboard:p=!0,onBackdropClick:N,onEscapeKeyDown:m,transition:E,runTransition:R,backdropTransition:F,runBackdropTransition:x,autoFocus:j=!0,enforceFocus:u=!0,restoreFocus:c=!0,restoreFocusOptions:h,renderDialog:A,renderBackdrop:B=C=>s.jsx("div",Object.assign({},C)),manager:_,container:y,onShow:b,onHide:T=()=>{},onExit:M,onExited:S,onExiting:k,onEnter:I,onEntering:X,onEntered:K}=t,Y=un(t,dn);const f=tt(),w=Zt(y),g=hn(_),O=Bt(),H=It(n),[L,Q]=a.useState(!n),$=a.useRef(null);a.useImperativeHandle(e,()=>g,[g]),Ae&&!H&&n&&($.current=Se(f==null?void 0:f.document)),n&&L&&Q(!1);const V=q(()=>{if(g.add(),J.current=ze(document,"keydown",Ne),re.current=ze(document,"focus",()=>setTimeout(Ce),!0),b&&b(),j){var C,pe;const ie=Se((C=(pe=g.dialog)==null?void 0:pe.ownerDocument)!=null?C:f==null?void 0:f.document);g.dialog&&ie&&!We(g.dialog,ie)&&($.current=ie,g.dialog.focus())}}),oe=q(()=>{if(g.remove(),J.current==null||J.current(),re.current==null||re.current(),c){var C;(C=$.current)==null||C.focus==null||C.focus(h),$.current=null}});a.useEffect(()=>{!n||!w||V()},[n,w,V]),a.useEffect(()=>{L&&oe()},[L,oe]),ot(()=>{oe()});const Ce=q(()=>{if(!u||!O()||!g.isTopModal())return;const C=Se(f==null?void 0:f.document);g.dialog&&C&&!We(g.dialog,C)&&g.dialog.focus()}),fe=q(C=>{C.target===C.currentTarget&&(N==null||N(C),d===!0&&T())}),Ne=q(C=>{p&&en(C)&&g.isTopModal()&&(m==null||m(C),C.defaultPrevented||T())}),re=a.useRef(),J=a.useRef(),he=(...C)=>{Q(!0),S==null||S(...C)};if(!w)return null;const Z=Object.assign({role:o,ref:g.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},Y,{style:i,className:r,tabIndex:-1});let ae=A?A(Z):s.jsx("div",Object.assign({},Z,{children:a.cloneElement(l,{role:"document"})}));ae=qe(E,R,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:M,onExiting:k,onExited:he,onEnter:I,onEntering:X,onEntered:K,children:ae});let ee=null;return d&&(ee=B({ref:g.setBackdropRef,onClick:fe}),ee=qe(F,x,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ee})),s.jsx(s.Fragment,{children:Ut.createPortal(s.jsxs(s.Fragment,{children:[ee,ae]}),w)})});dt.displayName="Modal";const pn=Object.assign(dt,{Manager:Ue});function mn(t,e){t.classList?t.classList.add(e):tn(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function Xe(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function gn(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Xe(t.className,e):t.setAttribute("class",Xe(t.className&&t.className.baseVal||"",e))}const se={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class xn extends Ue{adjustAndStore(e,n,o){const r=n.style[e];n.dataset[e]=r,G(n,{[e]:`${parseFloat(G(n,e))+o}px`})}restore(e,n){const o=n.dataset[e];o!==void 0&&(delete n.dataset[e],G(n,{[e]:o}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(mn(n,"modal-open"),!e.scrollBarWidth)return;const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ne(n,se.FIXED_CONTENT).forEach(i=>this.adjustAndStore(o,i,e.scrollBarWidth)),ne(n,se.STICKY_CONTENT).forEach(i=>this.adjustAndStore(r,i,-e.scrollBarWidth)),ne(n,se.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(r,i,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();gn(n,"modal-open");const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ne(n,se.FIXED_CONTENT).forEach(i=>this.restore(o,i)),ne(n,se.STICKY_CONTENT).forEach(i=>this.restore(r,i)),ne(n,se.NAVBAR_TOGGLER).forEach(i=>this.restore(r,i))}}let Oe;function yn(t){return Oe||(Oe=new xn(t)),Oe}const ut=a.forwardRef(({className:t,bsPrefix:e,as:n="div",...o},r)=>(e=U(e,"modal-body"),s.jsx(n,{ref:r,className:D(t,e),...o})));ut.displayName="ModalBody";const ft=a.createContext({onHide(){}}),Le=a.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:o,size:r,fullscreen:i,children:l,scrollable:d,...p},N)=>{t=U(t,"modal");const m=`${t}-dialog`,E=typeof i=="string"?`${t}-fullscreen-${i}`:`${t}-fullscreen`;return s.jsx("div",{...p,ref:N,className:D(m,e,r&&`${t}-${r}`,o&&`${m}-centered`,d&&`${m}-scrollable`,i&&E),children:s.jsx("div",{className:D(`${t}-content`,n),children:l})})});Le.displayName="ModalDialog";const ht=a.forwardRef(({className:t,bsPrefix:e,as:n="div",...o},r)=>(e=U(e,"modal-footer"),s.jsx(n,{ref:r,className:D(t,e),...o})));ht.displayName="ModalFooter";const vn=a.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:o,children:r,...i},l)=>{const d=a.useContext(ft),p=q(()=>{d==null||d.onHide(),o==null||o()});return s.jsxs("div",{ref:l,...i,children:[r,n&&s.jsx(Ie,{"aria-label":t,variant:e,onClick:p})]})}),pt=a.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:o=!1,...r},i)=>(t=U(t,"modal-header"),s.jsx(vn,{ref:i,...r,className:D(e,t),closeLabel:n,closeButton:o})));pt.displayName="ModalHeader";const bn=Lt("h4"),mt=a.forwardRef(({className:t,bsPrefix:e,as:n=bn,...o},r)=>(e=U(e,"modal-title"),s.jsx(n,{ref:r,className:D(t,e),...o})));mt.displayName="ModalTitle";function wn(t){return s.jsx(nt,{...t,timeout:null})}function jn(t){return s.jsx(nt,{...t,timeout:null})}const gt=a.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:o,contentClassName:r,children:i,dialogAs:l=Le,"data-bs-theme":d,"aria-labelledby":p,"aria-describedby":N,"aria-label":m,show:E=!1,animation:R=!0,backdrop:F=!0,keyboard:x=!0,onEscapeKeyDown:j,onShow:u,onHide:c,container:h,autoFocus:A=!0,enforceFocus:B=!0,restoreFocus:_=!0,restoreFocusOptions:y,onEntered:b,onExit:T,onExiting:M,onEnter:S,onEntering:k,onExited:I,backdropClassName:X,manager:K,...Y},f)=>{const[w,g]=a.useState({}),[O,H]=a.useState(!1),L=a.useRef(!1),Q=a.useRef(!1),$=a.useRef(null),[V,oe]=$t(),Ce=Pt(f,oe),fe=q(c),Ne=zt();t=U(t,"modal");const re=a.useMemo(()=>({onHide:fe}),[fe]);function J(){return K||yn({isRTL:Ne})}function he(v){if(!Ae)return;const te=J().getScrollbarWidth()>0,Pe=v.scrollHeight>et(v).documentElement.clientHeight;g({paddingRight:te&&!Pe?Ke():void 0,paddingLeft:!te&&Pe?Ke():void 0})}const Z=q(()=>{V&&he(V.dialog)});ot(()=>{He(window,"resize",Z),$.current==null||$.current()});const ae=()=>{L.current=!0},ee=v=>{L.current&&V&&v.target===V.dialog&&(Q.current=!0),L.current=!1},C=()=>{H(!0),$.current=Ht(V.dialog,()=>{H(!1)})},pe=v=>{v.target===v.currentTarget&&C()},ie=v=>{if(F==="static"){pe(v);return}if(Q.current||v.target!==v.currentTarget){Q.current=!1;return}c==null||c()},bt=v=>{x?j==null||j(v):(v.preventDefault(),F==="static"&&C())},wt=(v,te)=>{v&&he(v),S==null||S(v,te)},jt=v=>{$.current==null||$.current(),T==null||T(v)},Et=(v,te)=>{k==null||k(v,te),Wt(window,"resize",Z)},Ct=v=>{v&&(v.style.display=""),I==null||I(v),He(window,"resize",Z)},Nt=a.useCallback(v=>s.jsx("div",{...v,className:D(`${t}-backdrop`,X,!R&&"show")}),[R,X,t]),$e={...n,...w};$e.display="block";const _t=v=>s.jsx("div",{role:"dialog",...v,style:$e,className:D(e,t,O&&`${t}-static`,!R&&"show"),onClick:F?ie:void 0,onMouseUp:ee,"data-bs-theme":d,"aria-label":m,"aria-labelledby":p,"aria-describedby":N,children:s.jsx(l,{...Y,onMouseDown:ae,className:o,contentClassName:r,children:i})});return s.jsx(ft.Provider,{value:re,children:s.jsx(pn,{show:E,ref:Ce,backdrop:F,container:h,keyboard:!0,autoFocus:A,enforceFocus:B,restoreFocus:_,restoreFocusOptions:y,onEscapeKeyDown:bt,onShow:u,onHide:c,onEnter:wt,onEntering:Et,onEntered:b,onExit:jt,onExiting:M,onExited:Ct,manager:J(),transition:R?wn:void 0,backdropTransition:R?jn:void 0,renderBackdrop:Nt,renderDialog:_t})})});gt.displayName="Modal";const ce=Object.assign(gt,{Body:ut,Header:pt,Title:mt,Footer:ht,Dialog:Le,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),En={"category-selector":"_category-selector_1aq5o_1"},Cn={nc:"Norm-conserving",us:"Ultrasoft",paw:"PAW"},Nn=({categories:t,activeCategories:e,onCategorySelect:n})=>s.jsx("div",{className:En["category-selector"],children:t.map(o=>s.jsx(Qt.Check,{type:"checkbox",id:`category-${o}`,label:Cn[o]||o,checked:e.includes(o),onChange:r=>r.target.checked?n([...e,o]):n(e.filter(i=>i!==o))},o))}),_n={"convergence-plot-container":"_convergence-plot-container_1kdkh_1"},Sn={"convergence-plot":"_convergence-plot_b9eda_1"};var xt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ye=W.createContext&&W.createContext(xt),kn=["attr","size","title"];function On(t,e){if(t==null)return{};var n=Rn(t,e),o,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)o=i[r],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}function Rn(t,e){if(t==null)return{};var n={};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}function we(){return we=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},we.apply(this,arguments)}function Qe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,o)}return n}function je(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qe(Object(n),!0).forEach(function(o){Tn(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function Tn(t,e,n){return e=Mn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mn(t){var e=An(t,"string");return typeof e=="symbol"?e:e+""}function An(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yt(t){return t&&t.map((e,n)=>W.createElement(e.tag,je({key:n},e.attr),yt(e.child)))}function Fn(t){return e=>W.createElement(Dn,we({attr:je({},t.attr)},e),yt(t.child))}function Dn(t){var e=n=>{var{attr:o,size:r,title:i}=t,l=On(t,kn),d=r||n.size||"1em",p;return n.className&&(p=n.className),t.className&&(p=(p?p+" ":"")+t.className),W.createElement("svg",we({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,l,{className:p,style:je(je({color:t.color||n.color},n.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&W.createElement("title",null,i),t.children)};return Ye!==void 0?W.createElement(Ye.Consumer,null,n=>e(n)):e(xt)}function Bn(t){return Fn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"},child:[]},{tag:"path",attr:{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"},child:[]}]})(t)}const In="_modalBody_18bmx_1",Un="_content_18bmx_5",Ln="_pre_18bmx_12",$n="_loadContainer_18bmx_20",Pn="_hint_18bmx_30",zn="_message_18bmx_35",Wn="_filename_18bmx_1",Hn="_downloadUpfText_18bmx_1",P={modalBody:In,content:Un,pre:Ln,loadContainer:$n,hint:Pn,message:zn,filename:Wn,downloadUpfText:Hn},Vn=({show:t,element:e,pseudoName:n,Z:o,onHide:r})=>{const{getUpfUuid:i,getPseudoFilename:l}=a.useContext(st),[d,p]=a.useState(""),[N,m]=a.useState(""),[E,R]=a.useState(!1),[F,x]=a.useState(!1),[j,u]=a.useState(null),c=!!Vt,h=a.useMemo(()=>!e||!n||o===void 0?"":i(e,n,o),[e,n,o,i]),A=a.useMemo(()=>!e||!n||o===void 0?"":l(e,n,o),[e,n,o,l]);a.useEffect(()=>{t&&(u(null),p(""),R(!1),x(!1),m(A||""))},[t,e,n,o,A]);const B=async()=>{if(u(null),!c){u("UPF viewer is unavailable (VITE_API_URL is not set)");return}if(!n||o===void 0){u("No pseudopotential selected");return}if(!h){u("No UPF UUID found for this pseudopotential");return}R(!0);try{const{filename:b,content:T}=await Me.fetchUpfFile(h);m(M=>M||b),p(T)}catch(b){u((b==null?void 0:b.message)||"Failed to load UPF file")}finally{R(!1)}},_=async()=>{if(u(null),!c){u("UPF download is unavailable (VITE_API_URL is not set)");return}if(!h){u("No UPF UUID found for this pseudopotential");return}x(!0);try{const{filename:b,blob:T}=await Me.fetchUpfBlob(h),M=URL.createObjectURL(T),S=document.createElement("a");S.href=M;const k=`${e}-${n||"pseudo"}${o!==void 0?`-Z${o}`:""}.upf`;S.download=N||b||k,document.body.appendChild(S),S.click(),S.remove(),URL.revokeObjectURL(M)}catch(b){u((b==null?void 0:b.message)||"Failed to download UPF file")}finally{x(!1)}},y=!c||!h;return s.jsxs(ce,{show:t,onHide:r,size:"xl",centered:!0,scrollable:!0,children:[s.jsx(ce.Header,{closeButton:!0,children:s.jsxs(ce.Title,{children:[e," (Z",s.jsx("sub",{children:"val"})," = ",o,") ",n]})}),s.jsx(ce.Body,{className:P.modalBody,children:j?s.jsx("div",{className:P.message,children:j}):E?s.jsx(Fe,{}):d?s.jsx("div",{className:P.content,children:s.jsx("pre",{className:P.pre,children:d})}):c?h?s.jsxs("div",{className:P.loadContainer,children:[s.jsx(Ve,{variant:"primary",onClick:B,children:"Load UPF content"}),s.jsx("div",{className:P.hint,children:"May take some time"})]}):s.jsx("div",{className:P.message,children:"No UPF UUID found for this pseudopotential."}):s.jsx("div",{className:P.message,children:"Backend not configured. UPF download/viewing is unavailable."})}),s.jsxs(ce.Footer,{children:[s.jsxs(Ve,{variant:"primary",onClick:_,disabled:y||F,children:[s.jsx("span",{id:P.downloadUpfText,children:"Download UPF file"}),F?s.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}):s.jsx(Bn,{})]}),s.jsx("h4",{id:P.filename,children:N})]})]})},Re=1.2,Te=1.3,xe=.13,vt=6,de=1,z=10,qn=40,Kn=80,Je=2,ye=8,Gn=120,Xn=new Set(["O","Fe","Mn","Hf","Co","Ni","Cr"]),Yn=.2,Qn=2,Jn=1,Zn=["δω","δV<sub>press</sub>","δE<sub>coh</sub>","δν"],es=["circle","triangle-down","star","square"],ts=["solid","dash","dot","solid"],ve={phononFrequencies:{label:"δω",symbol:"circle",dash:"solid"},pressure:{label:"δV<sub>press</sub>",symbol:"triangle-down",dash:"dash"},cohesiveEnergy:{label:"δE<sub>coh</sub>",symbol:"star",dash:"dot"},eos:{label:"δν",symbol:"square",dash:"solid"}},ns=(t,e,n,o,r,i)=>{const l=ye/4,d=r.map((x,j)=>j*ye),p=r.length*Gn+(qn+Kn),N=Xn.has(t)?18:8,m=[],E=[],R=[];r.forEach((x,j)=>{var K,Y;const u=((K=i[x.name])==null?void 0:K.color)||"black",c=j*ye,{quantities:h}=x;let A=[],B=[],_=[],y=[],b=[];if(h.phononFrequencies){A=h.phononFrequencies.values.map(g=>g*2/Qn);let f=be(ve.phononFrequencies,u);f.x=h.phononFrequencies.cutoffs,f.y=A.map(g=>g+c),B=h.phononFrequencies.error,f.error_y={type:"data",array:B,arrayminus:A.map(()=>0),visible:!0,color:u},m.push(f);const w=h.phononFrequencies.ref.toFixed(2);E.push({x:203.1,y:c-1,text:`ω<sub>max</sub> = ${w} cm<sup>-1</sup>`,showarrow:!1,font:{size:z}})}if(h.pressure){let f=be(ve.pressure,u);_=h.pressure.values.map(w=>w*2/Jn),f.x=h.pressure.cutoffs,f.y=_.map(w=>w+c),m.push(f)}if(h.cohesiveEnergy){let f=be(ve.cohesiveEnergy,u);y=h.cohesiveEnergy.values,f.x=h.cohesiveEnergy.cutoffs,f.y=y.map(g=>g+c),m.push(f);const w=h.cohesiveEnergy.ref.toFixed(2);E.push({x:205,y:c+1,text:`E<sub>coh</sub> = ${w} <i>meV/atom</i>`,showarrow:!1,font:{size:z}})}if(h.eos){let f=be(ve.eos,u);b=h.eos.values.map(w=>w*2/Yn),f.x=h.eos.cutoffs,f.y=b.map(w=>w+c),m.push(f)}if(h.bands){const f=h.bands.cutoffs,w=h.bands.eta_c,g=h.bands.max_diff_c;E.push({x:24,y:c+Re*l+xe,text:"       <i>η</i><sub>10</sub> = ",showarrow:!1,align:"left",font:{size:z}}),m.push({x:f,y:w.map(()=>c+Re*l),type:"scatter",mode:"text",text:w.map(O=>O.toFixed(2)),showlegend:!1,textfont:{size:z},hoverinfo:"skip"}),E.push({x:205,y:c+Re*l+xe,text:"[meV]",showarrow:!1,align:"left",font:{size:z}}),m.push({x:[0,250],y:[c+l,c+l],type:"scatter",mode:"lines",text:w.map(O=>O.toFixed(2)),showlegend:!1,line:{color:u,width:de,dash:"dashdot"},hoverinfo:"skip"}),m.push({x:[0,250],y:[c+l/2,c+l/2],type:"scatter",mode:"lines",text:w.map(O=>O.toFixed(2)),showlegend:!1,line:{color:"lightgray",width:de,dash:"dot"},hoverinfo:"skip"}),E.push({x:24,y:c-Te*l+xe,text:"max <i>η</i><sub>10</sub> = ",showarrow:!1,align:"left",font:{size:z}}),m.push({x:f,y:g.map(()=>c-Te*l),type:"scatter",mode:"text",text:g.map(O=>O.toFixed(2)),showlegend:!1,textfont:{size:z},hoverinfo:"skip"}),E.push({x:205,y:c-Te*l+xe,text:"[meV]",showarrow:!1,align:"left",font:{size:z}}),m.push({x:[0,250],y:[c-l,c-l],type:"scatter",mode:"lines",text:g.map(O=>O.toFixed(2)),showlegend:!1,line:{color:u,width:de,dash:"dashdot"},hoverinfo:"skip"})}R.push({type:"line",x0:18,x1:216,y0:c,y1:c,opacity:.25,line:{width:.5}});const T=((Y=x.quantities.bands)==null?void 0:Y.cutoffs)||[],M=[T],S=["E<sub>wfc</sub> = %{customdata[0]} Ry<br>"];let k=1;if(A.length){M.push(A);let f=`δω = %{customdata[${k}]:.3f}`;k+=1,B.length&&(M.push(B),f+=` &plusmn; %{customdata[${k}]:.1e}`,k+=1),f+="%<br>",S.push(f)}_.length&&(M.push(_),S.push(`δV<sub>press</sub> = %{customdata[${k}]:.3f}%<br>`),k+=1),y.length&&(M.push(y),S.push(`δE<sub>coh</sub> = %{customdata[${k}]:.3f} meV<br>`),k+=1),b.length&&(M.push(b),S.push(`δv = %{customdata[${k}]:.3f}`),k+=1),m.push({x:T,y:new Array(T.length).fill(c),mode:"markers",marker:{size:24,opacity:0,line:{width:0}},showlegend:!1,customdata:T.map((f,w)=>M.map(g=>g[w])),hoverlabel:{bgcolor:"rgb(225, 225, 225)",bordercolor:"black"},hovertemplate:`<b>${x.name}</b><br>`+S.join("")+"<extra></extra>"});const{metadata:I}=x.quantities,X=I?`ν<sub>avg</sub> = ${I.avg_nu.toFixed(2)}<br>ν<sub>max</sub> = ${I.max_nu.toFixed(2)} (${I.max_conf})<br>ν<sub>avg</sub> (w/o XO3) = ${I.avg_nu_wo_xo3.toFixed(2)}`:"not all EOS valid";E.push({xref:"paper",x:-.1,y:c,text:`<span style="color:#0d6efd"><b>${x.name}</b></span><br>Z<sub>val</sub> = ${x.Z}<br>${X}`,showarrow:!1,align:"left",font:{size:10},captureevents:!0}),n.forEach(f=>{if(o[f].pseudopotential===x.name&&o[f].Z===x.Z){const w=o[f].cutoff_wfc;let g,O,H,L;f==="efficiency"?(g="rect",O=.5,H="lightgreen",L="green"):(g="circle",O=.4,H="lightcoral",L="red"),R.push({type:g,xref:"x",yref:"y",x0:w-Je*O*2,x1:w+Je*O*2,y0:d[j]-l*O,y1:d[j]+l*O,fillcolor:H,line:{width:1,color:L},opacity:.5})}})}),Zn.forEach((x,j)=>{m.push({name:x,type:"scatter",mode:"lines+markers",x:[NaN],y:[NaN],line:{color:"black",width:de,dash:ts[j]},marker:{size:vt,symbol:es[j]},showlegend:!0,legendgroup:x,hoverinfo:"skip"})});const F={title:{text:`Verification summary: ${t} (${e})`},xaxis:{title:{text:`Wavefunction cutoff [Ry]; Charge density cutoff [Ry] = ${N} x Ewfc (PAW/US) | 4 x Ewfc (NC); q-point = [0.5, 0.5, 0.5]`},showgrid:!1,showline:!0,mirror:!0,tickvals:[...Array.from({length:18},(x,j)=>j*10+30)],ticks:"inside",ticklen:5,range:[18,216],fixedrange:!0},yaxis:{side:"right",title:{text:"Error w.r.t. ref. wavefunction cutoff"},zeroline:!1,showgrid:!1,showline:!0,mirror:!0,ticks:"inside",ticklen:5,tickmode:"array",tickvals:d,ticktext:d.map(()=>"0"),range:[-5,(r.length-1)*ye+5],fixedrange:!0},showlegend:!0,legend:{x:1.05,y:1,xanchor:"left",yanchor:"top",font:{size:z,color:"black"},bordercolor:"lightgrey",borderwidth:1},annotations:E,shapes:R,hovermode:"closest",height:p,margin:{l:160,r:80,t:40,b:80}};return{data:m,layout:F}},be=(t,e)=>({name:t.label,type:"scatter",mode:"lines+markers",line:{color:e,width:de,dash:t.dash},marker:{size:vt,symbol:t.symbol},showlegend:!1,legendgroup:t.label,hoverinfo:"skip"}),ss={responsive:!0,displayModeBar:!1,displaylogo:!1},os=({element:t,pseudosMetadata:e})=>{const[n,o]=a.useState(!0),{libraries:r}=a.useContext(qt),{elementsInfo:i}=a.useContext(Kt),[l,d]=a.useState({}),[p,N]=a.useState(!1),[m,E]=a.useState(""),[R,F]=a.useState(),x=a.useRef(null),j=a.useMemo(()=>!l||!l.pseudos?[]:l.pseudos.filter(c=>e.hasOwnProperty(c.name)).reverse(),[l==null?void 0:l.pseudos,e]),u=a.useMemo(()=>Object.fromEntries(Object.entries(i).map(([c,h])=>[c,h[t]])),[i,t]);return a.useEffect(()=>{t&&(o(!0),d({}),Me.fetchPseudosSummaryData(t).then(c=>{d(c)}).catch(c=>{console.error("Error fetching data:",c),d({})}).finally(()=>{o(!1)}))},[t]),a.useEffect(()=>{if(n||!j.length||!x.current)return;let c=!1;return(async()=>{const h=(await Gt(async()=>{const{default:y}=await import("./PlotlyLoader-BSJi9Xtv.js");return{default:y}},__vite__mapDeps([0,1,2,3]))).default;if(c||!x.current)return;const{data:A,layout:B}=ns(t,l.conff,r,u,j,e);await h.react(x.current,A,B,ss);const _=x.current;_!=null&&_.removeAllListeners&&_.removeAllListeners("plotly_clickannotation"),_!=null&&_.on&&_.on("plotly_clickannotation",async y=>{var I;const b=((I=y==null?void 0:y.annotation)==null?void 0:I.text)||"",T=b.match(/<b>(.*?)<\/b>/),M=T==null?void 0:T[1];if(!M)return;const S=b.match(/Z<sub>val<\/sub>\s*=\s*(\d+)/),k=S?Number.parseInt(S[1],10):NaN;Number.isFinite(k)&&(E(M),F(k),N(!0))})})(),()=>{c=!0}},[n,t,l,r,u,j,e]),n?s.jsx(Fe,{}):j.length?s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:x,id:Sn["convergence-plot"]}),s.jsx(Vn,{show:p,element:t,pseudoName:m,Z:R,onHide:()=>N(!1)})]}):s.jsx(Jt,{})},Ze={"convergence-plot-description":"_convergence-plot-description_1yh38_1","convergence-plot-legend-table":"_convergence-plot-legend-table_1yh38_1"},rs=()=>s.jsx(me,{id:Ze["convergence-plot-description"],children:s.jsxs(me.Item,{eventKey:"0",children:[s.jsx(me.Header,{children:"About the SSSP protocol convergence pattern plots"}),s.jsxs(me.Body,{children:[s.jsxs("section",{children:[s.jsx("p",{children:"We report here the zone-boundary phonons, cohesive energy, pressure, and band structure versus the wavefunction cutoff for all the considered pseudopotential libraries."}),s.jsxs("p",{children:["The colored horizontal dashed lines correspond to the thresholds of the SSSP efficiency criteria, whereas the gray dotted lines correspond to the precision criteria. ",s.jsx("br",{})," The recommended efficiency (precision) pseudopotential is marked with a colored"," ",s.jsx("span",{style:{color:"green"},children:"square"})," (",s.jsx("span",{style:{color:"red"},children:"circle"}),") at the recommended cutoff."]})]}),s.jsxs("section",{children:[s.jsx("h5",{children:"Metadata"}),"We report on the left of the plot:",s.jsxs("ul",{children:[s.jsx("li",{children:"the number of valence electrons of the pseudopotential"}),s.jsxs("li",{children:["the average of ",s.jsx("b",{children:"ν"}),", a *metric relating to the equation of state, across 10 structures"]}),s.jsxs("li",{children:["the maximum ",s.jsx("b",{children:"ν"})," value"]}),s.jsxs("li",{children:["the average of ",s.jsx("b",{children:"ν"}),", excluding the XO",s.jsx("sub",{children:"3"})," structure"]})]}),s.jsx("p",{children:"Tip: click a pseudopotential label on the left to open its UPF viewer (available when an API backend is configured)."})]}),s.jsxs("section",{children:[s.jsx("h5",{children:"Legend"}),s.jsxs("p",{children:["Each pseudopotential is represented in its own color. The legend items are kept in black and reflect the corresponding quantity/discrepancy across all pseudopotentials.",s.jsx("br",{}),"The markers correspond to the following quantities:"]}),s.jsxs(Xt,{id:Ze["convergence-plot-legend-table"],striped:!0,bordered:!0,responsive:!0,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Marker"}),s.jsx("th",{children:"Quantity"}),s.jsx("th",{children:"Units"}),s.jsx("th",{children:"Description"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{children:"●"}),s.jsx("td",{children:"δω"}),s.jsx("td",{children:"%"}),s.jsx("td",{children:"Discrepancy in all phonon frequencies at the zone boundary"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"▼"}),s.jsxs("td",{children:["δV",s.jsx("sub",{children:"press"})]}),s.jsx("td",{children:"%"}),s.jsx("td",{children:"Discrepancy in pressure"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"★"}),s.jsxs("td",{children:["δE",s.jsx("sub",{children:"coh"})]}),s.jsx("td",{children:"meV"}),s.jsx("td",{children:"Discrepancy in cohesive energy"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"■"}),s.jsx("td",{children:"δν"}),s.jsx("td",{children:"-"}),s.jsx("td",{children:"Discrepancy in band structure"})]})]})]}),s.jsx("p",{children:"A single click on a legend item toggles its visibility, while a double click isolates it."})]}),s.jsxs("section",{children:[s.jsx("h5",{children:"Categories"}),s.jsx("p",{children:"You can use the pseudopotential category checkboxes to filter the pseudopotentials shown in the plots."})]}),s.jsxs("section",{children:[s.jsx("h5",{children:"Additional information"}),s.jsxs("p",{children:["See the ",s.jsx("b",{children:"About"})," tab of the"," ",s.jsx("a",{href:"https://acwf-verification.materialscloud.org/",target:"_blank",style:{textDecoration:"none"},children:"Verification of the precision of DFT implementations via AiiDA common workflows"})," ","app to learn more about how ",s.jsx("b",{children:"ν"})," is computed. ",s.jsx("br",{}),"All calculations are performed on the ground-state elemental solids unless stated otherwise (i.e. rare-earths and flourine). See"," ",s.jsx(Yt,{to:"/about",style:{textDecoration:"none"},children:"About SSSP"})," ","for more details."]})]})]})]})}),cs=({element:t})=>{const{loadingMetadata:e,categories:n,pseudosMetadata:o}=a.useContext(st),[r,i]=a.useState(n),l=a.useMemo(()=>{const d={};return Object.entries(o).forEach(([p,N])=>{r.includes(N.category)&&(d[p]=N)}),d},[r,o]);return e?s.jsx(Fe,{}):s.jsxs("div",{id:"convergence-summary",children:[s.jsx(rs,{}),s.jsx(Nn,{categories:n,activeCategories:r,onCategorySelect:i}),s.jsx("div",{id:_n["convergence-plot-container"],children:s.jsx(os,{element:t,pseudosMetadata:l})})]})};export{cs as default};
