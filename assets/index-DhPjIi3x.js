const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-Bz0pDYxL.js","assets/index-Ccu1TaaF.js","assets/index-QUG939OS.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as g,_ as B,j as a,J as M,D as H,O as T,L as O,Q as I,U as E}from"./index-Ccu1TaaF.js";import{P as N,N as S}from"./PlotPaneHeader-bZpDhy9o.js";const $="_chessboardsPage_uwk1b_1",W={chessboardsPage:$},F={"chessboard-plot":"_chessboard-plot_14kug_1"},J={responsive:!0,displayModeBar:!1,scrollZoom:!1},b=({title:x,chessboardPseudos:o,values:y,zMax:d,onTileClick:k})=>{const p=g.useRef(null);return g.useEffect(()=>{if(!p.current)return;let i=null,t=null,m=!1,s=null;return(async()=>{if(i=(await B(async()=>{const{default:e}=await import("./PlotlyLoader-Bz0pDYxL.js");return{default:e}},__vite__mapDeps([0,1,2,3]))).default,m||!p.current)return;const c=y.map((e,n)=>e.map((l,r)=>n===r?null:l)),u=y.map((e,n)=>e.map((l,r)=>n===r?1:null)),h=[{z:c,x:o,y:o,zmin:0,zmax:d,colorscale:[[0,"#157347"],[.5,"#f0a17c"],[1,"#870000"]],type:"heatmap",hoverongaps:!1,hovertemplate:"%{z:.2f}<extra></extra>"},{z:u,x:o,y:o,zmin:0,zmax:1,colorscale:[[0,"#ffffff"],[1,"#ffffff"]],showscale:!1,type:"heatmap",hoverinfo:"skip"}],_={xaxis:{side:"top",title:{text:x,standoff:50,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45,tickmode:"array",tickvals:o,ticktext:o},yaxis:{autorange:"reversed",title:{text:`Max ${x}`,standoff:50,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45,tickmode:"array",tickvals:o,ticktext:o},hoverlabel:{namelength:0},shapes:[],annotations:y.map((e,n)=>e.map((l,r)=>({x:o[r],y:o[n],text:l>=100?l.toExponential(0).toString().replace("e+","e"):l.toFixed(1),showarrow:!1,font:{color:"white",size:Math.max(8,24-o.length)}})).filter((l,r)=>r!==n)).flat(),margin:{t:160,r:110,b:40,l:160},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};t=await i.react(p.current,h,_,J);const w=(e,n)=>{const l=o.length;if(l===0)return[];const r=o[e],f=o[n],v=o[0],j=o[l-1],L="rgba(0, 0, 0, 0.1)";return[{type:"rect",xref:"x",yref:"y",x0:r,x1:r,y0:v,y1:j,x0shift:-.5,x1shift:.5,y0shift:-.5,y1shift:.5,fillcolor:L,line:{width:0},layer:"above"},{type:"rect",xref:"x",yref:"y",x0:v,x1:j,y0:f,y1:f,x0shift:-.5,x1shift:.5,y0shift:-.5,y1shift:.5,fillcolor:L,line:{width:0},layer:"above"}]},R=e=>{if(!i)return;const n={shapes:[],"xaxis.ticktext":o,"yaxis.ticktext":o};i.relayout(e,n)},z=e=>o.map(n=>n===e?`<b>${n}</b>`:n),A=(e,n,l)=>{if(!i||typeof n!="string"||typeof l!="string")return;const r=o.indexOf(n),f=o.indexOf(l);if(r<0||f<0)return;const v={shapes:w(r,f),"xaxis.ticktext":z(n),"yaxis.ticktext":z(l)};i.relayout(e,v)};t.on("plotly_click",e=>{const{x:n,y:l,pointIndex:r}=e.points[0],f=x=="v"?0:1;k(f,[l,n],r)}),t.on("plotly_hover",e=>{const{x:n,y:l}=e.points[0];A(t,n,l)}),t.on("plotly_unhover",()=>{R(t)});const C=e=>{if(!e)return;const n={width:e.offsetWidth,height:e.offsetWidth};i&&i.relayout(e,n)};return s=()=>C(t),window.addEventListener("resize",s),C(t),()=>{var e,n,l;m=!0,s&&window.removeEventListener("resize",s),t&&((e=t.removeAllListeners)==null||e.call(t,"plotly_click"),(n=t.removeAllListeners)==null||n.call(t,"plotly_hover"),(l=t.removeAllListeners)==null||l.call(t,"plotly_unhover"))}})(),()=>{var c,u,h;if(m=!0,s&&window.removeEventListener("resize",s),i&&t)try{(c=t.removeAllListeners)==null||c.call(t,"plotly_click"),(u=t.removeAllListeners)==null||u.call(t,"plotly_hover"),(h=t.removeAllListeners)==null||h.call(t,"plotly_unhover"),i.purge(t)}catch(_){console.error("Error purging BandsChessboardPlot:",_)}}},[o,y,x,d,k]),a.jsx("div",{ref:p,className:F["chessboard-plot"]})},q=({onTileClick:x})=>{const{element:o}=g.useContext(M),{loadingMetadata:y}=g.useContext(H),{loadingPlotData:d,setActiveChessboardPseudos:k,setBandShift:p,chessboardPseudos:i,etaV:t,etaV10:m,shifts:s}=g.useContext(T),c=(h,_,w)=>{k(_),p(s[h][w[0]][w[1]]),x()},u=t.length>0&&m.length>0;return y||d?a.jsx(O,{}):a.jsxs("div",{id:W.chessboardsPage,children:[a.jsx(N,{title:`Band Chessboards: ${o}`}),u?a.jsxs(I,{className:"justify-content-center g-0",children:[a.jsx(E,{children:a.jsx(b,{title:"η<sub>v</sub>",chessboardPseudos:i,values:t,zMax:30,onTileClick:c})}),a.jsx(E,{children:a.jsx(b,{title:"η<sub>10</sub>",chessboardPseudos:i,values:m,zMax:60,onTileClick:c})})]}):a.jsx(S,{})]})};export{q as default};
