import{r as c,P as b,j as t,S as C,L as O}from"./index-BorDEQ2H.js";import{c as M,R as P,C as E,P as _}from"./PseudosCheckboxes-tdqf9zg4.js";const B={"eos-plot":"_eos-plot_1kkbs_1"},R=1e3,w=2,k=`(%{x:.${w}f}, %{y:.${w}f})`,L={displaylogo:!1,responsive:!0,modeBarButtonsToRemove:["zoomIn2d","zoomOut2d","autoScale2d","lasso2d","select2d"]},V=(u,r,m,f,o)=>u.map(d=>{const l=Math.pow(d/r,.6666666666666666);return m+9*f*r/16*(Math.pow(l-1,3)*o+Math.pow(l-1,2)*(6-4*l))}),$=({configuration:u,eosPseudosMap:r,pseudosColormap:m,activePseudos:f})=>{const o=c.useRef(null);return c.useEffect(()=>{if(!o.current)return;const d=Object.values(r).flatMap(s=>s.volumes||[]),l=Math.min(...d),y=Math.max(...d),g=Object.entries(r).filter(([s])=>f.includes(s)).map(([s,e])=>{var a;if(s!=="REF"&&e.volumes&&e.energies){const i=e.volumes.map((n,v)=>{var S;return{volume:n,energy:(((S=e.energies)==null?void 0:S[v])||0)-((e==null?void 0:e.E0)||0)}}).sort((n,v)=>n.volume-v.volume),h=i.map(n=>n.volume),p=i.map(n=>n.energy);return{x:h,y:p,mode:"lines+markers",type:"scatter",line:{shape:"spline"},name:s,marker:{color:m[s]},hovertemplate:k+`<br>ν = ${(a=e.nu)==null?void 0:a.toFixed(w)}`,hoverlabel:{align:"left"}}}else{const i=Array.from({length:R},(h,p)=>l+p*(y-l)/(R-1));return{x:i,y:V(i,e.V0,0,e.B0,e.B1),mode:"lines",type:"scatter",line:{color:m[s]},name:s,hovertemplate:k}}}),j={title:{text:u,x:.45},xaxis:{title:{text:"Volume [Å³/atom]"},showgrid:!1},yaxis:{title:{text:"Energy [eV/atom]"},showgrid:!1},showlegend:!1,margin:{l:70,r:20,t:30,b:60},autosize:!0};b.react(o.current,g,j,L);const x=()=>b.Plots.resize(o.current);return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[f]),t.jsx("div",{ref:o,className:B["eos-plot"]})},z={"eos-note":"_eos-note_3j6lo_1"},A=({element:u,activeLibrary:r})=>{const[m,f]=c.useState(!0),[o,d]=c.useState(),[l,y]=c.useState([]),[g,j]=c.useState([]),[x,s]=c.useState({});return c.useEffect(()=>{if(!u)return;new C().fetchEosData(r).then(a=>{const i=a[u];d(i);const h=Object.keys(Object.values(i)[0]);y(h),j(h),s(h.reduce((p,n,v)=>(p[n]=M[v%M.length],p),{}))}).catch(a=>{console.error("Error fetching EOS data:",a),d(void 0)}).finally(()=>f(!1))},[r,u]),m?t.jsx(O,{}):o?t.jsxs("div",{id:"eos-plots",children:[t.jsxs(P,{children:[t.jsx(E,{md:4,lg:3,xxl:2,className:z["pseudo-controls"],children:t.jsx(_,{pseudos:l,activePseudos:g,pseudosColormap:x,setActivePseudos:j})}),t.jsx(E,{children:t.jsx(P,{children:Object.entries(o).map(([e,a])=>t.jsx(E,{lg:6,xl:4,xxl:3,children:t.jsx($,{configuration:e,eosPseudosMap:a,pseudosColormap:x,activePseudos:g})},e))})})]}),t.jsx("div",{id:z["eos-note"],children:'Comparison of the Birch-Murnaghan fit of the pseudopotential equation of state ("Fit") with the reference all-electron results ("Wien2k").'})]}):t.jsx("span",{children:"No data available"})};export{A as default};
