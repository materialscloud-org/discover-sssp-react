const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-D1f5blce.js","assets/index-BXdNk7sc.js","assets/index-Cjp2Xj_Y.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{R as K,r as i,c as le,j as o,T as St,t as Ot,a as F,s as Y,b as Rt,E as Tt,d as Mt,e as At,f as Ft,u as L,g as Bt,P as ke,h as Fe,o as Ze,i as Ut,k as et,l as $t,m as Lt,n as G,p as ze,q as We,K as It,v as ne,w as Dt,x as Pt,y as zt,z as Wt,A as He,F as tt,B as Ht,C as Vt,D as nt,L as ot,G as Ve,H as qt,S as qe,I as Kt,J as st,_ as Gt,M as Xt,N as Yt,O as Qt}from"./index-BXdNk7sc.js";import{F as Jt,N as Zt}from"./NoDataMessage-pfAAWmzJ.js";import{u as en,a as rt,i as tn,r as Ke,h as nn,f as on}from"./utils-BArLr2f6.js";const sn={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function rn(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,s=e[n],r=sn[t];return s+parseInt(Y(e,r[0]),10)+parseInt(Y(e,r[1]),10)}const an={[Ft]:"collapse",[At]:"collapsing",[Mt]:"collapsing",[Tt]:"collapse show"},ln=K.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:r,className:a,children:d,dimension:f="height",in:h=!1,timeout:g=300,mountOnEnter:m=!1,unmountOnExit:E=!1,appear:_=!1,getDimensionValue:y=rn,...v},N)=>{const l=typeof f=="function"?f():f,p=i.useMemo(()=>le(w=>{w.style[l]="0"},t),[l,t]),j=i.useMemo(()=>le(w=>{const x=`scroll${l[0].toUpperCase()}${l.slice(1)}`;w.style[l]=`${w[x]}px`},e),[l,e]),k=i.useMemo(()=>le(w=>{w.style[l]=null},n),[l,n]),B=i.useMemo(()=>le(w=>{w.style[l]=`${y(l,w)}px`,Rt(w)},s),[s,y,l]),T=i.useMemo(()=>le(w=>{w.style[l]=null},r),[l,r]);return o.jsx(St,{ref:N,addEndListener:Ot,...v,"aria-expanded":v.role?h:null,onEnter:p,onEntering:j,onEntered:k,onExit:B,onExiting:T,childRef:d.ref,in:h,timeout:g,mountOnEnter:m,unmountOnExit:E,appear:_,children:(w,x)=>K.cloneElement(d,{...x,className:F(a,d.props.className,an[w],l==="width"&&"collapse-horizontal")})})});function at(t,e){return Array.isArray(t)?t.includes(e):t===e}const ue=i.createContext({});ue.displayName="AccordionContext";const Be=i.forwardRef(({as:t="div",bsPrefix:e,className:n,children:s,eventKey:r,...a},d)=>{const{activeEventKey:f}=i.useContext(ue);return e=L(e,"accordion-collapse"),o.jsx(ln,{ref:d,in:at(f,r),...a,className:F(n,e),children:o.jsx(t,{children:i.Children.only(s)})})});Be.displayName="AccordionCollapse";const Ce=i.createContext({eventKey:""});Ce.displayName="AccordionItemContext";const it=i.forwardRef(({as:t="div",bsPrefix:e,className:n,onEnter:s,onEntering:r,onEntered:a,onExit:d,onExiting:f,onExited:h,...g},m)=>{e=L(e,"accordion-body");const{eventKey:E}=i.useContext(Ce);return o.jsx(Be,{eventKey:E,onEnter:s,onEntering:r,onEntered:a,onExit:d,onExiting:f,onExited:h,children:o.jsx(t,{ref:m,...g,className:F(n,e)})})});it.displayName="AccordionBody";function cn(t,e){const{activeEventKey:n,onSelect:s,alwaysOpen:r}=i.useContext(ue);return a=>{let d=t===n?null:t;r&&(Array.isArray(n)?n.includes(t)?d=n.filter(f=>f!==t):d=[...n,t]:d=[t]),s==null||s(d,a),e==null||e(a)}}const Ue=i.forwardRef(({as:t="button",bsPrefix:e,className:n,onClick:s,...r},a)=>{e=L(e,"accordion-button");const{eventKey:d}=i.useContext(Ce),f=cn(d,s),{activeEventKey:h}=i.useContext(ue);return t==="button"&&(r.type="button"),o.jsx(t,{ref:a,onClick:f,...r,"aria-expanded":Array.isArray(h)?h.includes(d):d===h,className:F(n,e,!at(h,d)&&"collapsed")})});Ue.displayName="AccordionButton";const lt=i.forwardRef(({as:t="h2",bsPrefix:e,className:n,children:s,onClick:r,...a},d)=>(e=L(e,"accordion-header"),o.jsx(t,{ref:d,...a,className:F(n,e),children:o.jsx(Ue,{onClick:r,children:s})})));lt.displayName="AccordionHeader";const ct=i.forwardRef(({as:t="div",bsPrefix:e,className:n,eventKey:s,...r},a)=>{e=L(e,"accordion-item");const d=i.useMemo(()=>({eventKey:s}),[s]);return o.jsx(Ce.Provider,{value:d,children:o.jsx(t,{ref:a,...r,className:F(n,e)})})});ct.displayName="AccordionItem";const dt=i.forwardRef((t,e)=>{const{as:n="div",activeKey:s,bsPrefix:r,className:a,onSelect:d,flush:f,alwaysOpen:h,...g}=Bt(t,{activeKey:"onSelect"}),m=L(r,"accordion"),E=i.useMemo(()=>({activeEventKey:s,onSelect:d,alwaysOpen:h}),[s,d,h]);return o.jsx(ue.Provider,{value:E,children:o.jsx(n,{ref:e,...g,className:F(a,m,f&&`${m}-flush`)})})});dt.displayName="Accordion";const me=Object.assign(dt,{Button:Ue,Collapse:Be,Item:ct,Header:lt,Body:it}),dn={"aria-label":ke.string,onClick:ke.func,variant:ke.oneOf(["white"])},$e=i.forwardRef(({className:t,variant:e,"aria-label":n="Close",...s},r)=>o.jsx("button",{ref:r,type:"button",className:F("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...s}));$e.displayName="CloseButton";$e.propTypes=dn;var ge;function Ge(t){if((!ge&&ge!==0||t)&&Fe){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),ge=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return ge}function Se(t){t===void 0&&(t=Ze());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function un(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const Xe=Ut("modal-open");class Le{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:s=!1}={}){this.handleContainerOverflow=n,this.isRTL=s,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return un(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[s]:r.style[s]},e.scrollBarWidth&&(n[s]=`${parseInt(Y(r,s)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(Xe,""),Y(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(Xe),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const fn=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function hn(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,a;for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}let Oe;function pn(t){return Oe||(Oe=new Le({ownerDocument:t==null?void 0:t.document})),Oe}function mn(t){const e=et(),n=t||pn(e),s=i.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>n.add(s.current),remove:()=>n.remove(s.current),isTopModal:()=>n.isTopModal(s.current),setDialogRef:i.useCallback(r=>{s.current.dialog=r},[]),setBackdropRef:i.useCallback(r=>{s.current.backdrop=r},[])})}const ut=i.forwardRef((t,e)=>{let{show:n=!1,role:s="dialog",className:r,style:a,children:d,backdrop:f=!0,keyboard:h=!0,onBackdropClick:g,onEscapeKeyDown:m,transition:E,runTransition:_,backdropTransition:y,runBackdropTransition:v,autoFocus:N=!0,enforceFocus:l=!0,restoreFocus:p=!0,restoreFocusOptions:j,renderDialog:k,renderBackdrop:B=C=>o.jsx("div",Object.assign({},C)),manager:T,container:w,onShow:x,onHide:O=()=>{},onExit:M,onExited:S,onExiting:U,onEnter:R,onEntering:z,onEntered:X}=t,Q=hn(t,fn);const I=et(),u=en(w),c=mn(T),A=$t(),H=Lt(n),[W,V]=i.useState(!n),$=i.useRef(null);i.useImperativeHandle(e,()=>c,[c]),Fe&&!H&&n&&($.current=Se(I==null?void 0:I.document)),n&&W&&V(!1);const D=G(()=>{if(c.add(),J.current=ze(document,"keydown",Ne),re.current=ze(document,"focus",()=>setTimeout(_e),!0),x&&x(),N){var C,pe;const ie=Se((C=(pe=c.dialog)==null?void 0:pe.ownerDocument)!=null?C:I==null?void 0:I.document);c.dialog&&ie&&!We(c.dialog,ie)&&($.current=ie,c.dialog.focus())}}),se=G(()=>{if(c.remove(),J.current==null||J.current(),re.current==null||re.current(),p){var C;(C=$.current)==null||C.focus==null||C.focus(j),$.current=null}});i.useEffect(()=>{!n||!u||D()},[n,u,D]),i.useEffect(()=>{W&&se()},[W,se]),rt(()=>{se()});const _e=G(()=>{if(!l||!A()||!c.isTopModal())return;const C=Se(I==null?void 0:I.document);c.dialog&&C&&!We(c.dialog,C)&&c.dialog.focus()}),fe=G(C=>{C.target===C.currentTarget&&(g==null||g(C),f===!0&&O())}),Ne=G(C=>{h&&tn(C)&&c.isTopModal()&&(m==null||m(C),C.defaultPrevented||O())}),re=i.useRef(),J=i.useRef(),he=(...C)=>{V(!0),S==null||S(...C)};if(!u)return null;const Z=Object.assign({role:s,ref:c.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},Q,{style:a,className:r,tabIndex:-1});let ae=k?k(Z):o.jsx("div",Object.assign({},Z,{children:i.cloneElement(d,{role:"document"})}));ae=Ke(E,_,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:M,onExiting:U,onExited:he,onEnter:R,onEntering:z,onEntered:X,children:ae});let ee=null;return f&&(ee=B({ref:c.setBackdropRef,onClick:fe}),ee=Ke(y,v,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ee})),o.jsx(o.Fragment,{children:It.createPortal(o.jsxs(o.Fragment,{children:[ee,ae]}),u)})});ut.displayName="Modal";const gn=Object.assign(ut,{Manager:Le});function xn(t,e){t.classList?t.classList.add(e):nn(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function Ye(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function yn(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Ye(t.className,e):t.setAttribute("class",Ye(t.className&&t.className.baseVal||"",e))}const oe={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class vn extends Le{adjustAndStore(e,n,s){const r=n.style[e];n.dataset[e]=r,Y(n,{[e]:`${parseFloat(Y(n,e))+s}px`})}restore(e,n){const s=n.dataset[e];s!==void 0&&(delete n.dataset[e],Y(n,{[e]:s}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(xn(n,"modal-open"),!e.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ne(n,oe.FIXED_CONTENT).forEach(a=>this.adjustAndStore(s,a,e.scrollBarWidth)),ne(n,oe.STICKY_CONTENT).forEach(a=>this.adjustAndStore(r,a,-e.scrollBarWidth)),ne(n,oe.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(r,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();yn(n,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ne(n,oe.FIXED_CONTENT).forEach(a=>this.restore(s,a)),ne(n,oe.STICKY_CONTENT).forEach(a=>this.restore(r,a)),ne(n,oe.NAVBAR_TOGGLER).forEach(a=>this.restore(r,a))}}let Re;function bn(t){return Re||(Re=new vn(t)),Re}const ft=i.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=L(e,"modal-body"),o.jsx(n,{ref:r,className:F(t,e),...s})));ft.displayName="ModalBody";const ht=i.createContext({onHide(){}}),Ie=i.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:s,size:r,fullscreen:a,children:d,scrollable:f,...h},g)=>{t=L(t,"modal");const m=`${t}-dialog`,E=typeof a=="string"?`${t}-fullscreen-${a}`:`${t}-fullscreen`;return o.jsx("div",{...h,ref:g,className:F(m,e,r&&`${t}-${r}`,s&&`${m}-centered`,f&&`${m}-scrollable`,a&&E),children:o.jsx("div",{className:F(`${t}-content`,n),children:d})})});Ie.displayName="ModalDialog";const pt=i.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=L(e,"modal-footer"),o.jsx(n,{ref:r,className:F(t,e),...s})));pt.displayName="ModalFooter";const wn=i.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:s,children:r,...a},d)=>{const f=i.useContext(ht),h=G(()=>{f==null||f.onHide(),s==null||s()});return o.jsxs("div",{ref:d,...a,children:[r,n&&o.jsx($e,{"aria-label":t,variant:e,onClick:h})]})}),mt=i.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...r},a)=>(t=L(t,"modal-header"),o.jsx(wn,{ref:a,...r,className:F(e,t),closeLabel:n,closeButton:s})));mt.displayName="ModalHeader";const jn=Dt("h4"),gt=i.forwardRef(({className:t,bsPrefix:e,as:n=jn,...s},r)=>(e=L(e,"modal-title"),o.jsx(n,{ref:r,className:F(t,e),...s})));gt.displayName="ModalTitle";function En(t){return o.jsx(tt,{...t,timeout:null})}function Cn(t){return o.jsx(tt,{...t,timeout:null})}const xt=i.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:s,contentClassName:r,children:a,dialogAs:d=Ie,"data-bs-theme":f,"aria-labelledby":h,"aria-describedby":g,"aria-label":m,show:E=!1,animation:_=!0,backdrop:y=!0,keyboard:v=!0,onEscapeKeyDown:N,onShow:l,onHide:p,container:j,autoFocus:k=!0,enforceFocus:B=!0,restoreFocus:T=!0,restoreFocusOptions:w,onEntered:x,onExit:O,onExiting:M,onEnter:S,onEntering:U,onExited:R,backdropClassName:z,manager:X,...Q},I)=>{const[u,c]=i.useState({}),[A,H]=i.useState(!1),W=i.useRef(!1),V=i.useRef(!1),$=i.useRef(null),[D,se]=Pt(),_e=zt(I,se),fe=G(p),Ne=Wt();t=L(t,"modal");const re=i.useMemo(()=>({onHide:fe}),[fe]);function J(){return X||bn({isRTL:Ne})}function he(b){if(!Fe)return;const te=J().getScrollbarWidth()>0,Pe=b.scrollHeight>Ze(b).documentElement.clientHeight;c({paddingRight:te&&!Pe?Ge():void 0,paddingLeft:!te&&Pe?Ge():void 0})}const Z=G(()=>{D&&he(D.dialog)});rt(()=>{He(window,"resize",Z),$.current==null||$.current()});const ae=()=>{W.current=!0},ee=b=>{W.current&&D&&b.target===D.dialog&&(V.current=!0),W.current=!1},C=()=>{H(!0),$.current=Vt(D.dialog,()=>{H(!1)})},pe=b=>{b.target===b.currentTarget&&C()},ie=b=>{if(y==="static"){pe(b);return}if(V.current||b.target!==b.currentTarget){V.current=!1;return}p==null||p()},wt=b=>{v?N==null||N(b):(b.preventDefault(),y==="static"&&C())},jt=(b,te)=>{b&&he(b),S==null||S(b,te)},Et=b=>{$.current==null||$.current(),O==null||O(b)},Ct=(b,te)=>{U==null||U(b,te),Ht(window,"resize",Z)},_t=b=>{b&&(b.style.display=""),R==null||R(b),He(window,"resize",Z)},Nt=i.useCallback(b=>o.jsx("div",{...b,className:F(`${t}-backdrop`,z,!_&&"show")}),[_,z,t]),De={...n,...u};De.display="block";const kt=b=>o.jsx("div",{role:"dialog",...b,style:De,className:F(e,t,A&&`${t}-static`,!_&&"show"),onClick:y?ie:void 0,onMouseUp:ee,"data-bs-theme":f,"aria-label":m,"aria-labelledby":h,"aria-describedby":g,children:o.jsx(d,{...Q,onMouseDown:ae,className:s,contentClassName:r,children:a})});return o.jsx(ht.Provider,{value:re,children:o.jsx(gn,{show:E,ref:_e,backdrop:y,container:j,keyboard:!0,autoFocus:k,enforceFocus:B,restoreFocus:T,restoreFocusOptions:w,onEscapeKeyDown:wt,onShow:l,onHide:p,onEnter:jt,onEntering:Ct,onEntered:x,onExit:Et,onExiting:M,onExited:_t,manager:J(),transition:_?En:void 0,backdropTransition:_?Cn:void 0,renderBackdrop:Nt,renderDialog:kt})})});xt.displayName="Modal";const ce=Object.assign(xt,{Body:ft,Header:mt,Title:gt,Footer:pt,Dialog:Ie,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),_n={"category-selector":"_category-selector_1aq5o_1"},Nn={nc:"Norm-conserving",us:"Ultrasoft",paw:"PAW"},kn=({categories:t,activeCategories:e,onCategorySelect:n})=>o.jsx("div",{className:_n["category-selector"],children:t.map(s=>o.jsx(Jt.Check,{type:"checkbox",id:`category-${s}`,label:Nn[s]||s,checked:e.includes(s),onChange:r=>r.target.checked?n([...e,s]):n(e.filter(a=>a!==s))},s))}),Te={"convergence-summary-header":"_convergence-summary-header_1ed6f_1","convergence-plot-container":"_convergence-plot-container_1ed6f_1","convergence-plot-details-container":"_convergence-plot-details-container_1ed6f_1"},Sn={"convergence-plot":"_convergence-plot_b9eda_1"};var yt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qe=K.createContext&&K.createContext(yt),On=["attr","size","title"];function Rn(t,e){if(t==null)return{};var n=Tn(t,e),s,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)s=a[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function Tn(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function je(){return je=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},je.apply(this,arguments)}function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Je(Object(n),!0).forEach(function(s){Mn(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Mn(t,e,n){return e=An(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function An(t){var e=Fn(t,"string");return typeof e=="symbol"?e:e+""}function Fn(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vt(t){return t&&t.map((e,n)=>K.createElement(e.tag,Ee({key:n},e.attr),vt(e.child)))}function Bn(t){return e=>K.createElement(Un,je({attr:Ee({},t.attr)},e),vt(t.child))}function Un(t){var e=n=>{var{attr:s,size:r,title:a}=t,d=Rn(t,On),f=r||n.size||"1em",h;return n.className&&(h=n.className),t.className&&(h=(h?h+" ":"")+t.className),K.createElement("svg",je({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,d,{className:h,style:Ee(Ee({color:t.color||n.color},n.style),t.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),a&&K.createElement("title",null,a),t.children)};return Qe!==void 0?K.createElement(Qe.Consumer,null,n=>e(n)):e(yt)}function $n(t){return Bn({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"},child:[]},{tag:"path",attr:{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"},child:[]}]})(t)}const Ln="_modalBody_f8cvt_1",In="_content_f8cvt_5",Dn="_pre_f8cvt_12",Pn="_loadContainer_f8cvt_20",zn="_hint_f8cvt_30",Wn="_message_f8cvt_34",Hn="_filename_f8cvt_1",Vn="_downloadUpfText_f8cvt_1",qn="_downloadUpfButton_f8cvt_1",P={modalBody:Ln,content:In,pre:Dn,loadContainer:Pn,hint:zn,message:Wn,filename:Hn,downloadUpfText:Vn,downloadUpfButton:qn},Kn=({show:t,element:e,pseudoName:n,Z:s,onHide:r})=>{const{getUpfUuid:a,getPseudoFilename:d}=i.useContext(nt),[f,h]=i.useState(""),[g,m]=i.useState(""),[E,_]=i.useState(!1),[y,v]=i.useState(!1),[N,l]=i.useState(null),p=!!qt,j=i.useMemo(()=>!e||!n||s===void 0?"":a(e,n,s),[e,n,s,a]),k=i.useMemo(()=>!e||!n||s===void 0?"":d(e,n,s),[e,n,s,d]);i.useEffect(()=>{t&&(l(null),h(""),_(!1),v(!1),m(k||""))},[t,e,n,s,k]);const B=async()=>{if(l(null),!p){l("UPF viewer is unavailable (VITE_API_URL is not set)");return}if(!n||s===void 0){l("No pseudopotential selected");return}if(!j){l("No UPF UUID found for this pseudopotential");return}_(!0);try{const{filename:x,content:O}=await qe.fetchUpfFile(j);m(M=>M||x),h(O)}catch(x){l((x==null?void 0:x.message)||"Failed to load UPF file")}finally{_(!1)}},T=async()=>{if(l(null),!p){l("UPF download is unavailable (VITE_API_URL is not set)");return}if(!j){l("No UPF UUID found for this pseudopotential");return}v(!0);try{const{filename:x,blob:O}=await qe.fetchUpfBlob(j),M=URL.createObjectURL(O),S=document.createElement("a");S.href=M;const U=`${e}-${n||"pseudo"}${s!==void 0?`-Z${s}`:""}.upf`;S.download=g||x||U,document.body.appendChild(S),S.click(),S.remove(),URL.revokeObjectURL(M)}catch(x){l((x==null?void 0:x.message)||"Failed to download UPF file")}finally{v(!1)}},w=!p||!j;return o.jsxs(ce,{show:t,onHide:r,size:"xl",centered:!0,scrollable:!0,children:[o.jsx(ce.Header,{closeButton:!0,children:o.jsxs(ce.Title,{children:[e," (Z",o.jsx("sub",{children:"val"})," = ",s,") ",n]})}),o.jsx(ce.Body,{className:P.modalBody,children:N?o.jsx("div",{className:P.message,children:N}):E?o.jsx(ot,{}):f?o.jsx("div",{className:P.content,children:o.jsx("pre",{className:P.pre,children:f})}):p?j?o.jsxs("div",{className:P.loadContainer,children:[o.jsx(Ve,{variant:"primary",onClick:B,children:"Load UPF content"}),o.jsx("div",{className:P.hint,children:"May take some time"})]}):o.jsx("div",{className:P.message,children:"No UPF UUID found for this pseudopotential."}):o.jsx("div",{className:P.message,children:"Backend not configured. UPF download/viewing is unavailable."})}),o.jsxs(ce.Footer,{className:"justify-content-start",children:[o.jsxs(Ve,{id:P.downloadUpfButton,variant:"primary",onClick:T,disabled:w||y,children:[o.jsx("span",{id:P.downloadUpfText,children:"Download UPF file"}),y?o.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:o.jsx("span",{className:"visually-hidden",children:"Loading..."})}):o.jsx($n,{})]}),o.jsx("span",{id:P.filename,children:g})]})]})},Me=1.2,Ae=1.3,xe=.13,bt=6,de=1,q=10,Gn=40,Xn=80,ye=2,ve=8,Yn=120,Qn=new Set(["O","Fe","Mn","Hf","Co","Ni","Cr"]),Jn=.2,Zn=2,eo=1,to=["δω","δV<sub>press</sub>","δE<sub>coh</sub>","δν"],no=["circle","triangle-down","star","square"],oo=["solid","dash","dot","solid"],be={phononFrequencies:{label:"δω",symbol:"circle",dash:"solid"},pressure:{label:"δV<sub>press</sub>",symbol:"triangle-down",dash:"dash"},cohesiveEnergy:{label:"δE<sub>coh</sub>",symbol:"star",dash:"dot"},eos:{label:"δν",symbol:"square",dash:"solid"}},so=(t,e,n,s,r)=>{const a=ve/4,d=s.map((y,v)=>v*ve),f=s.length*Yn+(Gn+Xn),h=Qn.has(t)?18:8,g=[],m=[],E=[];s.forEach((y,v)=>{var Q,I;const N=((Q=r[y.name])==null?void 0:Q.color)||"black",l=v*ve,{quantities:p}=y;let j=[],k=[],B=[],T=[],w=[],x=[],O=[];if(p.phononFrequencies){j=p.phononFrequencies.values.map(A=>A*2/Zn);let u=we(be.phononFrequencies,N);u.x=p.phononFrequencies.cutoffs,u.y=j.map(A=>A+l),k=p.phononFrequencies.error,u.error_y={type:"data",array:k,arrayminus:j.map(()=>0),visible:!0,color:N},g.push(u);const c=p.phononFrequencies.ref.toFixed(2);m.push({x:203.1,y:l-1,text:`ω<sub>max</sub> = ${c} cm<sup>-1</sup>`,showarrow:!1,font:{size:q}})}if(p.pressure){let u=we(be.pressure,N);B=p.pressure.values.map(c=>c*2/eo),u.x=p.pressure.cutoffs,u.y=B.map(c=>c+l),g.push(u)}if(p.cohesiveEnergy){let u=we(be.cohesiveEnergy,N);T=p.cohesiveEnergy.values,u.x=p.cohesiveEnergy.cutoffs,u.y=T.map(A=>A+l),g.push(u);const c=p.cohesiveEnergy.ref.toFixed(2);m.push({x:205,y:l+1,text:`E<sub>coh</sub> = ${c} <i>meV/atom</i>`,showarrow:!1,font:{size:q}})}if(p.eos){let u=we(be.eos,N);w=p.eos.values.map(c=>c*2/Jn),u.x=p.eos.cutoffs,u.y=w.map(c=>c+l),g.push(u)}if(p.bands){const u=p.bands.cutoffs;x=p.bands.eta_c,O=p.bands.max_diff_c,m.push({x:24,y:l+Me*a+xe,text:"       <i>η</i><sub>10</sub> = ",showarrow:!1,align:"left",font:{size:q}}),g.push({x:u,y:x.map(()=>l+Me*a),type:"scatter",mode:"text",text:x.map(c=>c>=100?c.toExponential(0).toString().replace("e+","e"):c.toFixed(2)),showlegend:!1,textfont:{size:q},hoverinfo:"skip"}),m.push({x:205,y:l+Me*a+xe,text:"[meV]",showarrow:!1,align:"left",font:{size:q}}),g.push({x:[0,250],y:[l+a,l+a],type:"scatter",mode:"lines",text:x.map(c=>c.toFixed(2)),showlegend:!1,line:{color:N,width:de,dash:"dashdot"},hoverinfo:"skip"}),g.push({x:[0,250],y:[l+a/2,l+a/2],type:"scatter",mode:"lines",text:x.map(c=>c.toFixed(2)),showlegend:!1,line:{color:"lightgray",width:de,dash:"dot"},hoverinfo:"skip"}),m.push({x:24,y:l-Ae*a+xe,text:"max <i>η</i><sub>10</sub> = ",showarrow:!1,align:"left",font:{size:q}}),g.push({x:u,y:O.map(()=>l-Ae*a),type:"scatter",mode:"text",text:O.map(c=>c>=100?c.toExponential(0).toString().replace("e+","e"):c.toFixed(2)),showlegend:!1,textfont:{size:q},hoverinfo:"skip"}),m.push({x:205,y:l-Ae*a+xe,text:"[meV]",showarrow:!1,align:"left",font:{size:q}}),g.push({x:[0,250],y:[l-a,l-a],type:"scatter",mode:"lines",text:O.map(c=>c.toFixed(2)),showlegend:!1,line:{color:N,width:de,dash:"dashdot"},hoverinfo:"skip"})}E.push({type:"line",x0:18,x1:216,y0:l,y1:l,opacity:.25,line:{width:.5}});const M=((I=y.quantities.bands)==null?void 0:I.cutoffs)||[],S=[M],U=["E<sub>wfc</sub> = %{customdata[0]} Ry"];let R=1;if(j.length){S.push(j);let u=`<br />δω = %{customdata[${R}]:.3f}`;R+=1,k.length&&(S.push(k),u+=` &plusmn; %{customdata[${R}]:.1e}`,R+=1),u+="%",U.push(u)}B.length&&(S.push(B),U.push(`<br />δV<sub>press</sub> = %{customdata[${R}]:.3f}%`),R+=1),T.length&&(S.push(T),U.push(`<br />δE<sub>coh</sub> = %{customdata[${R}]:.3f} meV`),R+=1),w.length&&(S.push(w),U.push(`<br />δv = %{customdata[${R}]:.3f}`),R+=1),x.length&&(S.push(x),U.push(`<br />η<sub>10</sub> = %{customdata[${R}]:.3f} meV`),R+=1),O.length&&(S.push(O),U.push(`<br />max η<sub>10</sub> = %{customdata[${R}]:.3f} meV`),R+=1),g.push({x:M,y:new Array(M.length).fill(l),mode:"markers",marker:{size:24,opacity:0,line:{width:0}},showlegend:!1,customdata:M.map((u,c)=>S.map(A=>A[c])),hoverlabel:{bgcolor:"rgb(225, 225, 225)",bordercolor:"black"},hovertemplate:`<b>${y.name}</b><br />`+U.join("")+"<extra></extra>"});const{metadata:z}=y.quantities;let X="not all EOS valid";if(z){const u=z.avg_nu.toFixed(2),c=z.max_nu.toFixed(2),A=on(z.max_conf),H=z.avg_nu_wo_max.toFixed(2);X=`ν<sub>avg</sub> = ${u}<br />ν<sub>max</sub> = ${c} (${A})<br />ν<sub>avg</sub> (w/o max) = ${H}`}m.push({xref:"paper",x:-.1,y:l,text:`<span style="color:#0d6efd"><b>${y.name}</b></span><br />Z<sub>val</sub> = ${y.Z}<br />${X}`,showarrow:!1,align:"left",font:{size:10},captureevents:!0}),e.forEach(u=>{if(n[u].pseudopotential===y.name&&n[u].Z===y.Z){const c=n[u].cutoff_wfc;if(u==="efficiency")E.push({type:"rect",x0:c-ye,x1:c+ye,y0:d[v]-a,y1:d[v]+a,fillcolor:"lightgreen",line:{width:1,color:"green"},opacity:.5});else{const A=c-ye,H=c+ye,W=d[v]-a,V=d[v]+a,$=(A+H)/2,D=(W+V)/2;E.push({type:"path",path:`M ${$} ${V} L ${H} ${D} L ${$} ${W} L ${A} ${D} Z`,fillcolor:"lightcoral",line:{width:1,color:"darkred"},opacity:.5})}}})}),to.forEach((y,v)=>{g.push({name:y,type:"scatter",mode:"lines+markers",x:[NaN],y:[NaN],line:{color:"black",width:de,dash:oo[v]},marker:{size:bt,symbol:no[v]},showlegend:!0,legendgroup:y,hoverinfo:"skip"})});const _={xaxis:{title:{text:`Wavefunction cutoff [Ry]; Charge density cutoff [Ry] = ${h} x Ewfc (PAW/US) | 4 x Ewfc (NC); q-point = [0.5, 0.5, 0.5]`},showgrid:!1,showline:!0,mirror:!0,tickvals:[...Array.from({length:18},(y,v)=>v*10+30)],ticks:"inside",ticklen:5,range:[18,216],fixedrange:!0},yaxis:{side:"right",title:{text:"Error w.r.t. ref. wavefunction cutoff"},zeroline:!1,showgrid:!1,showline:!0,mirror:!0,ticks:"inside",ticklen:5,tickmode:"array",tickvals:d,ticktext:d.map(()=>"0"),range:[-5,(s.length-1)*ve+5],fixedrange:!0},showlegend:!0,legend:{x:1.05,y:1,xanchor:"left",yanchor:"top",font:{size:q,color:"black"},bordercolor:"lightgrey",borderwidth:1},annotations:m,shapes:E,hovermode:"closest",height:f,margin:{l:160,r:80,t:10,b:70}};return{data:g,layout:_}},we=(t,e)=>({name:t.label,type:"scatter",mode:"lines+markers",line:{color:e,width:de,dash:t.dash},marker:{size:bt,symbol:t.symbol},showlegend:!1,legendgroup:t.label,hoverinfo:"skip"}),ro={responsive:!0,displayModeBar:!1,displaylogo:!1},ao=({element:t,summaryData:e,pseudosMetadata:n})=>{const{libraries:s}=i.useContext(Kt),{elementsInfo:r}=i.useContext(st),[a,d]=i.useState(!1),[f,h]=i.useState(""),[g,m]=i.useState(),E=i.useRef(null),_=i.useMemo(()=>!e||!e.pseudos?[]:e.pseudos.filter(v=>n.hasOwnProperty(v.name)).reverse(),[e==null?void 0:e.pseudos,n]),y=i.useMemo(()=>Object.fromEntries(Object.entries(r).map(([v,N])=>[v,N[t]])),[r,t]);return i.useEffect(()=>{if(!_.length||!E.current)return;let v=!1;return(async()=>{const N=(await Gt(async()=>{const{default:k}=await import("./PlotlyLoader-D1f5blce.js");return{default:k}},__vite__mapDeps([0,1,2,3]))).default;if(v||!E.current)return;const{data:l,layout:p}=so(t,s,y,_,n);await N.react(E.current,l,p,ro);const j=E.current;j!=null&&j.removeAllListeners&&j.removeAllListeners("plotly_clickannotation"),j!=null&&j.on&&j.on("plotly_clickannotation",async k=>{var M;const B=((M=k==null?void 0:k.annotation)==null?void 0:M.text)||"",T=B.match(/<b>(.*?)<\/b>/),w=T==null?void 0:T[1];if(!w)return;const x=B.match(/Z<sub>val<\/sub>\s*=\s*(\d+)/),O=x?Number.parseInt(x[1],10):NaN;Number.isFinite(O)&&(h(w),m(O),d(!0))})})(),()=>{v=!0}},[t,e,s,y,_,n]),_.length?o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:E,id:Sn["convergence-plot"]}),o.jsx(Kn,{show:a,element:t,pseudoName:f,Z:g,onHide:()=>d(!1)})]}):o.jsx(Zt,{})},io={"convergence-plot-legend-table":"_convergence-plot-legend-table_1h1ks_1"},lo=()=>o.jsx(me,{children:o.jsxs(me.Item,{eventKey:"0",children:[o.jsx(me.Header,{children:"About the SSSP protocol convergence pattern plots"}),o.jsxs(me.Body,{children:[o.jsxs("section",{children:[o.jsx("p",{children:"We report here the zone-boundary phonons, cohesive energy, pressure, and band structure versus the wavefunction cutoff for all the considered pseudopotential libraries."}),o.jsxs("p",{children:["The colored horizontal dashed lines correspond to the thresholds of the SSSP efficiency criteria, whereas the gray dotted lines correspond to the precision criteria. ",o.jsx("br",{})," The recommended efficiency (precision) pseudopotential is marked with a"," ",o.jsx("span",{style:{color:"green"},children:"rectangle"})," (",o.jsx("span",{style:{color:"red"},children:"diamond"}),") at the recommended cutoff."]})]}),o.jsxs("section",{children:[o.jsx("h5",{children:"Metadata"}),"We report on the left of the plot:",o.jsxs("ul",{children:[o.jsx("li",{children:"the number of valence electrons of the pseudopotential"}),o.jsxs("li",{children:["the average of ",o.jsx("b",{children:"ν"}),", a *metric relating to the equation of state, across 10 structures"]}),o.jsxs("li",{children:["the maximum ",o.jsx("b",{children:"ν"})," value"]}),o.jsxs("li",{children:["the average of ",o.jsx("b",{children:"ν"}),", excluding the XO",o.jsx("sub",{children:"3"})," structure"]})]}),o.jsx("p",{children:"Tip: click a pseudopotential label on the left to open its UPF viewer (available when an API backend is configured)."})]}),o.jsxs("section",{children:[o.jsx("h5",{children:"Legend"}),o.jsxs("p",{children:["Each pseudopotential is represented in its own color. The legend items are kept in black and reflect the corresponding quantity/discrepancy across all pseudopotentials.",o.jsx("br",{}),"The markers correspond to the following quantities:"]}),o.jsxs(Xt,{id:io["convergence-plot-legend-table"],striped:!0,bordered:!0,responsive:!0,children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Marker"}),o.jsx("th",{children:"Quantity"}),o.jsx("th",{children:"Units"}),o.jsx("th",{children:"Description"})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{children:"●"}),o.jsx("td",{children:"δω"}),o.jsx("td",{children:"%"}),o.jsx("td",{children:"Discrepancy in all phonon frequencies at the zone boundary"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"▼"}),o.jsxs("td",{children:["δV",o.jsx("sub",{children:"press"})]}),o.jsx("td",{children:"%"}),o.jsx("td",{children:"Discrepancy in pressure"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"★"}),o.jsxs("td",{children:["δE",o.jsx("sub",{children:"coh"})]}),o.jsx("td",{children:"meV"}),o.jsx("td",{children:"Discrepancy in cohesive energy"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"■"}),o.jsx("td",{children:"δν"}),o.jsx("td",{children:"-"}),o.jsx("td",{children:"Discrepancy in equation of state"})]})]})]}),o.jsx("p",{children:"A single click on a legend item toggles its visibility, while a double click isolates it."})]}),o.jsxs("section",{children:[o.jsx("h5",{children:"Categories"}),o.jsx("p",{children:"You can use the pseudopotential category checkboxes to filter the pseudopotentials shown in the plots."})]}),o.jsxs("section",{children:[o.jsx("h5",{children:"Additional information"}),o.jsxs("p",{children:["See the ",o.jsx("b",{children:"About"})," tab of the"," ",o.jsx("a",{href:"https://acwf-verification.materialscloud.org/",target:"_blank",style:{textDecoration:"none"},children:"Verification of the precision of DFT implementations via AiiDA common workflows"})," ","app to learn more about how ",o.jsx("b",{children:"ν"})," is computed. ",o.jsx("br",{}),"All calculations are performed on the ground-state elemental solids unless stated otherwise (i.e. rare-earths and flourine). See"," ",o.jsx(Yt,{to:"/about",style:{textDecoration:"none"},children:"About SSSP"})," ","for more details."]})]})]})]})}),ho=()=>{const{element:t}=i.useContext(st),{loadingMetadata:e,categories:n,pseudosMetadata:s,activeCategories:r,setActiveCategories:a}=i.useContext(nt),{loadingConvergenceData:d,convergenceData:f}=i.useContext(Qt),h=i.useMemo(()=>{const m={};return Object.entries(s).forEach(([E,_])=>{r.includes(_.category)&&(m[E]=_)}),m},[r,s]);return e||d?o.jsx(ot,{}):o.jsxs("div",{id:"convergence-summary",children:[o.jsxs("div",{id:Te["convergence-summary-header"],children:[o.jsxs("h2",{className:"display-6",children:["Verification summary: ",t," (",f.conff,")"]}),o.jsx(kn,{categories:n,activeCategories:r,onCategorySelect:a})]}),o.jsx("div",{id:Te["convergence-plot-container"],children:o.jsx(ao,{element:t,summaryData:f,pseudosMetadata:h})}),o.jsx("div",{id:Te["convergence-plot-details-container"],children:o.jsx(lo,{})})]})};export{ho as default};
