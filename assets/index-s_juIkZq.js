const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-7eiHDVS3.js","assets/index-12XJueOi.js","assets/index-CESS_hL7.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as i,_ as P,j as d,P as j,S as E,i as k,l as L,C as m}from"./index-12XJueOi.js";const M={"chessboard-plot":"_chessboard-plot_14kug_1"},C={responsive:!0,displayModeBar:!1,scrollZoom:!1},S=({pseudoFilenames:r,values:t,title:n,colorMax:v,onTileClick:_})=>{const a=i.useRef(null),c=i.useMemo(()=>r.map(R),[r]);return i.useEffect(()=>{if(!a.current)return;let l=null,e=null,g=!1,u=null;return(async()=>{if(l=(await P(async()=>{const{default:s}=await import("./PlotlyLoader-7eiHDVS3.js");return{default:s}},__vite__mapDeps([0,1,2,3]))).default,g||!a.current)return;const h=[{z:t,x:c,y:c,colorscale:"Inferno",type:"heatmap",hovertemplate:`<b>%{x}   |   %{y}<br><b>Max ${n}:</b> %{z:.2f}<extra></extra>`},{yaxis:"y2",mode:"none",showlegend:!1}],x={xaxis:{side:"top",title:{text:""},fixedrange:!0,tickangle:-90},yaxis:{autorange:"reversed",title:{text:""},fixedrange:!0},yaxis2:{overlaying:"y",side:"right",title:{text:`Max ${n}`,standoff:100},showticklabels:!1,fixedrange:!0},hoverlabel:{namelength:0},annotations:t.map((s,f)=>s.map((o,p)=>({x:c[p],y:c[f],text:o.toFixed(1),showarrow:!1,font:{color:o>v/2?"white":"black",size:10}}))).flat(),margin:{t:160,r:60,b:40,l:160},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};e=await l.react(a.current,h,x,C),e.on("plotly_click",s=>{const{x:f,y:o,pointIndex:p}=s.points[0],y=n=="v"?0:1;_(y,[o,f],p)});const b=s=>{if(!s)return;const f={width:s.offsetWidth,height:s.offsetWidth};l.relayout(s,f)};return u=()=>b(e),window.addEventListener("resize",u),b(e),()=>{var s;e&&((s=e.removeAllListeners)==null||s.call(e,"plotly_click"))}})(),()=>{var h;if(g=!0,u&&window.removeEventListener("resize",u),l&&e)try{(h=e.removeAllListeners)==null||h.call(e,"plotly_click"),l.purge(e)}catch(x){console.error("Error purging BandsChessboardPlot:",x)}}},[r,t,n,v]),d.jsx("div",{ref:a,className:M["chessboard-plot"]})},O=new Set(["n","spn","spfn","spdn","spdfn","sl"]),w={"dojo.v0.4.1-std":"DOJO-041-std","dojo.v0.4.1-str":"DOJO-041-str","dojo.v0.5.0-std":"DOJO-050-std","spms.v1":"SPMS","sg15.v0":"SG15","us+gbrv.v1":"GBRV-1.X","us+psl.v1.0.0-high":"PSL-US-v1-high","us+psl.v1.0.0-low":"PSL-US-v1-low","us+psl.v0":"PSL-US-v0.x","paw+psl.v0":"PSL-PAW-v0.x","paw+psl.v1.0.0-high":"PSL-PAW-v1-high","paw+psl.v1.0.0-low":"PSL-PAW-v1-low","paw+jth.v1.1-std":"JTH-1.1-std","paw+jth.v1.1-str":"JTH-1.1-str","paw+wentzcovitch.v1.0.legacy":"Wentzcovitch","paw+uni-marburg.v0":"MARBURG"};function R(r){let t=r.split(".");t=t.slice(1,t.length-1),O.has(t[t.length-1])&&(t=t.slice(0,t.length-1));const n=t[0],v=n==="us"||n==="paw"?`${n}+`:"",_=t[2].replace("z_","");let a=t.slice(4).join(".");if(a.includes("psl.v0"))a=a.split("v0")[0]+"v0";else{const l=["gbrv.v1","gbrv.v1.5"];for(let e of l)if(a.includes(e)){a=e;break}}const c=v+a;return c in w?`${w[c]}-${_}`:r}const T={"chessboard-plots":"_chessboard-plots_sjmsm_1"},A=({element:r,setChessboardPseudos:t,setBandShift:n,onTileClick:v})=>{const{loadingMetadata:_}=i.useContext(j),[a,c]=i.useState(!0),[l,e]=i.useState([]),[g,u]=i.useState([]),[h,x]=i.useState([]),[b,s]=i.useState([]);i.useEffect(()=>{r&&E.fetchBandChessboardData(r).then(o=>{e(o.pseudos),u(o.v_distance.max_diff_c),x(o.v10_distance.max_diff_c);const p=[o.v_distance.shift_c,o.v10_distance.shift_c];s(p)}).catch(o=>{console.error("Error fetching band chessboard data:",o),e([]),u([]),x([]),s([])}).finally(()=>{c(!1)})},[r]);const f=(o,p,y)=>{t(p),n(b[o][y[0]][y[1]]),v("Band Structure")};return _||a?d.jsx(k,{}):d.jsx("div",{id:"chessboard-page",children:d.jsx("div",{id:T["chessboard-plots"],children:d.jsxs(L,{className:"justify-content-center g-0",children:[d.jsx(m,{xxl:"6",children:d.jsx(S,{pseudoFilenames:l,values:g,title:"v",colorMax:Math.max(...g.flat()),onTileClick:f})}),d.jsx(m,{xxl:"6",children:d.jsx(S,{pseudoFilenames:l,values:h,title:"v10",colorMax:Math.max(...h.flat()),onTileClick:f})})]})})})};export{A as default};
