const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlotlyLoader-D1f5blce.js","assets/index-BXdNk7sc.js","assets/index-Cjp2Xj_Y.css","assets/PlotlyLoader-CuCRB34y.css"])))=>i.map(i=>d[i]);
import{r as _,_ as j,j as l,D as v,O as w,L as E,Q as P,U as g}from"./index-BXdNk7sc.js";const L={"chessboard-plots":"_chessboard-plots_sjmsm_1"},M={"chessboard-plot":"_chessboard-plot_14kug_1"},R={responsive:!0,displayModeBar:!1,scrollZoom:!1},z=({title:n,pseudoFilenames:o,values:d,zMax:h,onTileClick:m})=>{const i=_.useRef(null);return _.useEffect(()=>{if(!i.current)return;let c=null,t=null,p=!1,f=null;return(async()=>{if(c=(await j(async()=>{const{default:e}=await import("./PlotlyLoader-D1f5blce.js");return{default:e}},__vite__mapDeps([0,1,2,3]))).default,p||!i.current)return;const x=d.map((e,s)=>e.map((r,a)=>s===a?null:r)),u=d.map((e,s)=>e.map((r,a)=>s===a?1:null)),b=[{z:x,x:o,y:o,zmin:0,zmax:h,colorscale:[[0,"#157347"],[.5,"#f0a17c"],[1,"#870000"]],type:"heatmap",hoverongaps:!1,hovertemplate:`<b>x:</b> %{x}<br /><b>y:</b> %{y}<br><b>Max ${n}:</b> %{z:.2f}<extra></extra>`},{z:u,x:o,y:o,zmin:0,zmax:1,colorscale:[[0,"#ffffff"],[1,"#ffffff"]],showscale:!1,type:"heatmap",hoverinfo:"skip"}],k={xaxis:{side:"top",title:{text:n,standoff:10,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45},yaxis:{autorange:"reversed",title:{text:`Max ${n}`,standoff:10,font:{size:20}},linecolor:"black",mirror:!0,fixedrange:!0,tickangle:-45},hoverlabel:{namelength:0},annotations:d.map((e,s)=>e.map((r,a)=>({x:o[a],y:o[s],text:r>=100?r.toExponential(0).toString().replace("e+","e"):r.toFixed(1),showarrow:!1,font:{color:"white",size:Math.max(8,24-o.length)}})).filter((r,a)=>a!==s)).flat(),margin:{t:160,r:110,b:40,l:160},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};t=await c.react(i.current,b,k,R),t.on("plotly_click",e=>{const{x:s,y:r,pointIndex:a}=e.points[0],C=n=="v"?0:1;m(C,[r,s],a)});const y=e=>{if(!e)return;const s={width:e.offsetWidth,height:e.offsetWidth};c.relayout(e,s)};return f=()=>y(t),window.addEventListener("resize",f),y(t),()=>{var e;t&&((e=t.removeAllListeners)==null||e.call(t,"plotly_click"))}})(),()=>{var x;if(p=!0,f&&window.removeEventListener("resize",f),c&&t)try{(x=t.removeAllListeners)==null||x.call(t,"plotly_click"),c.purge(t)}catch(u){console.error("Error purging BandsChessboardPlot:",u)}}},[o,d,n,h]),l.jsx("div",{ref:i,className:M["chessboard-plot"]})},T=({onTileClick:n})=>{const{loadingMetadata:o}=_.useContext(v),{loadingChessboardData:d,setChessboardPseudos:h,setBandShift:m,pseudoFilenames:i,etaV:c,etaV10:t,shifts:p}=_.useContext(w),f=(x,u,b)=>{h(u),m(p[x][b[0]][b[1]]),n()};return o||d?l.jsx(E,{}):l.jsx("div",{id:"chessboard-page",children:l.jsx("div",{id:L["chessboard-plots"],children:l.jsxs(P,{className:"justify-content-center g-0",children:[l.jsx(g,{children:l.jsx(z,{title:"η<sub>v</sub>",pseudoFilenames:i,values:c,zMax:30,onTileClick:f})}),l.jsx(g,{children:l.jsx(z,{title:"η10",pseudoFilenames:i,values:t,zMax:60,onTileClick:f})})]})})})};export{T as default};
